[debug] [2020-04-07T20:25:10.801Z] ----------------------------------------------------------------------
[debug] [2020-04-07T20:25:10.803Z] Command:       /Users/dansabin/.nvm/versions/node/v10.16.3/bin/node /Users/dansabin/.nvm/versions/node/v10.16.3/bin/firebase emulators:start
[debug] [2020-04-07T20:25:10.803Z] CLI Version:   8.0.2
[debug] [2020-04-07T20:25:10.803Z] Platform:      darwin
[debug] [2020-04-07T20:25:10.803Z] Node Version:  v10.16.3
[debug] [2020-04-07T20:25:10.804Z] Time:          Tue Apr 07 2020 13:25:10 GMT-0700 (Pacific Daylight Time)
[debug] [2020-04-07T20:25:10.804Z] ----------------------------------------------------------------------
[debug] [2020-04-07T20:25:10.804Z] 
[debug] [2020-04-07T20:25:10.810Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2020-04-07T20:25:10.810Z] > authorizing via signed-in user
[info] i  emulators: Starting emulators: functions, firestore, hosting
[debug] [2020-04-07T20:25:10.856Z] [hub] writing locator at /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/hub-reach4help-dev.json
[info] ✔  hub: emulator hub started at http://localhost:4400
[info] ✔  functions: Using node@10 from host.
[info] ✔  functions: functions emulator started at http://localhost:5001
[warn] ⚠  firestore: The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration.
[debug] [2020-04-07T20:25:10.877Z] Ignoring unsupported arg: projectId
[debug] [2020-04-07T20:25:10.877Z] Ignoring unsupported arg: auto_download
[debug] [2020-04-07T20:25:10.877Z] Starting firestore emulator with command {"binary":"java","args":["-Duser.language=en","-jar","/Users/dansabin/.cache/firebase/emulators/cloud-firestore-emulator-v1.11.2.jar","--host","localhost","--port",8080,"--rules","/Users/dansabin/projects/freethinkingit/reach4help/firebase/firestore.rules","--functions_emulator","localhost:5001"],"optionalArgs":["port","webchannel_port","host","rules","functions_emulator","seed_from_export"],"joinArgs":false}
[info] i  firestore: firestore emulator logging to firestore-debug.log
[debug] [2020-04-07T20:25:11.686Z] API endpoint: http://localhost:
[debug] [2020-04-07T20:25:11.686Z] 8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=localhost:8080

Dev App Server is now running.


[info] ✔  firestore: firestore emulator started at http://localhost:8080
[info] i  firestore: For testing set FIRESTORE_EMULATOR_HOST=localhost:8080
[debug] [2020-04-07T20:25:11.903Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/reach4help-dev/webApps/-/config  
 
[debug] [2020-04-07T20:25:12.268Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Tue, 07 Apr 2020 20:25:12 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"quic=\":443\"; ma=2592000; v=\"46,43\",h3-Q050=\":443\"; ma=2592000,h3-Q049=\":443\"; ma=2592000,h3-Q048=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,h3-T050=\":443\"; ma=2592000","accept-ranges":"none","transfer-encoding":"chunked"}
[info] i  hosting[web-client]: Serving hosting files from: web-client/build
[info] ✔  hosting[web-client]: Local server: http://localhost:5000
[info] ✔  hosting: hosting emulator started at http://localhost:5000
[info] i  functions: Watching "/Users/dansabin/projects/freethinkingit/reach4help/functions" for Cloud Functions...
[debug] [2020-04-07T20:25:12.559Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:25:12.559Z] [worker-pool] Adding worker with key ~diagnostic~, total=1 
[debug] [2020-04-07T20:25:12.559Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:25:12.560Z] [worker-~diagnostic~-73b84ae2-c8ac-496c-a7ca-63c180260c2b]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57465.sock 
[debug] [2020-04-07T20:25:12.560Z] [worker-~diagnostic~-73b84ae2-c8ac-496c-a7ca-63c180260c2b]: BUSY 
[debug] [2020-04-07T20:25:12.839Z] [runtime-status] [57465] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:25:12.840Z] [runtime-status] [57465] Disabled runtime features: undefined 
[debug] [2020-04-07T20:25:12.842Z] [runtime-status] [57465] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:25:12.843Z] [runtime-status] [57465] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:25:12.846Z] [runtime-status] [57465] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:25:12.874Z] [runtime-status] [57465] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:25:12.875Z] [runtime-status] [57465] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:25:12.875Z] [runtime-status] [57465] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:25:12.876Z] [runtime-status] [57465] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:25:12.876Z] [runtime-status] [57465] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:25:13.082Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/users/{userId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.083Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenUserIsCreated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/users/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.084Z] [worker-~diagnostic~-73b84ae2-c8ac-496c-a7ca-63c180260c2b]: IDLE 
[debug] [2020-04-07T20:25:13.121Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.249Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:25:13.857Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[debug] [2020-04-07T20:25:13.857Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/users/{userId}/privilegedInformation/{informationId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.858Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenUserPrivilegedInformationIsCreated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/users/{userId}/privilegedInformation/{informationId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.868Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.877Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[debug] [2020-04-07T20:25:13.877Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/requests/{requestId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.877Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenRequestIsCreated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/requests/{requestId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.888Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.894Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[debug] [2020-04-07T20:25:13.894Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/requests/{requestId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.894Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenRequestIsUpdated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/requests/{requestId}","eventType":"providers/cloud.firestore/eventTypes/document.update","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.905Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.910Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[debug] [2020-04-07T20:25:13.910Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/offers/{offerId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.911Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenOfferIsCreated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/offers/{offerId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.921Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.926Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[debug] [2020-04-07T20:25:13.926Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/offers/{offerId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.926Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenOfferIsUpdated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/offers/{offerId}","eventType":"providers/cloud.firestore/eventTypes/document.update","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.936Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.942Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[debug] [2020-04-07T20:25:13.942Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/reach4help-dev/databases/(default)/documents/requests/{requestId}/privilegedInformation/{informationId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-07T20:25:13.942Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev/triggers/triggerEventsWhenRequestPrivilegedInformationIsCreated  
 {"eventTrigger":{"resource":"projects/reach4help-dev/databases/(default)/documents/requests/{requestId}/privilegedInformation/{informationId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2020-04-07T20:25:13.952Z] Apr 07, 2020 1:25:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:25:13.957Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  functions[triggerEventsWhenUserIsCreated]: firestore function initialized.
[info] ✔  functions[triggerEventsWhenUserPrivilegedInformationIsCreated]: firestore function initialized.
[info] ✔  functions[triggerEventsWhenRequestIsCreated]: firestore function initialized.
[info] ✔  functions[triggerEventsWhenRequestIsUpdated]: firestore function initialized.
[info] ✔  functions[triggerEventsWhenOfferIsCreated]: firestore function initialized.
[info] ✔  functions[triggerEventsWhenOfferIsUpdated]: firestore function initialized.
[info] ✔  functions[triggerEventsWhenRequestPrivilegedInformationIsCreated]: firestore function initialized.
[info] ✔  emulators: All emulators started, it is now safe to connect.
[debug] [2020-04-07T20:28:38.881Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:28:39.888Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:28:39.889Z] [worker-~diagnostic~-73b84ae2-c8ac-496c-a7ca-63c180260c2b]: FINISHING 
[debug] [2020-04-07T20:28:39.897Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:28:39.898Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:28:39.898Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:28:39.898Z] [worker-~diagnostic~-c1ef1dae-df50-4b46-b7aa-b98d355933f0]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57497.sock 
[debug] [2020-04-07T20:28:39.899Z] [worker-~diagnostic~-c1ef1dae-df50-4b46-b7aa-b98d355933f0]: BUSY 
[debug] [2020-04-07T20:28:39.901Z] [worker-~diagnostic~-73b84ae2-c8ac-496c-a7ca-63c180260c2b]: exited 
[debug] [2020-04-07T20:28:39.902Z] [worker-~diagnostic~-73b84ae2-c8ac-496c-a7ca-63c180260c2b]: FINISHED 
[debug] [2020-04-07T20:28:40.417Z] [runtime-status] [57497] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:28:40.419Z] [runtime-status] [57497] Disabled runtime features: undefined 
[debug] [2020-04-07T20:28:40.422Z] [runtime-status] [57497] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:28:40.424Z] [runtime-status] [57497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:28:40.428Z] [runtime-status] [57497] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:28:40.483Z] [runtime-status] [57497] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:28:40.484Z] [runtime-status] [57497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:28:40.484Z] [runtime-status] [57497] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:28:40.485Z] [runtime-status] [57497] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:28:40.485Z] [runtime-status] [57497] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:28:40.923Z] [worker-~diagnostic~-c1ef1dae-df50-4b46-b7aa-b98d355933f0]: IDLE 
[debug] [2020-04-07T20:28:51.010Z] Apr 07, 2020 1:28:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:28:51.231Z] Apr 07, 2020 1:28:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:28:51.763Z] Apr 07, 2020 1:28:51 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L50, Property averageRating is undefined on object. for 'create' @ L51, Null value error. for 'create' @ L90

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:29:26.270Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n  return\n    request.resource.data.averageRating != null &&\n    request.resource.data.averageRating != undefined &&\n    request.resource.data.casesCompleted != null &&\n    request.resource.data.casesCompleted != undefined &&\n    request.resource.data.requestsMade != null &&\n    request.resource.data.requestsMade != undefined &&\n    request.resource.data.username != null &&\n    request.resource.data.username != undefined\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n      allow create: if verifyUserDataComplete(request) && isUser(userID);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:29:26.285Z] Apr 07, 2020 1:29:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:29:26.393Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"1243"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:34:44 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:36:45 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:38:43 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:40:39 - WARNING Invalid variable name: undefined.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:29:33.498Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n  return\n    request.resource.data.averageRating != null &&\n    request.resource.data.averageRating != undefined &&\n    request.resource.data.casesCompleted != null &&\n    request.resource.data.casesCompleted != undefined &&\n    request.resource.data.requestsMade != null &&\n    request.resource.data.requestsMade != undefined &&\n    request.resource.data.username != null &&\n    request.resource.data.username != undefined\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:29:33.510Z] Apr 07, 2020 1:29:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:29:33.564Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"1243"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:34:44 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:36:45 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:38:43 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:40:39 - WARNING Invalid variable name: undefined.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:29:42.837Z] Apr 07, 2020 1:29:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:29:42.892Z] Apr 07, 2020 1:29:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:42:32.008Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:42:32.010Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n  return\n    request.resource.data.averageRating != null &&\n    request.resource.data.averageRating != undefined &&\n    request.resource.data.casesCompleted != null &&\n    request.resource.data.casesCompleted != undefined &&\n    request.resource.data.requestsMade != null &&\n    request.resource.data.requestsMade != undefined &&\n    request.resource.data.username != null &&\n    request.resource.data.username != undefined\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:42:32.025Z] Apr 07, 2020 1:42:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:42:32.075Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"1243"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:34:44 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:36:45 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:38:43 - WARNING Invalid variable name: undefined.
[warn] ⚠  ../firebase/firestore.rules:40:39 - WARNING Invalid variable name: undefined.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:42:33.009Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:42:33.009Z] [worker-~diagnostic~-c1ef1dae-df50-4b46-b7aa-b98d355933f0]: FINISHING 
[debug] [2020-04-07T20:42:33.010Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:42:33.014Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:42:33.014Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:42:33.014Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:42:33.016Z] [worker-~diagnostic~-9a4ef255-e8db-431d-866b-a4665741cf49]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57592.sock 
[debug] [2020-04-07T20:42:33.016Z] [worker-~diagnostic~-9a4ef255-e8db-431d-866b-a4665741cf49]: BUSY 
[debug] [2020-04-07T20:42:33.017Z] [worker-~diagnostic~-c1ef1dae-df50-4b46-b7aa-b98d355933f0]: exited 
[debug] [2020-04-07T20:42:33.017Z] [worker-~diagnostic~-c1ef1dae-df50-4b46-b7aa-b98d355933f0]: FINISHED 
[debug] [2020-04-07T20:42:33.508Z] [runtime-status] [57592] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:42:33.511Z] [runtime-status] [57592] Disabled runtime features: undefined 
[debug] [2020-04-07T20:42:33.512Z] [runtime-status] [57592] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:42:33.513Z] [runtime-status] [57592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:42:33.517Z] [runtime-status] [57592] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:42:33.577Z] [runtime-status] [57592] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:42:33.577Z] [runtime-status] [57592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:42:33.577Z] [runtime-status] [57592] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:42:33.577Z] [runtime-status] [57592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:42:33.578Z] [runtime-status] [57592] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:42:34.049Z] [worker-~diagnostic~-9a4ef255-e8db-431d-866b-a4665741cf49]: IDLE 
[debug] [2020-04-07T20:43:05.281Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:43:06.282Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:43:06.283Z] [worker-~diagnostic~-9a4ef255-e8db-431d-866b-a4665741cf49]: FINISHING 
[debug] [2020-04-07T20:43:06.283Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:43:06.287Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:43:06.287Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:43:06.287Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:43:06.287Z] [worker-~diagnostic~-e3913262-0121-465f-b5a0-d9a54c7fc7cf]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57597.sock 
[debug] [2020-04-07T20:43:06.288Z] [worker-~diagnostic~-e3913262-0121-465f-b5a0-d9a54c7fc7cf]: BUSY 
[debug] [2020-04-07T20:43:06.289Z] [worker-~diagnostic~-9a4ef255-e8db-431d-866b-a4665741cf49]: exited 
[debug] [2020-04-07T20:43:06.289Z] [worker-~diagnostic~-9a4ef255-e8db-431d-866b-a4665741cf49]: FINISHED 
[debug] [2020-04-07T20:43:06.575Z] [runtime-status] [57597] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:43:06.577Z] [runtime-status] [57597] Disabled runtime features: undefined 
[debug] [2020-04-07T20:43:06.579Z] [runtime-status] [57597] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:06.581Z] [runtime-status] [57597] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:06.584Z] [runtime-status] [57597] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:43:06.618Z] [runtime-status] [57597] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:43:06.619Z] [runtime-status] [57597] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:06.620Z] [runtime-status] [57597] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:06.620Z] [runtime-status] [57597] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:06.620Z] [runtime-status] [57597] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:43:06.828Z] [worker-~diagnostic~-e3913262-0121-465f-b5a0-d9a54c7fc7cf]: IDLE 
[debug] [2020-04-07T20:43:12.062Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:43:13.063Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:43:13.063Z] [worker-~diagnostic~-e3913262-0121-465f-b5a0-d9a54c7fc7cf]: FINISHING 
[debug] [2020-04-07T20:43:13.063Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:43:13.066Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:43:13.066Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:43:13.067Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:43:13.067Z] [worker-~diagnostic~-a52231aa-9d5c-4767-b17b-7fc2cbf0f37e]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57600.sock 
[debug] [2020-04-07T20:43:13.067Z] [worker-~diagnostic~-a52231aa-9d5c-4767-b17b-7fc2cbf0f37e]: BUSY 
[debug] [2020-04-07T20:43:13.068Z] [worker-~diagnostic~-e3913262-0121-465f-b5a0-d9a54c7fc7cf]: exited 
[debug] [2020-04-07T20:43:13.068Z] [worker-~diagnostic~-e3913262-0121-465f-b5a0-d9a54c7fc7cf]: FINISHED 
[debug] [2020-04-07T20:43:13.327Z] [runtime-status] [57600] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:43:13.329Z] [runtime-status] [57600] Disabled runtime features: undefined 
[debug] [2020-04-07T20:43:13.331Z] [runtime-status] [57600] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:13.332Z] [runtime-status] [57600] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:13.336Z] [runtime-status] [57600] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:43:13.369Z] [runtime-status] [57600] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:43:13.378Z] [runtime-status] [57600] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:13.379Z] [runtime-status] [57600] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:13.379Z] [runtime-status] [57600] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:13.379Z] [runtime-status] [57600] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:43:13.589Z] [worker-~diagnostic~-a52231aa-9d5c-4767-b17b-7fc2cbf0f37e]: IDLE 
[debug] [2020-04-07T20:43:37.620Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:43:38.621Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:43:38.621Z] [worker-~diagnostic~-a52231aa-9d5c-4767-b17b-7fc2cbf0f37e]: FINISHING 
[debug] [2020-04-07T20:43:38.622Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:43:38.625Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:43:38.625Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:43:38.625Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:43:38.626Z] [worker-~diagnostic~-a0734c69-cb2b-4fa8-8b4e-44b93f1ef50f]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57604.sock 
[debug] [2020-04-07T20:43:38.626Z] [worker-~diagnostic~-a0734c69-cb2b-4fa8-8b4e-44b93f1ef50f]: BUSY 
[debug] [2020-04-07T20:43:38.627Z] [worker-~diagnostic~-a52231aa-9d5c-4767-b17b-7fc2cbf0f37e]: exited 
[debug] [2020-04-07T20:43:38.627Z] [worker-~diagnostic~-a52231aa-9d5c-4767-b17b-7fc2cbf0f37e]: FINISHED 
[debug] [2020-04-07T20:43:38.920Z] [runtime-status] [57604] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:43:38.922Z] [runtime-status] [57604] Disabled runtime features: undefined 
[debug] [2020-04-07T20:43:38.924Z] [runtime-status] [57604] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:38.924Z] [runtime-status] [57604] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:38.927Z] [runtime-status] [57604] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:43:38.955Z] [runtime-status] [57604] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:43:38.955Z] [runtime-status] [57604] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:38.957Z] [runtime-status] [57604] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:38.957Z] [runtime-status] [57604] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:38.957Z] [runtime-status] [57604] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:43:39.174Z] [worker-~diagnostic~-a0734c69-cb2b-4fa8-8b4e-44b93f1ef50f]: IDLE 
[debug] [2020-04-07T20:43:49.340Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:43:50.341Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:43:50.342Z] [worker-~diagnostic~-a0734c69-cb2b-4fa8-8b4e-44b93f1ef50f]: FINISHING 
[debug] [2020-04-07T20:43:50.342Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:43:50.344Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:43:50.344Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:43:50.344Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:43:50.344Z] [worker-~diagnostic~-d4364639-27cd-41d9-88e6-30b374ca6718]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57610.sock 
[debug] [2020-04-07T20:43:50.344Z] [worker-~diagnostic~-d4364639-27cd-41d9-88e6-30b374ca6718]: BUSY 
[debug] [2020-04-07T20:43:50.346Z] [worker-~diagnostic~-a0734c69-cb2b-4fa8-8b4e-44b93f1ef50f]: exited 
[debug] [2020-04-07T20:43:50.346Z] [worker-~diagnostic~-a0734c69-cb2b-4fa8-8b4e-44b93f1ef50f]: FINISHED 
[debug] [2020-04-07T20:43:50.584Z] [runtime-status] [57610] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:43:50.586Z] [runtime-status] [57610] Disabled runtime features: undefined 
[debug] [2020-04-07T20:43:50.589Z] [runtime-status] [57610] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:50.589Z] [runtime-status] [57610] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:50.592Z] [runtime-status] [57610] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:43:50.619Z] [runtime-status] [57610] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:43:50.619Z] [runtime-status] [57610] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:50.620Z] [runtime-status] [57610] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:43:50.620Z] [runtime-status] [57610] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:43:50.621Z] [runtime-status] [57610] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:43:50.813Z] [worker-~diagnostic~-d4364639-27cd-41d9-88e6-30b374ca6718]: IDLE 
[debug] [2020-04-07T20:44:43.520Z] Apr 07, 2020 1:44:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:44:43.574Z] Apr 07, 2020 1:44:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:44:51.535Z] Apr 07, 2020 1:44:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:44:51.583Z] Apr 07, 2020 1:44:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:44:51.752Z] Apr 07, 2020 1:44:51 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L50, Null value error. for 'create' @ L89

[debug] [2020-04-07T20:45:23.097Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:45:24.097Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:45:24.097Z] [worker-~diagnostic~-d4364639-27cd-41d9-88e6-30b374ca6718]: FINISHING 
[debug] [2020-04-07T20:45:24.097Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:45:24.101Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:45:24.101Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:45:24.101Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:45:24.102Z] [worker-~diagnostic~-2af8e9e6-b810-4b0c-8cfa-a5045f65d4f2]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57632.sock 
[debug] [2020-04-07T20:45:24.102Z] [worker-~diagnostic~-2af8e9e6-b810-4b0c-8cfa-a5045f65d4f2]: BUSY 
[debug] [2020-04-07T20:45:24.104Z] [worker-~diagnostic~-d4364639-27cd-41d9-88e6-30b374ca6718]: exited 
[debug] [2020-04-07T20:45:24.104Z] [worker-~diagnostic~-d4364639-27cd-41d9-88e6-30b374ca6718]: FINISHED 
[debug] [2020-04-07T20:45:24.366Z] [runtime-status] [57632] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:45:24.368Z] [runtime-status] [57632] Disabled runtime features: undefined 
[debug] [2020-04-07T20:45:24.370Z] [runtime-status] [57632] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:45:24.370Z] [runtime-status] [57632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:24.373Z] [runtime-status] [57632] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:45:24.406Z] [runtime-status] [57632] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:45:24.406Z] [runtime-status] [57632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:24.407Z] [runtime-status] [57632] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:45:24.407Z] [runtime-status] [57632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:24.407Z] [runtime-status] [57632] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:45:24.664Z] [worker-~diagnostic~-2af8e9e6-b810-4b0c-8cfa-a5045f65d4f2]: IDLE 
[debug] [2020-04-07T20:45:28.300Z] Apr 07, 2020 1:45:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:45:28.346Z] Apr 07, 2020 1:45:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:45:28.533Z] Apr 07, 2020 1:45:28 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L50, Null value error. for 'create' @ L89

[debug] [2020-04-07T20:45:46.527Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/package.json changed, reloading triggers 
[debug] [2020-04-07T20:45:47.529Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:45:47.530Z] [worker-~diagnostic~-2af8e9e6-b810-4b0c-8cfa-a5045f65d4f2]: FINISHING 
[debug] [2020-04-07T20:45:47.530Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:45:47.533Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:45:47.533Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:45:47.533Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:45:47.533Z] [worker-~diagnostic~-39321f2d-45e7-4a25-8e60-a3250a7d7e14]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57649.sock 
[debug] [2020-04-07T20:45:47.533Z] [worker-~diagnostic~-39321f2d-45e7-4a25-8e60-a3250a7d7e14]: BUSY 
[debug] [2020-04-07T20:45:47.537Z] [worker-~diagnostic~-2af8e9e6-b810-4b0c-8cfa-a5045f65d4f2]: exited 
[debug] [2020-04-07T20:45:47.538Z] [worker-~diagnostic~-2af8e9e6-b810-4b0c-8cfa-a5045f65d4f2]: FINISHED 
[debug] [2020-04-07T20:45:47.584Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/package.json changed, reloading triggers 
[debug] [2020-04-07T20:45:47.914Z] [runtime-status] [57649] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:45:47.915Z] [runtime-status] [57649] Disabled runtime features: undefined 
[debug] [2020-04-07T20:45:47.918Z] [runtime-status] [57649] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:45:47.919Z] [runtime-status] [57649] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:47.924Z] [runtime-status] [57649] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:45:47.970Z] [runtime-status] [57649] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:45:47.971Z] [runtime-status] [57649] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:47.972Z] [runtime-status] [57649] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:45:47.973Z] [runtime-status] [57649] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:47.973Z] [runtime-status] [57649] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:45:48.265Z] [worker-~diagnostic~-39321f2d-45e7-4a25-8e60-a3250a7d7e14]: IDLE 
[debug] [2020-04-07T20:45:48.584Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:45:48.585Z] [worker-~diagnostic~-39321f2d-45e7-4a25-8e60-a3250a7d7e14]: FINISHING 
[debug] [2020-04-07T20:45:48.585Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:45:48.588Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:45:48.588Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:45:48.588Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:45:48.588Z] [worker-~diagnostic~-ad66e66b-5d77-488a-8e73-927ae7045b40]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57654.sock 
[debug] [2020-04-07T20:45:48.588Z] [worker-~diagnostic~-ad66e66b-5d77-488a-8e73-927ae7045b40]: BUSY 
[debug] [2020-04-07T20:45:48.590Z] [worker-~diagnostic~-39321f2d-45e7-4a25-8e60-a3250a7d7e14]: exited 
[debug] [2020-04-07T20:45:48.590Z] [worker-~diagnostic~-39321f2d-45e7-4a25-8e60-a3250a7d7e14]: FINISHED 
[debug] [2020-04-07T20:45:48.920Z] [runtime-status] [57654] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:45:48.922Z] [runtime-status] [57654] Disabled runtime features: undefined 
[debug] [2020-04-07T20:45:48.925Z] [runtime-status] [57654] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:45:48.926Z] [runtime-status] [57654] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:48.930Z] [runtime-status] [57654] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:45:48.967Z] [runtime-status] [57654] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:45:48.968Z] [runtime-status] [57654] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:48.968Z] [runtime-status] [57654] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:45:48.969Z] [runtime-status] [57654] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:45:48.969Z] [runtime-status] [57654] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:45:49.223Z] [worker-~diagnostic~-ad66e66b-5d77-488a-8e73-927ae7045b40]: IDLE 
[debug] [2020-04-07T20:46:02.589Z] Apr 07, 2020 1:46:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:46:02.642Z] Apr 07, 2020 1:46:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:46:02.842Z] Apr 07, 2020 1:46:02 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L50, Null value error. for 'create' @ L89

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:47:10.892Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n  return\n    \n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:47:10.905Z] Apr 07, 2020 1:47:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:47:10.964Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"431"}
[warn] ⚠  ../firebase/firestore.rules:34:1 - ERROR mismatched input '}' expecting {'--', '++', '{', '[', '(', '-', '!', '/', 'false', 'null', 'true', PATH_SEGMENT, IDENTIFIER, NUM_INT, NUM_FLOAT, UNPAIRED_DOUBLE_QUOTE, UNPAIRED_SINGLE_QUOTE, STRING, BYTES}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:48:39.184Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n  return\n    resource.data.keys().hasAll(['averageRating', 'casesCompleted', 'requestsMade', 'username'])\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:48:39.186Z] Apr 07, 2020 1:48:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:48:39.250Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"497"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:31:33 - WARNING Unused variable: request.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:48:47.553Z] Apr 07, 2020 1:48:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:48:47.597Z] Apr 07, 2020 1:48:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:48:47.795Z] Apr 07, 2020 1:48:47 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L43, Null value error. for 'create' @ L82

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:50:33.512Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n  return\n    request.resource.data.averageRating > 1 &&\n    request.resource.data.casesCompleted > 0 &&\n    request.resource.data.requestsMade > 0 &&\n    request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:50:33.525Z] Apr 07, 2020 1:50:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:50:33.562Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:50:43.688Z] Apr 07, 2020 1:50:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:50:43.722Z] Apr 07, 2020 1:50:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:50:43.923Z] Apr 07, 2020 1:50:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L46, Null value error. for 'create' @ L85

[debug] [2020-04-07T20:50:58.884Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:50:59.886Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:50:59.886Z] [worker-~diagnostic~-ad66e66b-5d77-488a-8e73-927ae7045b40]: FINISHING 
[debug] [2020-04-07T20:50:59.886Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:50:59.891Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:50:59.891Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:50:59.891Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:50:59.891Z] [worker-~diagnostic~-c31b29c3-ff61-4b7c-9b81-c6140bfe43dd]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57713.sock 
[debug] [2020-04-07T20:50:59.891Z] [worker-~diagnostic~-c31b29c3-ff61-4b7c-9b81-c6140bfe43dd]: BUSY 
[debug] [2020-04-07T20:50:59.894Z] [worker-~diagnostic~-ad66e66b-5d77-488a-8e73-927ae7045b40]: exited 
[debug] [2020-04-07T20:50:59.894Z] [worker-~diagnostic~-ad66e66b-5d77-488a-8e73-927ae7045b40]: FINISHED 
[debug] [2020-04-07T20:51:00.404Z] [runtime-status] [57713] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:51:00.405Z] [runtime-status] [57713] Disabled runtime features: undefined 
[debug] [2020-04-07T20:51:00.407Z] [runtime-status] [57713] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:51:00.409Z] [runtime-status] [57713] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:00.411Z] [runtime-status] [57713] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:51:00.463Z] [runtime-status] [57713] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:51:00.464Z] [runtime-status] [57713] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:00.464Z] [runtime-status] [57713] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:51:00.465Z] [runtime-status] [57713] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:00.465Z] [runtime-status] [57713] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:51:00.804Z] [worker-~diagnostic~-c31b29c3-ff61-4b7c-9b81-c6140bfe43dd]: IDLE 
[debug] [2020-04-07T20:51:04.199Z] Apr 07, 2020 1:51:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:51:04.229Z] Apr 07, 2020 1:51:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:51:04.412Z] Apr 07, 2020 1:51:04 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L46, Null value error. for 'create' @ L85

[debug] [2020-04-07T20:51:06.806Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:51:07.810Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:51:07.810Z] [worker-~diagnostic~-c31b29c3-ff61-4b7c-9b81-c6140bfe43dd]: FINISHING 
[debug] [2020-04-07T20:51:07.810Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:51:07.814Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:51:07.814Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:51:07.814Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:51:07.815Z] [worker-~diagnostic~-d45767c5-a4ba-4b35-8609-bde80617a117]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57729.sock 
[debug] [2020-04-07T20:51:07.815Z] [worker-~diagnostic~-d45767c5-a4ba-4b35-8609-bde80617a117]: BUSY 
[debug] [2020-04-07T20:51:07.817Z] [worker-~diagnostic~-c31b29c3-ff61-4b7c-9b81-c6140bfe43dd]: exited 
[debug] [2020-04-07T20:51:07.817Z] [worker-~diagnostic~-c31b29c3-ff61-4b7c-9b81-c6140bfe43dd]: FINISHED 
[debug] [2020-04-07T20:51:08.114Z] [runtime-status] [57729] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:51:08.116Z] [runtime-status] [57729] Disabled runtime features: undefined 
[debug] [2020-04-07T20:51:08.119Z] [runtime-status] [57729] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:51:08.119Z] [runtime-status] [57729] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:08.123Z] [runtime-status] [57729] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:51:08.160Z] [runtime-status] [57729] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:51:08.160Z] [runtime-status] [57729] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:08.161Z] [runtime-status] [57729] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:51:08.161Z] [runtime-status] [57729] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:08.161Z] [runtime-status] [57729] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:51:08.367Z] [worker-~diagnostic~-d45767c5-a4ba-4b35-8609-bde80617a117]: IDLE 
[debug] [2020-04-07T20:51:09.487Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:51:10.488Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:51:10.488Z] [worker-~diagnostic~-d45767c5-a4ba-4b35-8609-bde80617a117]: FINISHING 
[debug] [2020-04-07T20:51:10.488Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:51:10.491Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:51:10.492Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:51:10.492Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:51:10.492Z] [worker-~diagnostic~-75c2970b-49e9-4490-9217-1f2c8becf873]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57732.sock 
[debug] [2020-04-07T20:51:10.492Z] [worker-~diagnostic~-75c2970b-49e9-4490-9217-1f2c8becf873]: BUSY 
[debug] [2020-04-07T20:51:10.494Z] [worker-~diagnostic~-d45767c5-a4ba-4b35-8609-bde80617a117]: exited 
[debug] [2020-04-07T20:51:10.494Z] [worker-~diagnostic~-d45767c5-a4ba-4b35-8609-bde80617a117]: FINISHED 
[debug] [2020-04-07T20:51:10.745Z] [runtime-status] [57732] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:51:10.746Z] [runtime-status] [57732] Disabled runtime features: undefined 
[debug] [2020-04-07T20:51:10.748Z] [runtime-status] [57732] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:51:10.749Z] [runtime-status] [57732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:10.753Z] [runtime-status] [57732] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:51:10.779Z] [runtime-status] [57732] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:51:10.779Z] [runtime-status] [57732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:10.780Z] [runtime-status] [57732] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:51:10.780Z] [runtime-status] [57732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:51:10.780Z] [runtime-status] [57732] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:51:10.998Z] [worker-~diagnostic~-75c2970b-49e9-4490-9217-1f2c8becf873]: IDLE 
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:51:18.669Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n    return false\n  return\n    request.resource.data.averageRating > 1 &&\n    request.resource.data.casesCompleted > 0 &&\n    request.resource.data.requestsMade > 0 &&\n    request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:51:18.672Z] Apr 07, 2020 1:51:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:51:18.691Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"370"}
[warn] ⚠  ../firebase/firestore.rules:33:3 - ERROR mismatched input 'return' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:51:24.281Z] Apr 07, 2020 1:51:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:51:24.297Z] Apr 07, 2020 1:51:24 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: Error compiling rules:
L33:3 mismatched input 'return' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}

[debug] [2020-04-07T20:51:24.304Z] Apr 07, 2020 1:51:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:51:24.483Z] Apr 07, 2020 1:51:24 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L46, Null value error. for 'create' @ L85

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:51:33.966Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n    return false\n\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:51:33.969Z] Apr 07, 2020 1:51:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:51:33.993Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"497"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:31:33 - WARNING Unused variable: request.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:51:37.038Z] Apr 07, 2020 1:51:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:51:37.074Z] Apr 07, 2020 1:51:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:51:37.255Z] Apr 07, 2020 1:51:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L43, Null value error. for 'create' @ L82

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:52:10.493Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n    return false\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:52:10.493Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/index.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:52:10.495Z] Apr 07, 2020 1:52:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:52:10.534Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"497"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:31:33 - WARNING Unused variable: request.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:52:11.495Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:52:11.495Z] [worker-~diagnostic~-75c2970b-49e9-4490-9217-1f2c8becf873]: FINISHING 
[debug] [2020-04-07T20:52:11.496Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:52:11.500Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:52:11.500Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:52:11.500Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:52:11.500Z] [worker-~diagnostic~-b97a4d65-836e-49f9-9c93-c0da8a7118c2]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57760.sock 
[debug] [2020-04-07T20:52:11.500Z] [worker-~diagnostic~-b97a4d65-836e-49f9-9c93-c0da8a7118c2]: BUSY 
[debug] [2020-04-07T20:52:11.502Z] [worker-~diagnostic~-75c2970b-49e9-4490-9217-1f2c8becf873]: exited 
[debug] [2020-04-07T20:52:11.502Z] [worker-~diagnostic~-75c2970b-49e9-4490-9217-1f2c8becf873]: FINISHED 
[debug] [2020-04-07T20:52:11.990Z] [runtime-status] [57760] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:52:11.992Z] [runtime-status] [57760] Disabled runtime features: undefined 
[debug] [2020-04-07T20:52:11.995Z] [runtime-status] [57760] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:52:11.996Z] [runtime-status] [57760] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:52:12.000Z] [runtime-status] [57760] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:52:12.046Z] [runtime-status] [57760] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:52:12.046Z] [runtime-status] [57760] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:52:12.047Z] [runtime-status] [57760] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:52:12.048Z] [runtime-status] [57760] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:52:12.048Z] [runtime-status] [57760] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:52:12.406Z] [worker-~diagnostic~-b97a4d65-836e-49f9-9c93-c0da8a7118c2]: IDLE 
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:52:57.303Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return false\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:52:57.304Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:52:57.306Z] Apr 07, 2020 1:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:52:57.349Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"497"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:31:33 - WARNING Unused variable: request.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:52:58.305Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:52:58.305Z] [worker-~diagnostic~-b97a4d65-836e-49f9-9c93-c0da8a7118c2]: FINISHING 
[debug] [2020-04-07T20:52:58.305Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:52:58.310Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:52:58.310Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:52:58.310Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:52:58.310Z] [worker-~diagnostic~-cfe0c66b-4034-40c8-a7d7-ce3881ef8ac2]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57767.sock 
[debug] [2020-04-07T20:52:58.310Z] [worker-~diagnostic~-cfe0c66b-4034-40c8-a7d7-ce3881ef8ac2]: BUSY 
[debug] [2020-04-07T20:52:58.314Z] [worker-~diagnostic~-b97a4d65-836e-49f9-9c93-c0da8a7118c2]: exited 
[debug] [2020-04-07T20:52:58.314Z] [worker-~diagnostic~-b97a4d65-836e-49f9-9c93-c0da8a7118c2]: FINISHED 
[debug] [2020-04-07T20:52:58.816Z] [runtime-status] [57767] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:52:58.818Z] [runtime-status] [57767] Disabled runtime features: undefined 
[debug] [2020-04-07T20:52:58.821Z] [runtime-status] [57767] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:52:58.821Z] [runtime-status] [57767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:52:58.825Z] [runtime-status] [57767] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:52:58.875Z] [runtime-status] [57767] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:52:58.876Z] [runtime-status] [57767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:52:58.877Z] [runtime-status] [57767] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:52:58.877Z] [runtime-status] [57767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:52:58.877Z] [runtime-status] [57767] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:52:59.309Z] [worker-~diagnostic~-cfe0c66b-4034-40c8-a7d7-ce3881ef8ac2]: IDLE 
[debug] [2020-04-07T20:53:07.793Z] Apr 07, 2020 1:53:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:53:07.836Z] Apr 07, 2020 1:53:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:53:08.024Z] Apr 07, 2020 1:53:08 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Null value error. for 'create' @ L81

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:53:45.708Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return false\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:53:45.710Z] Apr 07, 2020 1:53:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:53:45.772Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"497"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:31:33 - WARNING Unused variable: request.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:53:52.030Z] Apr 07, 2020 1:53:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:53:52.055Z] Apr 07, 2020 1:53:52 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:53:52.239Z] Apr 07, 2020 1:53:52 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Null value error. for 'create' @ L81

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:56:07.183Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return false\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Only authorized Reads\n    match /{document=**} {\n      allow read, write: if isAuthenticated();\n    }\n    \n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:56:07.186Z] Apr 07, 2020 1:56:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:56:07.212Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"497"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:31:33 - WARNING Unused variable: request.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:56:27.862Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return false\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:56:27.865Z] Apr 07, 2020 1:56:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:56:27.882Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"270"}
[warn] ⚠  ../firebase/firestore.rules:39:26 - ERROR Missing 'if' before conditional expression.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:56:45.357Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/index.test.ts changed, reloading triggers 
[debug] [2020-04-07T20:56:46.359Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T20:56:46.359Z] [worker-~diagnostic~-cfe0c66b-4034-40c8-a7d7-ce3881ef8ac2]: FINISHING 
[debug] [2020-04-07T20:56:46.359Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T20:56:46.362Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T20:56:46.362Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T20:56:46.363Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T20:56:46.363Z] [worker-~diagnostic~-b1d20b78-c98d-440a-87d5-286f957c1964]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_57817.sock 
[debug] [2020-04-07T20:56:46.363Z] [worker-~diagnostic~-b1d20b78-c98d-440a-87d5-286f957c1964]: BUSY 
[debug] [2020-04-07T20:56:46.365Z] [worker-~diagnostic~-cfe0c66b-4034-40c8-a7d7-ce3881ef8ac2]: exited 
[debug] [2020-04-07T20:56:46.365Z] [worker-~diagnostic~-cfe0c66b-4034-40c8-a7d7-ce3881ef8ac2]: FINISHED 
[debug] [2020-04-07T20:56:46.771Z] [runtime-status] [57817] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T20:56:46.773Z] [runtime-status] [57817] Disabled runtime features: undefined 
[debug] [2020-04-07T20:56:46.775Z] [runtime-status] [57817] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:56:46.776Z] [runtime-status] [57817] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:56:46.779Z] [runtime-status] [57817] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T20:56:46.821Z] [runtime-status] [57817] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T20:56:46.822Z] [runtime-status] [57817] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:56:46.823Z] [runtime-status] [57817] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T20:56:46.823Z] [runtime-status] [57817] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T20:56:46.823Z] [runtime-status] [57817] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T20:56:47.172Z] [worker-~diagnostic~-b1d20b78-c98d-440a-87d5-286f957c1964]: IDLE 
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:57:01.386Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating > 1 &&\n          request.resource.data.casesCompleted > 0 &&\n          request.resource.data.requestsMade > 0 &&\n          request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:57:01.389Z] Apr 07, 2020 1:57:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:57:01.406Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"272"}
[warn] ⚠  ../firebase/firestore.rules:42:26 - ERROR Missing 'if' before conditional expression.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:57:08.849Z] Apr 07, 2020 1:57:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:57:08.874Z] Apr 07, 2020 1:57:08 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: Error compiling rules:
L42:26 Missing 'if' before conditional expression.

[debug] [2020-04-07T20:57:08.881Z] Apr 07, 2020 1:57:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:57:09.089Z] Apr 07, 2020 1:57:09 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Null value error. for 'create' @ L81

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:57:30.671Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating > 1 &&\n          request.resource.data.casesCompleted > 0 &&\n          request.resource.data.requestsMade > 0 &&\n          request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:57:30.673Z] Apr 07, 2020 1:57:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:57:30.703Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:59:04.088Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating > 1 &&\n          request.resource.data.casesCompleted > 0 &&\n          request.resource.data.requestsMade > 0 &&\n          request.resource.data.username.length > 0\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:59:04.091Z] Apr 07, 2020 1:59:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:59:04.120Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T20:59:12.149Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating > 1 &&\n          request.resource.data.casesCompleted > 0 &&\n          request.resource.data.requestsMade > 0 &&\n          request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow create, write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T20:59:12.151Z] Apr 07, 2020 1:59:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T20:59:12.175Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T20:59:36.339Z] Apr 07, 2020 1:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:59:36.369Z] Apr 07, 2020 1:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T20:59:36.587Z] Apr 07, 2020 1:59:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T20:59:36.639Z] Apr 07, 2020 1:59:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T20:59:36.695Z] Apr 07, 2020 1:59:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Property averageRating is undefined on object. for 'create' @ L49

[debug] [2020-04-07T20:59:36.702Z] Apr 07, 2020 1:59:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:00:00.774Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating > 1 &&\n          request.resource.data.casesCompleted > 0 &&\n          request.resource.data.requestsMade > 0 &&\n          request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:00:00.778Z] Apr 07, 2020 2:00:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:00:00.806Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:00:06.604Z] Apr 07, 2020 2:00:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:00:06.640Z] Apr 07, 2020 2:00:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:00:06.838Z] Apr 07, 2020 2:00:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T21:00:06.887Z] Apr 07, 2020 2:00:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T21:00:06.937Z] Apr 07, 2020 2:00:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Property averageRating is undefined on object. for 'create' @ L49

[debug] [2020-04-07T21:00:06.944Z] Apr 07, 2020 2:00:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:01:33.700Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          request.resource.data.username\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:01:33.704Z] Apr 07, 2020 2:01:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:01:33.751Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:01:38.778Z] Apr 07, 2020 2:01:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:01:38.817Z] Apr 07, 2020 2:01:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:01:38.992Z] Apr 07, 2020 2:01:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Null value error. for 'create' @ L49

[debug] [2020-04-07T21:01:39.042Z] Apr 07, 2020 2:01:39 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T21:01:39.083Z] Apr 07, 2020 2:01:39 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Property averageRating is undefined on object. for 'create' @ L49

[debug] [2020-04-07T21:01:39.089Z] Apr 07, 2020 2:01:39 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Type error. Received: [string] Expected: [bool]. for 'create' @ L49

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:01:57.803Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          request.resource\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:01:57.806Z] Apr 07, 2020 2:01:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:01:57.836Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:02:34.815Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('assignee' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:02:34.817Z] Apr 07, 2020 2:02:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:02:34.847Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:02:38.026Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:02:38.033Z] Apr 07, 2020 2:02:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:02:38.056Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:02:44.295Z] Apr 07, 2020 2:02:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:02:44.320Z] Apr 07, 2020 2:02:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:02:44.502Z] Apr 07, 2020 2:02:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Null value error. for 'create' @ L49

[debug] [2020-04-07T21:02:44.544Z] Apr 07, 2020 2:02:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T21:02:44.588Z] Apr 07, 2020 2:02:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Property averageRating is undefined on object. for 'create' @ L49

[debug] [2020-04-07T21:12:54.765Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:12:55.771Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:12:55.775Z] [worker-~diagnostic~-b1d20b78-c98d-440a-87d5-286f957c1964]: FINISHING 
[debug] [2020-04-07T21:12:55.777Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:12:55.784Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:12:55.784Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:12:55.785Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:12:55.785Z] [worker-~diagnostic~-419dcb42-6d71-47d1-9ae3-ec222703ed56]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59243.sock 
[debug] [2020-04-07T21:12:55.792Z] [worker-~diagnostic~-419dcb42-6d71-47d1-9ae3-ec222703ed56]: BUSY 
[debug] [2020-04-07T21:12:55.794Z] [worker-~diagnostic~-b1d20b78-c98d-440a-87d5-286f957c1964]: exited 
[debug] [2020-04-07T21:12:55.794Z] [worker-~diagnostic~-b1d20b78-c98d-440a-87d5-286f957c1964]: FINISHED 
[debug] [2020-04-07T21:12:56.316Z] [runtime-status] [59243] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:12:56.318Z] [runtime-status] [59243] Disabled runtime features: undefined 
[debug] [2020-04-07T21:12:56.320Z] [runtime-status] [59243] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:12:56.320Z] [runtime-status] [59243] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:12:56.324Z] [runtime-status] [59243] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:12:56.373Z] [runtime-status] [59243] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:12:56.374Z] [runtime-status] [59243] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:12:56.375Z] [runtime-status] [59243] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:12:56.375Z] [runtime-status] [59243] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:12:56.375Z] [runtime-status] [59243] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:12:56.800Z] [worker-~diagnostic~-419dcb42-6d71-47d1-9ae3-ec222703ed56]: IDLE 
[debug] [2020-04-07T21:12:58.975Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:12:59.976Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:12:59.976Z] [worker-~diagnostic~-419dcb42-6d71-47d1-9ae3-ec222703ed56]: FINISHING 
[debug] [2020-04-07T21:12:59.976Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:12:59.979Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:12:59.979Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:12:59.979Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:12:59.979Z] [worker-~diagnostic~-3bb6127e-4a1b-461b-bf00-9ff56190e3e1]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59245.sock 
[debug] [2020-04-07T21:12:59.979Z] [worker-~diagnostic~-3bb6127e-4a1b-461b-bf00-9ff56190e3e1]: BUSY 
[debug] [2020-04-07T21:12:59.981Z] [worker-~diagnostic~-419dcb42-6d71-47d1-9ae3-ec222703ed56]: exited 
[debug] [2020-04-07T21:12:59.981Z] [worker-~diagnostic~-419dcb42-6d71-47d1-9ae3-ec222703ed56]: FINISHED 
[debug] [2020-04-07T21:13:00.284Z] [runtime-status] [59245] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:13:00.286Z] [runtime-status] [59245] Disabled runtime features: undefined 
[debug] [2020-04-07T21:13:00.288Z] [runtime-status] [59245] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:13:00.288Z] [runtime-status] [59245] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:00.292Z] [runtime-status] [59245] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:13:00.324Z] [runtime-status] [59245] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:13:00.325Z] [runtime-status] [59245] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:00.325Z] [runtime-status] [59245] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:13:00.325Z] [runtime-status] [59245] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:00.325Z] [runtime-status] [59245] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:13:00.561Z] [worker-~diagnostic~-3bb6127e-4a1b-461b-bf00-9ff56190e3e1]: IDLE 
[debug] [2020-04-07T21:13:14.950Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:13:15.954Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:13:15.954Z] [worker-~diagnostic~-3bb6127e-4a1b-461b-bf00-9ff56190e3e1]: FINISHING 
[debug] [2020-04-07T21:13:15.954Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:13:15.958Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:13:15.959Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:13:15.959Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:13:15.959Z] [worker-~diagnostic~-f1301ab1-e97c-4663-892d-15c1d364b098]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59250.sock 
[debug] [2020-04-07T21:13:15.959Z] [worker-~diagnostic~-f1301ab1-e97c-4663-892d-15c1d364b098]: BUSY 
[debug] [2020-04-07T21:13:15.960Z] [worker-~diagnostic~-3bb6127e-4a1b-461b-bf00-9ff56190e3e1]: exited 
[debug] [2020-04-07T21:13:15.961Z] [worker-~diagnostic~-3bb6127e-4a1b-461b-bf00-9ff56190e3e1]: FINISHED 
[debug] [2020-04-07T21:13:16.262Z] [runtime-status] [59250] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:13:16.263Z] [runtime-status] [59250] Disabled runtime features: undefined 
[debug] [2020-04-07T21:13:16.265Z] [runtime-status] [59250] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:13:16.266Z] [runtime-status] [59250] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:16.270Z] [runtime-status] [59250] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:13:16.300Z] [runtime-status] [59250] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:13:16.300Z] [runtime-status] [59250] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:16.302Z] [runtime-status] [59250] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:13:16.302Z] [runtime-status] [59250] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:16.303Z] [runtime-status] [59250] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:13:16.550Z] [worker-~diagnostic~-f1301ab1-e97c-4663-892d-15c1d364b098]: IDLE 
[debug] [2020-04-07T21:13:25.773Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:13:26.774Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:13:26.774Z] [worker-~diagnostic~-f1301ab1-e97c-4663-892d-15c1d364b098]: FINISHING 
[debug] [2020-04-07T21:13:26.774Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:13:26.777Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:13:26.777Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:13:26.777Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:13:26.777Z] [worker-~diagnostic~-865e8673-887c-4350-bb38-5aba08065e1d]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59255.sock 
[debug] [2020-04-07T21:13:26.778Z] [worker-~diagnostic~-865e8673-887c-4350-bb38-5aba08065e1d]: BUSY 
[debug] [2020-04-07T21:13:26.779Z] [worker-~diagnostic~-f1301ab1-e97c-4663-892d-15c1d364b098]: exited 
[debug] [2020-04-07T21:13:26.780Z] [worker-~diagnostic~-f1301ab1-e97c-4663-892d-15c1d364b098]: FINISHED 
[debug] [2020-04-07T21:13:27.070Z] [runtime-status] [59255] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:13:27.072Z] [runtime-status] [59255] Disabled runtime features: undefined 
[debug] [2020-04-07T21:13:27.074Z] [runtime-status] [59255] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:13:27.076Z] [runtime-status] [59255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:27.080Z] [runtime-status] [59255] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:13:27.112Z] [runtime-status] [59255] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:13:27.112Z] [runtime-status] [59255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:27.114Z] [runtime-status] [59255] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:13:27.114Z] [runtime-status] [59255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:13:27.115Z] [runtime-status] [59255] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:13:27.334Z] [worker-~diagnostic~-865e8673-887c-4350-bb38-5aba08065e1d]: IDLE 
[debug] [2020-04-07T21:13:34.444Z] Apr 07, 2020 2:13:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:13:34.568Z] Apr 07, 2020 2:13:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:13:34.780Z] Apr 07, 2020 2:13:34 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Null value error. for 'create' @ L49

[debug] [2020-04-07T21:13:34.832Z] Apr 07, 2020 2:13:34 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L49

[debug] [2020-04-07T21:13:34.872Z] Apr 07, 2020 2:13:34 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, false for 'create' @ L55

[debug] [2020-04-07T21:13:34.907Z] Apr 07, 2020 2:13:34 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L42, Property averageRating is undefined on object. for 'create' @ L49

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:16:20.838Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('address' in request.resource.data) &&\n          ('address' in request.resource.data) &&\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:16:20.842Z] Apr 07, 2020 2:16:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:16:20.891Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"433"}
[warn] ⚠  ../firebase/firestore.rules:43:1 - ERROR mismatched input '}' expecting {'--', '++', '{', '[', '(', '-', '!', '/', 'false', 'null', 'true', PATH_SEGMENT, IDENTIFIER, NUM_INT, NUM_FLOAT, UNPAIRED_DOUBLE_QUOTE, UNPAIRED_SINGLE_QUOTE, STRING, BYTES}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:16:54.686Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data) &&\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:16:54.689Z] Apr 07, 2020 2:16:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:16:54.729Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"433"}
[warn] ⚠  ../firebase/firestore.rules:43:1 - ERROR mismatched input '}' expecting {'--', '++', '{', '[', '(', '-', '!', '/', 'false', 'null', 'true', PATH_SEGMENT, IDENTIFIER, NUM_INT, NUM_FLOAT, UNPAIRED_DOUBLE_QUOTE, UNPAIRED_SINGLE_QUOTE, STRING, BYTES}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:16:57.463Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read, write: if isUser(userID) && userID == subDocID;\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:16:57.466Z] Apr 07, 2020 2:16:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:16:57.517Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"533"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:39:10 - WARNING Unused function: verifyUserPrivilegedInformationDataComplete.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:17:27.552Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:17:27.564Z] Apr 07, 2020 2:17:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:17:27.655Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:17:35.468Z] Apr 07, 2020 2:17:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:17:35.581Z] Apr 07, 2020 2:17:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:17:35.775Z] Apr 07, 2020 2:17:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:17:35.818Z] Apr 07, 2020 2:17:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:17:35.861Z] Apr 07, 2020 2:17:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:17:35.896Z] Apr 07, 2020 2:17:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:18:07.309Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:18:08.310Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:18:08.310Z] [worker-~diagnostic~-865e8673-887c-4350-bb38-5aba08065e1d]: FINISHING 
[debug] [2020-04-07T21:18:08.310Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:18:08.314Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:18:08.315Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:18:08.315Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:18:08.315Z] [worker-~diagnostic~-29e70f52-b323-4a64-89b4-34918f6ffedd]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59326.sock 
[debug] [2020-04-07T21:18:08.315Z] [worker-~diagnostic~-29e70f52-b323-4a64-89b4-34918f6ffedd]: BUSY 
[debug] [2020-04-07T21:18:08.317Z] [worker-~diagnostic~-865e8673-887c-4350-bb38-5aba08065e1d]: exited 
[debug] [2020-04-07T21:18:08.317Z] [worker-~diagnostic~-865e8673-887c-4350-bb38-5aba08065e1d]: FINISHED 
[debug] [2020-04-07T21:18:08.960Z] [runtime-status] [59326] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:18:08.961Z] [runtime-status] [59326] Disabled runtime features: undefined 
[debug] [2020-04-07T21:18:08.964Z] [runtime-status] [59326] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:18:08.966Z] [runtime-status] [59326] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:18:08.970Z] [runtime-status] [59326] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:18:09.022Z] [runtime-status] [59326] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:18:09.023Z] [runtime-status] [59326] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:18:09.023Z] [runtime-status] [59326] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:18:09.024Z] [runtime-status] [59326] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:18:09.024Z] [runtime-status] [59326] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:18:09.444Z] [worker-~diagnostic~-29e70f52-b323-4a64-89b4-34918f6ffedd]: IDLE 
[debug] [2020-04-07T21:19:21.371Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:19:22.374Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:19:22.374Z] [worker-~diagnostic~-29e70f52-b323-4a64-89b4-34918f6ffedd]: FINISHING 
[debug] [2020-04-07T21:19:22.374Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:19:22.378Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:19:22.378Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:19:22.378Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:19:22.379Z] [worker-~diagnostic~-3eb3b4b5-9861-4b72-a476-1c2e002c8270]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59397.sock 
[debug] [2020-04-07T21:19:22.379Z] [worker-~diagnostic~-3eb3b4b5-9861-4b72-a476-1c2e002c8270]: BUSY 
[debug] [2020-04-07T21:19:22.384Z] [worker-~diagnostic~-29e70f52-b323-4a64-89b4-34918f6ffedd]: exited 
[debug] [2020-04-07T21:19:22.385Z] [worker-~diagnostic~-29e70f52-b323-4a64-89b4-34918f6ffedd]: FINISHED 
[debug] [2020-04-07T21:19:22.644Z] [runtime-status] [59397] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:19:22.646Z] [runtime-status] [59397] Disabled runtime features: undefined 
[debug] [2020-04-07T21:19:22.647Z] [runtime-status] [59397] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:22.648Z] [runtime-status] [59397] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:22.651Z] [runtime-status] [59397] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:19:22.681Z] [runtime-status] [59397] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:19:22.682Z] [runtime-status] [59397] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:22.682Z] [runtime-status] [59397] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:22.682Z] [runtime-status] [59397] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:22.683Z] [runtime-status] [59397] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:19:22.894Z] [worker-~diagnostic~-3eb3b4b5-9861-4b72-a476-1c2e002c8270]: IDLE 
[debug] [2020-04-07T21:19:31.531Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:19:32.533Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:19:32.533Z] [worker-~diagnostic~-3eb3b4b5-9861-4b72-a476-1c2e002c8270]: FINISHING 
[debug] [2020-04-07T21:19:32.533Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:19:32.539Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:19:32.539Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:19:32.539Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:19:32.539Z] [worker-~diagnostic~-731ecfb8-2712-49bd-81d0-7209dcf8a3ad]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59400.sock 
[debug] [2020-04-07T21:19:32.539Z] [worker-~diagnostic~-731ecfb8-2712-49bd-81d0-7209dcf8a3ad]: BUSY 
[debug] [2020-04-07T21:19:32.540Z] [worker-~diagnostic~-3eb3b4b5-9861-4b72-a476-1c2e002c8270]: exited 
[debug] [2020-04-07T21:19:32.540Z] [worker-~diagnostic~-3eb3b4b5-9861-4b72-a476-1c2e002c8270]: FINISHED 
[debug] [2020-04-07T21:19:32.883Z] [runtime-status] [59400] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:19:32.885Z] [runtime-status] [59400] Disabled runtime features: undefined 
[debug] [2020-04-07T21:19:32.886Z] [runtime-status] [59400] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:32.887Z] [runtime-status] [59400] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:32.890Z] [runtime-status] [59400] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:19:32.921Z] [runtime-status] [59400] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:19:32.922Z] [runtime-status] [59400] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:32.922Z] [runtime-status] [59400] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:32.922Z] [runtime-status] [59400] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:32.922Z] [runtime-status] [59400] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:19:33.197Z] [worker-~diagnostic~-731ecfb8-2712-49bd-81d0-7209dcf8a3ad]: IDLE 
[debug] [2020-04-07T21:19:33.432Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:19:34.437Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:19:34.437Z] [worker-~diagnostic~-731ecfb8-2712-49bd-81d0-7209dcf8a3ad]: FINISHING 
[debug] [2020-04-07T21:19:34.437Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:19:34.439Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:19:34.442Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:19:34.442Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:19:34.442Z] [worker-~diagnostic~-f42f7486-8806-45ab-bb97-cf96ef028b7f]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59402.sock 
[debug] [2020-04-07T21:19:34.442Z] [worker-~diagnostic~-f42f7486-8806-45ab-bb97-cf96ef028b7f]: BUSY 
[debug] [2020-04-07T21:19:34.443Z] [worker-~diagnostic~-731ecfb8-2712-49bd-81d0-7209dcf8a3ad]: exited 
[debug] [2020-04-07T21:19:34.443Z] [worker-~diagnostic~-731ecfb8-2712-49bd-81d0-7209dcf8a3ad]: FINISHED 
[debug] [2020-04-07T21:19:34.702Z] [runtime-status] [59402] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:19:34.704Z] [runtime-status] [59402] Disabled runtime features: undefined 
[debug] [2020-04-07T21:19:34.705Z] [runtime-status] [59402] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:34.706Z] [runtime-status] [59402] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:34.709Z] [runtime-status] [59402] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:19:34.739Z] [runtime-status] [59402] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:19:34.741Z] [runtime-status] [59402] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:34.741Z] [runtime-status] [59402] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:34.741Z] [runtime-status] [59402] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:34.741Z] [runtime-status] [59402] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:19:34.798Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:19:34.957Z] [worker-~diagnostic~-f42f7486-8806-45ab-bb97-cf96ef028b7f]: IDLE 
[debug] [2020-04-07T21:19:35.799Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:19:35.799Z] [worker-~diagnostic~-f42f7486-8806-45ab-bb97-cf96ef028b7f]: FINISHING 
[debug] [2020-04-07T21:19:35.799Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:19:35.802Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:19:35.802Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:19:35.803Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:19:35.803Z] [worker-~diagnostic~-b644f5a5-2444-4942-afd1-6aa16e5d9f8e]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59404.sock 
[debug] [2020-04-07T21:19:35.803Z] [worker-~diagnostic~-b644f5a5-2444-4942-afd1-6aa16e5d9f8e]: BUSY 
[debug] [2020-04-07T21:19:35.804Z] [worker-~diagnostic~-f42f7486-8806-45ab-bb97-cf96ef028b7f]: exited 
[debug] [2020-04-07T21:19:35.805Z] [worker-~diagnostic~-f42f7486-8806-45ab-bb97-cf96ef028b7f]: FINISHED 
[debug] [2020-04-07T21:19:36.068Z] [runtime-status] [59404] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:19:36.070Z] [runtime-status] [59404] Disabled runtime features: undefined 
[debug] [2020-04-07T21:19:36.073Z] [runtime-status] [59404] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:36.073Z] [runtime-status] [59404] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:36.076Z] [runtime-status] [59404] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:19:36.105Z] [runtime-status] [59404] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:19:36.105Z] [runtime-status] [59404] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:36.106Z] [runtime-status] [59404] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:19:36.106Z] [runtime-status] [59404] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:19:36.106Z] [runtime-status] [59404] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:19:36.314Z] [worker-~diagnostic~-b644f5a5-2444-4942-afd1-6aa16e5d9f8e]: IDLE 
[debug] [2020-04-07T21:19:43.160Z] Apr 07, 2020 2:19:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:19:43.224Z] Apr 07, 2020 2:19:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:19:43.397Z] Apr 07, 2020 2:19:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:19:43.440Z] Apr 07, 2020 2:19:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:19:43.483Z] Apr 07, 2020 2:19:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:19:43.515Z] Apr 07, 2020 2:19:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:19:43.557Z] Apr 07, 2020 2:19:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:20:13.312Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:20:14.312Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:20:14.312Z] [worker-~diagnostic~-b644f5a5-2444-4942-afd1-6aa16e5d9f8e]: FINISHING 
[debug] [2020-04-07T21:20:14.312Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:20:14.315Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:20:14.315Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:20:14.315Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:20:14.315Z] [worker-~diagnostic~-ed54bbee-033d-4916-a918-e2ae740b0116]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59426.sock 
[debug] [2020-04-07T21:20:14.315Z] [worker-~diagnostic~-ed54bbee-033d-4916-a918-e2ae740b0116]: BUSY 
[debug] [2020-04-07T21:20:14.318Z] [worker-~diagnostic~-b644f5a5-2444-4942-afd1-6aa16e5d9f8e]: exited 
[debug] [2020-04-07T21:20:14.318Z] [worker-~diagnostic~-b644f5a5-2444-4942-afd1-6aa16e5d9f8e]: FINISHED 
[debug] [2020-04-07T21:20:14.831Z] [runtime-status] [59426] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:20:14.833Z] [runtime-status] [59426] Disabled runtime features: undefined 
[debug] [2020-04-07T21:20:14.836Z] [runtime-status] [59426] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:20:14.837Z] [runtime-status] [59426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:14.841Z] [runtime-status] [59426] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:20:14.892Z] [runtime-status] [59426] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:20:14.893Z] [runtime-status] [59426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:14.894Z] [runtime-status] [59426] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:20:14.894Z] [runtime-status] [59426] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:14.894Z] [runtime-status] [59426] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:20:15.278Z] [worker-~diagnostic~-ed54bbee-033d-4916-a918-e2ae740b0116]: IDLE 
[debug] [2020-04-07T21:20:27.359Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:20:28.360Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:20:28.360Z] [worker-~diagnostic~-ed54bbee-033d-4916-a918-e2ae740b0116]: FINISHING 
[debug] [2020-04-07T21:20:28.360Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:20:28.363Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:20:28.363Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:20:28.363Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:20:28.363Z] [worker-~diagnostic~-9d6e46c4-27c1-4ed5-bf6f-4ef63aba48ed]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59443.sock 
[debug] [2020-04-07T21:20:28.364Z] [worker-~diagnostic~-9d6e46c4-27c1-4ed5-bf6f-4ef63aba48ed]: BUSY 
[debug] [2020-04-07T21:20:28.366Z] [worker-~diagnostic~-ed54bbee-033d-4916-a918-e2ae740b0116]: exited 
[debug] [2020-04-07T21:20:28.366Z] [worker-~diagnostic~-ed54bbee-033d-4916-a918-e2ae740b0116]: FINISHED 
[debug] [2020-04-07T21:20:28.630Z] [runtime-status] [59443] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:20:28.632Z] [runtime-status] [59443] Disabled runtime features: undefined 
[debug] [2020-04-07T21:20:28.634Z] [runtime-status] [59443] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:20:28.635Z] [runtime-status] [59443] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:28.638Z] [runtime-status] [59443] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:20:28.667Z] [runtime-status] [59443] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:20:28.667Z] [runtime-status] [59443] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:28.667Z] [runtime-status] [59443] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:20:28.667Z] [runtime-status] [59443] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:28.667Z] [runtime-status] [59443] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:20:28.868Z] [worker-~diagnostic~-9d6e46c4-27c1-4ed5-bf6f-4ef63aba48ed]: IDLE 
[debug] [2020-04-07T21:20:33.179Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:20:34.180Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:20:34.180Z] [worker-~diagnostic~-9d6e46c4-27c1-4ed5-bf6f-4ef63aba48ed]: FINISHING 
[debug] [2020-04-07T21:20:34.180Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:20:34.183Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:20:34.183Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:20:34.183Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:20:34.183Z] [worker-~diagnostic~-a34f2bdf-6580-40f2-8d99-283a2835c4d0]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59448.sock 
[debug] [2020-04-07T21:20:34.183Z] [worker-~diagnostic~-a34f2bdf-6580-40f2-8d99-283a2835c4d0]: BUSY 
[debug] [2020-04-07T21:20:34.185Z] [worker-~diagnostic~-9d6e46c4-27c1-4ed5-bf6f-4ef63aba48ed]: exited 
[debug] [2020-04-07T21:20:34.185Z] [worker-~diagnostic~-9d6e46c4-27c1-4ed5-bf6f-4ef63aba48ed]: FINISHED 
[debug] [2020-04-07T21:20:34.445Z] [runtime-status] [59448] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:20:34.447Z] [runtime-status] [59448] Disabled runtime features: undefined 
[debug] [2020-04-07T21:20:34.448Z] [runtime-status] [59448] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:20:34.449Z] [runtime-status] [59448] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:34.452Z] [runtime-status] [59448] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:20:34.481Z] [runtime-status] [59448] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:20:34.481Z] [runtime-status] [59448] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:34.482Z] [runtime-status] [59448] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:20:34.482Z] [runtime-status] [59448] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:20:34.482Z] [runtime-status] [59448] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:20:34.712Z] [worker-~diagnostic~-a34f2bdf-6580-40f2-8d99-283a2835c4d0]: IDLE 
[debug] [2020-04-07T21:20:42.087Z] Apr 07, 2020 2:20:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:20:42.147Z] Apr 07, 2020 2:20:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:20:42.343Z] Apr 07, 2020 2:20:42 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:20:42.398Z] Apr 07, 2020 2:20:42 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:20:42.439Z] Apr 07, 2020 2:20:42 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:20:42.475Z] Apr 07, 2020 2:20:42 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:20:42.524Z] Apr 07, 2020 2:20:42 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:20:42.591Z] Apr 07, 2020 2:20:42 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:23:29.820Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:23:30.823Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:23:30.823Z] [worker-~diagnostic~-a34f2bdf-6580-40f2-8d99-283a2835c4d0]: FINISHING 
[debug] [2020-04-07T21:23:30.823Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:23:30.828Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:23:30.829Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:23:30.829Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:23:30.829Z] [worker-~diagnostic~-051bb3b9-15c4-4845-a8b8-ab98e3b98860]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59501.sock 
[debug] [2020-04-07T21:23:30.829Z] [worker-~diagnostic~-051bb3b9-15c4-4845-a8b8-ab98e3b98860]: BUSY 
[debug] [2020-04-07T21:23:30.830Z] [worker-~diagnostic~-a34f2bdf-6580-40f2-8d99-283a2835c4d0]: exited 
[debug] [2020-04-07T21:23:30.830Z] [worker-~diagnostic~-a34f2bdf-6580-40f2-8d99-283a2835c4d0]: FINISHED 
[debug] [2020-04-07T21:23:31.370Z] [runtime-status] [59501] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:23:31.372Z] [runtime-status] [59501] Disabled runtime features: undefined 
[debug] [2020-04-07T21:23:31.374Z] [runtime-status] [59501] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:23:31.375Z] [runtime-status] [59501] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:31.379Z] [runtime-status] [59501] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:23:31.430Z] [runtime-status] [59501] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:23:31.430Z] [runtime-status] [59501] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:31.431Z] [runtime-status] [59501] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:23:31.431Z] [runtime-status] [59501] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:31.433Z] [runtime-status] [59501] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:23:31.861Z] [worker-~diagnostic~-051bb3b9-15c4-4845-a8b8-ab98e3b98860]: IDLE 
[debug] [2020-04-07T21:23:36.432Z] Apr 07, 2020 2:23:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:23:36.546Z] Apr 07, 2020 2:23:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:23:36.741Z] Apr 07, 2020 2:23:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:23:36.786Z] Apr 07, 2020 2:23:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:23:36.832Z] Apr 07, 2020 2:23:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:23:36.866Z] Apr 07, 2020 2:23:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:23:36.909Z] Apr 07, 2020 2:23:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:23:52.225Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:23:53.228Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:23:53.228Z] [worker-~diagnostic~-051bb3b9-15c4-4845-a8b8-ab98e3b98860]: FINISHING 
[debug] [2020-04-07T21:23:53.229Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:23:53.231Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:23:53.231Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:23:53.231Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:23:53.231Z] [worker-~diagnostic~-92604bfa-b8e6-4039-bead-428967da0e22]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59520.sock 
[debug] [2020-04-07T21:23:53.231Z] [worker-~diagnostic~-92604bfa-b8e6-4039-bead-428967da0e22]: BUSY 
[debug] [2020-04-07T21:23:53.234Z] [worker-~diagnostic~-051bb3b9-15c4-4845-a8b8-ab98e3b98860]: exited 
[debug] [2020-04-07T21:23:53.234Z] [worker-~diagnostic~-051bb3b9-15c4-4845-a8b8-ab98e3b98860]: FINISHED 
[debug] [2020-04-07T21:23:53.706Z] [runtime-status] [59520] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:23:53.709Z] [runtime-status] [59520] Disabled runtime features: undefined 
[debug] [2020-04-07T21:23:53.711Z] [runtime-status] [59520] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:23:53.712Z] [runtime-status] [59520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:53.718Z] [runtime-status] [59520] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:23:53.770Z] [runtime-status] [59520] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:23:53.771Z] [runtime-status] [59520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:53.771Z] [runtime-status] [59520] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:23:53.772Z] [runtime-status] [59520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:53.772Z] [runtime-status] [59520] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:23:54.030Z] [worker-~diagnostic~-92604bfa-b8e6-4039-bead-428967da0e22]: IDLE 
[debug] [2020-04-07T21:23:54.065Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:23:55.068Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:23:55.069Z] [worker-~diagnostic~-92604bfa-b8e6-4039-bead-428967da0e22]: FINISHING 
[debug] [2020-04-07T21:23:55.069Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:23:55.071Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:23:55.072Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:23:55.072Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:23:55.072Z] [worker-~diagnostic~-b306f434-c19a-42df-b1c5-ec847edb1fda]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59522.sock 
[debug] [2020-04-07T21:23:55.072Z] [worker-~diagnostic~-b306f434-c19a-42df-b1c5-ec847edb1fda]: BUSY 
[debug] [2020-04-07T21:23:55.074Z] [worker-~diagnostic~-92604bfa-b8e6-4039-bead-428967da0e22]: exited 
[debug] [2020-04-07T21:23:55.074Z] [worker-~diagnostic~-92604bfa-b8e6-4039-bead-428967da0e22]: FINISHED 
[debug] [2020-04-07T21:23:55.374Z] [runtime-status] [59522] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:23:55.376Z] [runtime-status] [59522] Disabled runtime features: undefined 
[debug] [2020-04-07T21:23:55.378Z] [runtime-status] [59522] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:23:55.378Z] [runtime-status] [59522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:55.383Z] [runtime-status] [59522] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:23:55.417Z] [runtime-status] [59522] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:23:55.418Z] [runtime-status] [59522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:55.418Z] [runtime-status] [59522] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:23:55.418Z] [runtime-status] [59522] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:23:55.418Z] [runtime-status] [59522] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:23:55.647Z] [worker-~diagnostic~-b306f434-c19a-42df-b1c5-ec847edb1fda]: IDLE 
[debug] [2020-04-07T21:24:19.002Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:24:20.004Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:24:20.004Z] [worker-~diagnostic~-b306f434-c19a-42df-b1c5-ec847edb1fda]: FINISHING 
[debug] [2020-04-07T21:24:20.004Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:24:20.006Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:24:20.006Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:24:20.006Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:24:20.006Z] [worker-~diagnostic~-419e1515-1767-4505-9725-2bc1d7dcd0a1]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59528.sock 
[debug] [2020-04-07T21:24:20.006Z] [worker-~diagnostic~-419e1515-1767-4505-9725-2bc1d7dcd0a1]: BUSY 
[debug] [2020-04-07T21:24:20.009Z] [worker-~diagnostic~-b306f434-c19a-42df-b1c5-ec847edb1fda]: exited 
[debug] [2020-04-07T21:24:20.009Z] [worker-~diagnostic~-b306f434-c19a-42df-b1c5-ec847edb1fda]: FINISHED 
[debug] [2020-04-07T21:24:20.487Z] [runtime-status] [59528] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:24:20.489Z] [runtime-status] [59528] Disabled runtime features: undefined 
[debug] [2020-04-07T21:24:20.492Z] [runtime-status] [59528] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:24:20.493Z] [runtime-status] [59528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:24:20.498Z] [runtime-status] [59528] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:24:20.543Z] [runtime-status] [59528] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:24:20.544Z] [runtime-status] [59528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:24:20.544Z] [runtime-status] [59528] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:24:20.545Z] [runtime-status] [59528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:24:20.545Z] [runtime-status] [59528] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:24:20.992Z] [worker-~diagnostic~-419e1515-1767-4505-9725-2bc1d7dcd0a1]: IDLE 
[debug] [2020-04-07T21:25:45.092Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:25:46.097Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:25:46.097Z] [worker-~diagnostic~-419e1515-1767-4505-9725-2bc1d7dcd0a1]: FINISHING 
[debug] [2020-04-07T21:25:46.097Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:25:46.100Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:25:46.100Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:25:46.100Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:25:46.101Z] [worker-~diagnostic~-0b175328-570b-4b04-a80c-eb2375031020]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59535.sock 
[debug] [2020-04-07T21:25:46.101Z] [worker-~diagnostic~-0b175328-570b-4b04-a80c-eb2375031020]: BUSY 
[debug] [2020-04-07T21:25:46.102Z] [worker-~diagnostic~-419e1515-1767-4505-9725-2bc1d7dcd0a1]: exited 
[debug] [2020-04-07T21:25:46.102Z] [worker-~diagnostic~-419e1515-1767-4505-9725-2bc1d7dcd0a1]: FINISHED 
[debug] [2020-04-07T21:25:46.671Z] [runtime-status] [59535] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:25:46.672Z] [runtime-status] [59535] Disabled runtime features: undefined 
[debug] [2020-04-07T21:25:46.677Z] [runtime-status] [59535] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:25:46.679Z] [runtime-status] [59535] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:25:46.684Z] [runtime-status] [59535] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:25:46.744Z] [runtime-status] [59535] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:25:46.746Z] [runtime-status] [59535] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:25:46.746Z] [runtime-status] [59535] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:25:46.746Z] [runtime-status] [59535] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:25:46.747Z] [runtime-status] [59535] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:25:47.240Z] [worker-~diagnostic~-0b175328-570b-4b04-a80c-eb2375031020]: IDLE 
[debug] [2020-04-07T21:26:00.376Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:26:01.380Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:26:01.380Z] [worker-~diagnostic~-0b175328-570b-4b04-a80c-eb2375031020]: FINISHING 
[debug] [2020-04-07T21:26:01.381Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:26:01.385Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:26:01.386Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:26:01.386Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:26:01.386Z] [worker-~diagnostic~-0582b163-1fd0-4971-b148-06aad521189c]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59538.sock 
[debug] [2020-04-07T21:26:01.386Z] [worker-~diagnostic~-0582b163-1fd0-4971-b148-06aad521189c]: BUSY 
[debug] [2020-04-07T21:26:01.387Z] [worker-~diagnostic~-0b175328-570b-4b04-a80c-eb2375031020]: exited 
[debug] [2020-04-07T21:26:01.387Z] [worker-~diagnostic~-0b175328-570b-4b04-a80c-eb2375031020]: FINISHED 
[debug] [2020-04-07T21:26:01.784Z] [runtime-status] [59538] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:26:01.786Z] [runtime-status] [59538] Disabled runtime features: undefined 
[debug] [2020-04-07T21:26:01.789Z] [runtime-status] [59538] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:26:01.790Z] [runtime-status] [59538] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:26:01.791Z] [runtime-status] [59538] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:26:01.833Z] [runtime-status] [59538] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:26:01.834Z] [runtime-status] [59538] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:26:01.835Z] [runtime-status] [59538] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:26:01.835Z] [runtime-status] [59538] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:26:01.835Z] [runtime-status] [59538] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:26:02.089Z] [worker-~diagnostic~-0582b163-1fd0-4971-b148-06aad521189c]: IDLE 
[debug] [2020-04-07T21:26:48.551Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:26:49.555Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:26:49.556Z] [worker-~diagnostic~-0582b163-1fd0-4971-b148-06aad521189c]: FINISHING 
[debug] [2020-04-07T21:26:49.556Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:26:49.558Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:26:49.558Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:26:49.558Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:26:49.558Z] [worker-~diagnostic~-7f9aeaed-bdf8-4d55-bbfb-8b39b89c0bc7]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59546.sock 
[debug] [2020-04-07T21:26:49.558Z] [worker-~diagnostic~-7f9aeaed-bdf8-4d55-bbfb-8b39b89c0bc7]: BUSY 
[debug] [2020-04-07T21:26:49.560Z] [worker-~diagnostic~-0582b163-1fd0-4971-b148-06aad521189c]: exited 
[debug] [2020-04-07T21:26:49.560Z] [worker-~diagnostic~-0582b163-1fd0-4971-b148-06aad521189c]: FINISHED 
[debug] [2020-04-07T21:26:49.808Z] [runtime-status] [59546] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:26:49.813Z] [runtime-status] [59546] Disabled runtime features: undefined 
[debug] [2020-04-07T21:26:49.813Z] [runtime-status] [59546] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:26:49.813Z] [runtime-status] [59546] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:26:49.815Z] [runtime-status] [59546] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:26:49.843Z] [runtime-status] [59546] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:26:49.844Z] [runtime-status] [59546] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:26:49.845Z] [runtime-status] [59546] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:26:49.845Z] [runtime-status] [59546] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:26:49.846Z] [runtime-status] [59546] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:26:50.087Z] [worker-~diagnostic~-7f9aeaed-bdf8-4d55-bbfb-8b39b89c0bc7]: IDLE 
[debug] [2020-04-07T21:30:14.612Z] Apr 07, 2020 2:30:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:30:14.782Z] Apr 07, 2020 2:30:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:30:15.226Z] Apr 07, 2020 2:30:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:30:15.267Z] Apr 07, 2020 2:30:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:30:15.302Z] Apr 07, 2020 2:30:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:30:15.337Z] Apr 07, 2020 2:30:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:30:15.405Z] Apr 07, 2020 2:30:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:30:45.059Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:30:46.063Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:30:46.064Z] [worker-~diagnostic~-7f9aeaed-bdf8-4d55-bbfb-8b39b89c0bc7]: FINISHING 
[debug] [2020-04-07T21:30:46.064Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:30:46.069Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:30:46.074Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:30:46.074Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:30:46.075Z] [worker-~diagnostic~-0f45c450-a52c-4d24-896d-f0a20cadbd15]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59625.sock 
[debug] [2020-04-07T21:30:46.075Z] [worker-~diagnostic~-0f45c450-a52c-4d24-896d-f0a20cadbd15]: BUSY 
[debug] [2020-04-07T21:30:46.076Z] [worker-~diagnostic~-7f9aeaed-bdf8-4d55-bbfb-8b39b89c0bc7]: exited 
[debug] [2020-04-07T21:30:46.076Z] [worker-~diagnostic~-7f9aeaed-bdf8-4d55-bbfb-8b39b89c0bc7]: FINISHED 
[debug] [2020-04-07T21:30:46.618Z] [runtime-status] [59625] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:30:46.620Z] [runtime-status] [59625] Disabled runtime features: undefined 
[debug] [2020-04-07T21:30:46.623Z] [runtime-status] [59625] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:30:46.623Z] [runtime-status] [59625] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:46.626Z] [runtime-status] [59625] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:30:46.674Z] [runtime-status] [59625] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:30:46.674Z] [runtime-status] [59625] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:46.675Z] [runtime-status] [59625] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:30:46.675Z] [runtime-status] [59625] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:46.676Z] [runtime-status] [59625] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:30:47.076Z] [worker-~diagnostic~-0f45c450-a52c-4d24-896d-f0a20cadbd15]: IDLE 
[debug] [2020-04-07T21:30:51.555Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:30:52.558Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:30:52.558Z] [worker-~diagnostic~-0f45c450-a52c-4d24-896d-f0a20cadbd15]: FINISHING 
[debug] [2020-04-07T21:30:52.558Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:30:52.562Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:30:52.563Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:30:52.563Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:30:52.563Z] [worker-~diagnostic~-03879265-2400-4c3a-8ca6-544bc076d624]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59629.sock 
[debug] [2020-04-07T21:30:52.563Z] [worker-~diagnostic~-03879265-2400-4c3a-8ca6-544bc076d624]: BUSY 
[debug] [2020-04-07T21:30:52.564Z] [worker-~diagnostic~-0f45c450-a52c-4d24-896d-f0a20cadbd15]: exited 
[debug] [2020-04-07T21:30:52.564Z] [worker-~diagnostic~-0f45c450-a52c-4d24-896d-f0a20cadbd15]: FINISHED 
[debug] [2020-04-07T21:30:52.823Z] [runtime-status] [59629] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:30:52.824Z] [runtime-status] [59629] Disabled runtime features: undefined 
[debug] [2020-04-07T21:30:52.827Z] [runtime-status] [59629] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:30:52.827Z] [runtime-status] [59629] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:52.831Z] [runtime-status] [59629] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:30:52.863Z] [runtime-status] [59629] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:30:52.864Z] [runtime-status] [59629] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:52.864Z] [runtime-status] [59629] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:30:52.864Z] [runtime-status] [59629] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:52.865Z] [runtime-status] [59629] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:30:53.078Z] [worker-~diagnostic~-03879265-2400-4c3a-8ca6-544bc076d624]: IDLE 
[debug] [2020-04-07T21:30:56.249Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:30:57.253Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:30:57.253Z] [worker-~diagnostic~-03879265-2400-4c3a-8ca6-544bc076d624]: FINISHING 
[debug] [2020-04-07T21:30:57.253Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:30:57.256Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:30:57.256Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:30:57.256Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:30:57.256Z] [worker-~diagnostic~-1f1b6156-6a66-4ea0-aa23-e2c4d5d2b7c3]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59645.sock 
[debug] [2020-04-07T21:30:57.256Z] [worker-~diagnostic~-1f1b6156-6a66-4ea0-aa23-e2c4d5d2b7c3]: BUSY 
[debug] [2020-04-07T21:30:57.258Z] [worker-~diagnostic~-03879265-2400-4c3a-8ca6-544bc076d624]: exited 
[debug] [2020-04-07T21:30:57.258Z] [worker-~diagnostic~-03879265-2400-4c3a-8ca6-544bc076d624]: FINISHED 
[debug] [2020-04-07T21:30:57.548Z] [runtime-status] [59645] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:30:57.551Z] [runtime-status] [59645] Disabled runtime features: undefined 
[debug] [2020-04-07T21:30:57.553Z] [runtime-status] [59645] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:30:57.554Z] [runtime-status] [59645] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:57.557Z] [runtime-status] [59645] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:30:57.592Z] [runtime-status] [59645] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:30:57.592Z] [runtime-status] [59645] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:57.594Z] [runtime-status] [59645] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:30:57.595Z] [runtime-status] [59645] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:30:57.596Z] [runtime-status] [59645] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:30:57.806Z] [worker-~diagnostic~-1f1b6156-6a66-4ea0-aa23-e2c4d5d2b7c3]: IDLE 
[debug] [2020-04-07T21:31:00.121Z] Apr 07, 2020 2:31:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:31:00.179Z] Apr 07, 2020 2:31:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:31:00.458Z] Apr 07, 2020 2:31:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:31:00.497Z] Apr 07, 2020 2:31:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:31:00.533Z] Apr 07, 2020 2:31:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:31:00.574Z] Apr 07, 2020 2:31:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:31:00.633Z] Apr 07, 2020 2:31:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:31:08.653Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:31:09.657Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:31:09.658Z] [worker-~diagnostic~-1f1b6156-6a66-4ea0-aa23-e2c4d5d2b7c3]: FINISHING 
[debug] [2020-04-07T21:31:09.658Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:31:09.662Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:31:09.662Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:31:09.662Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:31:09.664Z] [worker-~diagnostic~-dd542281-9295-4b4a-9b3b-a7f32ccef72a]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59648.sock 
[debug] [2020-04-07T21:31:09.664Z] [worker-~diagnostic~-dd542281-9295-4b4a-9b3b-a7f32ccef72a]: BUSY 
[debug] [2020-04-07T21:31:09.664Z] [worker-~diagnostic~-1f1b6156-6a66-4ea0-aa23-e2c4d5d2b7c3]: exited 
[debug] [2020-04-07T21:31:09.664Z] [worker-~diagnostic~-1f1b6156-6a66-4ea0-aa23-e2c4d5d2b7c3]: FINISHED 
[debug] [2020-04-07T21:31:09.927Z] [runtime-status] [59648] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:31:09.928Z] [runtime-status] [59648] Disabled runtime features: undefined 
[debug] [2020-04-07T21:31:09.930Z] [runtime-status] [59648] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:31:09.931Z] [runtime-status] [59648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:09.935Z] [runtime-status] [59648] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:31:09.968Z] [runtime-status] [59648] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:31:09.969Z] [runtime-status] [59648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:09.969Z] [runtime-status] [59648] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:31:09.970Z] [runtime-status] [59648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:09.970Z] [runtime-status] [59648] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:31:10.187Z] [worker-~diagnostic~-dd542281-9295-4b4a-9b3b-a7f32ccef72a]: IDLE 
[debug] [2020-04-07T21:31:14.924Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:31:15.927Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:31:15.927Z] [worker-~diagnostic~-dd542281-9295-4b4a-9b3b-a7f32ccef72a]: FINISHING 
[debug] [2020-04-07T21:31:15.929Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:31:15.933Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:31:15.933Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:31:15.933Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:31:15.934Z] [worker-~diagnostic~-bb380df7-0f2b-4a32-911f-be1e7fde9dc1]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59651.sock 
[debug] [2020-04-07T21:31:15.934Z] [worker-~diagnostic~-bb380df7-0f2b-4a32-911f-be1e7fde9dc1]: BUSY 
[debug] [2020-04-07T21:31:15.935Z] [worker-~diagnostic~-dd542281-9295-4b4a-9b3b-a7f32ccef72a]: exited 
[debug] [2020-04-07T21:31:15.935Z] [worker-~diagnostic~-dd542281-9295-4b4a-9b3b-a7f32ccef72a]: FINISHED 
[debug] [2020-04-07T21:31:16.218Z] [runtime-status] [59651] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:31:16.221Z] [runtime-status] [59651] Disabled runtime features: undefined 
[debug] [2020-04-07T21:31:16.223Z] [runtime-status] [59651] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:31:16.224Z] [runtime-status] [59651] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:16.228Z] [runtime-status] [59651] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:31:16.262Z] [runtime-status] [59651] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:31:16.262Z] [runtime-status] [59651] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:16.262Z] [runtime-status] [59651] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:31:16.262Z] [runtime-status] [59651] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:16.263Z] [runtime-status] [59651] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:31:16.468Z] [worker-~diagnostic~-bb380df7-0f2b-4a32-911f-be1e7fde9dc1]: IDLE 
[debug] [2020-04-07T21:31:16.897Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:31:17.898Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:31:17.898Z] [worker-~diagnostic~-bb380df7-0f2b-4a32-911f-be1e7fde9dc1]: FINISHING 
[debug] [2020-04-07T21:31:17.898Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:31:17.902Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:31:17.902Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:31:17.903Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:31:17.903Z] [worker-~diagnostic~-af79f3ce-f475-40b9-93fa-30876c81603b]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59653.sock 
[debug] [2020-04-07T21:31:17.903Z] [worker-~diagnostic~-af79f3ce-f475-40b9-93fa-30876c81603b]: BUSY 
[debug] [2020-04-07T21:31:17.904Z] [worker-~diagnostic~-bb380df7-0f2b-4a32-911f-be1e7fde9dc1]: exited 
[debug] [2020-04-07T21:31:17.905Z] [worker-~diagnostic~-bb380df7-0f2b-4a32-911f-be1e7fde9dc1]: FINISHED 
[debug] [2020-04-07T21:31:18.168Z] [runtime-status] [59653] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:31:18.169Z] [runtime-status] [59653] Disabled runtime features: undefined 
[debug] [2020-04-07T21:31:18.172Z] [runtime-status] [59653] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:31:18.172Z] [runtime-status] [59653] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:18.176Z] [runtime-status] [59653] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:31:18.203Z] [runtime-status] [59653] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:31:18.203Z] [runtime-status] [59653] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:18.204Z] [runtime-status] [59653] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:31:18.204Z] [runtime-status] [59653] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:31:18.204Z] [runtime-status] [59653] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:31:18.406Z] [worker-~diagnostic~-af79f3ce-f475-40b9-93fa-30876c81603b]: IDLE 
[debug] [2020-04-07T21:31:22.669Z] Apr 07, 2020 2:31:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:31:22.725Z] Apr 07, 2020 2:31:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:31:22.993Z] Apr 07, 2020 2:31:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:31:23.030Z] Apr 07, 2020 2:31:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:31:23.065Z] Apr 07, 2020 2:31:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:31:23.102Z] Apr 07, 2020 2:31:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:31:23.152Z] Apr 07, 2020 2:31:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:33:16.859Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:33:17.861Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:33:17.861Z] [worker-~diagnostic~-af79f3ce-f475-40b9-93fa-30876c81603b]: FINISHING 
[debug] [2020-04-07T21:33:17.861Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:33:17.865Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:33:17.866Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:33:17.866Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:33:17.866Z] [worker-~diagnostic~-a74812bd-1329-4834-a5f7-9ccaabadc605]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59689.sock 
[debug] [2020-04-07T21:33:17.866Z] [worker-~diagnostic~-a74812bd-1329-4834-a5f7-9ccaabadc605]: BUSY 
[debug] [2020-04-07T21:33:17.869Z] [worker-~diagnostic~-af79f3ce-f475-40b9-93fa-30876c81603b]: exited 
[debug] [2020-04-07T21:33:17.869Z] [worker-~diagnostic~-af79f3ce-f475-40b9-93fa-30876c81603b]: FINISHED 
[debug] [2020-04-07T21:33:18.132Z] [runtime-status] [59689] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:33:18.134Z] [runtime-status] [59689] Disabled runtime features: undefined 
[debug] [2020-04-07T21:33:18.136Z] [runtime-status] [59689] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:33:18.136Z] [runtime-status] [59689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:33:18.139Z] [runtime-status] [59689] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:33:18.167Z] [runtime-status] [59689] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:33:18.168Z] [runtime-status] [59689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:33:18.170Z] [runtime-status] [59689] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:33:18.170Z] [runtime-status] [59689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:33:18.170Z] [runtime-status] [59689] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:33:18.383Z] [worker-~diagnostic~-a74812bd-1329-4834-a5f7-9ccaabadc605]: IDLE 
[debug] [2020-04-07T21:35:31.184Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:35:32.187Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:35:32.187Z] [worker-~diagnostic~-a74812bd-1329-4834-a5f7-9ccaabadc605]: FINISHING 
[debug] [2020-04-07T21:35:32.187Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:35:32.190Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:35:32.190Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:35:32.190Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:35:32.190Z] [worker-~diagnostic~-fc2ecac4-d6b7-4ab5-8917-95dda97031aa]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59703.sock 
[debug] [2020-04-07T21:35:32.190Z] [worker-~diagnostic~-fc2ecac4-d6b7-4ab5-8917-95dda97031aa]: BUSY 
[debug] [2020-04-07T21:35:32.192Z] [worker-~diagnostic~-a74812bd-1329-4834-a5f7-9ccaabadc605]: exited 
[debug] [2020-04-07T21:35:32.192Z] [worker-~diagnostic~-a74812bd-1329-4834-a5f7-9ccaabadc605]: FINISHED 
[debug] [2020-04-07T21:35:32.442Z] [runtime-status] [59703] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:35:32.445Z] [runtime-status] [59703] Disabled runtime features: undefined 
[debug] [2020-04-07T21:35:32.446Z] [runtime-status] [59703] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:35:32.446Z] [runtime-status] [59703] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:32.449Z] [runtime-status] [59703] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:35:32.478Z] [runtime-status] [59703] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:35:32.479Z] [runtime-status] [59703] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:32.479Z] [runtime-status] [59703] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:35:32.479Z] [runtime-status] [59703] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:32.480Z] [runtime-status] [59703] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:35:32.678Z] [worker-~diagnostic~-fc2ecac4-d6b7-4ab5-8917-95dda97031aa]: IDLE 
[debug] [2020-04-07T21:35:36.519Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:35:37.520Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:35:37.521Z] [worker-~diagnostic~-fc2ecac4-d6b7-4ab5-8917-95dda97031aa]: FINISHING 
[debug] [2020-04-07T21:35:37.521Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:35:37.523Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:35:37.523Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:35:37.523Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:35:37.523Z] [worker-~diagnostic~-3da26a1a-5f50-44b7-a064-e3639ae4f759]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59705.sock 
[debug] [2020-04-07T21:35:37.523Z] [worker-~diagnostic~-3da26a1a-5f50-44b7-a064-e3639ae4f759]: BUSY 
[debug] [2020-04-07T21:35:37.526Z] [worker-~diagnostic~-fc2ecac4-d6b7-4ab5-8917-95dda97031aa]: exited 
[debug] [2020-04-07T21:35:37.526Z] [worker-~diagnostic~-fc2ecac4-d6b7-4ab5-8917-95dda97031aa]: FINISHED 
[debug] [2020-04-07T21:35:37.808Z] [runtime-status] [59705] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:35:37.810Z] [runtime-status] [59705] Disabled runtime features: undefined 
[debug] [2020-04-07T21:35:37.813Z] [runtime-status] [59705] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:35:37.813Z] [runtime-status] [59705] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:37.816Z] [runtime-status] [59705] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:35:37.844Z] [runtime-status] [59705] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:35:37.844Z] [runtime-status] [59705] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:37.845Z] [runtime-status] [59705] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:35:37.845Z] [runtime-status] [59705] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:37.846Z] [runtime-status] [59705] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:35:38.037Z] [worker-~diagnostic~-3da26a1a-5f50-44b7-a064-e3639ae4f759]: IDLE 
[debug] [2020-04-07T21:35:41.005Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:35:42.005Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:35:42.005Z] [worker-~diagnostic~-3da26a1a-5f50-44b7-a064-e3639ae4f759]: FINISHING 
[debug] [2020-04-07T21:35:42.005Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:35:42.008Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:35:42.008Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:35:42.008Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:35:42.008Z] [worker-~diagnostic~-010ddd0a-c82d-4eba-8d3a-6289155fa1f8]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59707.sock 
[debug] [2020-04-07T21:35:42.008Z] [worker-~diagnostic~-010ddd0a-c82d-4eba-8d3a-6289155fa1f8]: BUSY 
[debug] [2020-04-07T21:35:42.011Z] [worker-~diagnostic~-3da26a1a-5f50-44b7-a064-e3639ae4f759]: exited 
[debug] [2020-04-07T21:35:42.011Z] [worker-~diagnostic~-3da26a1a-5f50-44b7-a064-e3639ae4f759]: FINISHED 
[debug] [2020-04-07T21:35:42.293Z] [runtime-status] [59707] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:35:42.294Z] [runtime-status] [59707] Disabled runtime features: undefined 
[debug] [2020-04-07T21:35:42.297Z] [runtime-status] [59707] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:35:42.298Z] [runtime-status] [59707] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:42.301Z] [runtime-status] [59707] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:35:42.334Z] [runtime-status] [59707] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:35:42.335Z] [runtime-status] [59707] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:42.335Z] [runtime-status] [59707] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:35:42.336Z] [runtime-status] [59707] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:35:42.336Z] [runtime-status] [59707] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:35:42.552Z] [worker-~diagnostic~-010ddd0a-c82d-4eba-8d3a-6289155fa1f8]: IDLE 
[debug] [2020-04-07T21:36:05.083Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:36:06.086Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:36:06.086Z] [worker-~diagnostic~-010ddd0a-c82d-4eba-8d3a-6289155fa1f8]: FINISHING 
[debug] [2020-04-07T21:36:06.087Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:36:06.090Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:36:06.090Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:36:06.090Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:36:06.091Z] [worker-~diagnostic~-8d81554d-6007-49fe-b2ce-f7d940830019]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59710.sock 
[debug] [2020-04-07T21:36:06.091Z] [worker-~diagnostic~-8d81554d-6007-49fe-b2ce-f7d940830019]: BUSY 
[debug] [2020-04-07T21:36:06.093Z] [worker-~diagnostic~-010ddd0a-c82d-4eba-8d3a-6289155fa1f8]: exited 
[debug] [2020-04-07T21:36:06.093Z] [worker-~diagnostic~-010ddd0a-c82d-4eba-8d3a-6289155fa1f8]: FINISHED 
[debug] [2020-04-07T21:36:06.399Z] [runtime-status] [59710] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:36:06.401Z] [runtime-status] [59710] Disabled runtime features: undefined 
[debug] [2020-04-07T21:36:06.403Z] [runtime-status] [59710] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:36:06.404Z] [runtime-status] [59710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:06.409Z] [runtime-status] [59710] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:36:06.442Z] [runtime-status] [59710] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:36:06.443Z] [runtime-status] [59710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:06.444Z] [runtime-status] [59710] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:36:06.444Z] [runtime-status] [59710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:06.445Z] [runtime-status] [59710] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:36:06.694Z] [worker-~diagnostic~-8d81554d-6007-49fe-b2ce-f7d940830019]: IDLE 
[debug] [2020-04-07T21:36:10.926Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:36:11.927Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:36:11.928Z] [worker-~diagnostic~-8d81554d-6007-49fe-b2ce-f7d940830019]: FINISHING 
[debug] [2020-04-07T21:36:11.928Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:36:11.932Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:36:11.932Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:36:11.932Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:36:11.932Z] [worker-~diagnostic~-94fca28e-f155-42bd-9f66-072f7f58244b]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59712.sock 
[debug] [2020-04-07T21:36:11.932Z] [worker-~diagnostic~-94fca28e-f155-42bd-9f66-072f7f58244b]: BUSY 
[debug] [2020-04-07T21:36:11.935Z] [worker-~diagnostic~-8d81554d-6007-49fe-b2ce-f7d940830019]: exited 
[debug] [2020-04-07T21:36:11.935Z] [worker-~diagnostic~-8d81554d-6007-49fe-b2ce-f7d940830019]: FINISHED 
[debug] [2020-04-07T21:36:12.193Z] [runtime-status] [59712] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:36:12.195Z] [runtime-status] [59712] Disabled runtime features: undefined 
[debug] [2020-04-07T21:36:12.197Z] [runtime-status] [59712] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:36:12.198Z] [runtime-status] [59712] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:12.200Z] [runtime-status] [59712] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:36:12.227Z] [runtime-status] [59712] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:36:12.228Z] [runtime-status] [59712] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:12.228Z] [runtime-status] [59712] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:36:12.228Z] [runtime-status] [59712] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:12.229Z] [runtime-status] [59712] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:36:12.426Z] [worker-~diagnostic~-94fca28e-f155-42bd-9f66-072f7f58244b]: IDLE 
[debug] [2020-04-07T21:36:35.139Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:36:36.140Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:36:36.140Z] [worker-~diagnostic~-94fca28e-f155-42bd-9f66-072f7f58244b]: FINISHING 
[debug] [2020-04-07T21:36:36.141Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:36:36.146Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:36:36.146Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:36:36.146Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:36:36.146Z] [worker-~diagnostic~-11291c13-8abe-4f3e-b515-7188b6f0d443]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59716.sock 
[debug] [2020-04-07T21:36:36.146Z] [worker-~diagnostic~-11291c13-8abe-4f3e-b515-7188b6f0d443]: BUSY 
[debug] [2020-04-07T21:36:36.148Z] [worker-~diagnostic~-94fca28e-f155-42bd-9f66-072f7f58244b]: exited 
[debug] [2020-04-07T21:36:36.148Z] [worker-~diagnostic~-94fca28e-f155-42bd-9f66-072f7f58244b]: FINISHED 
[debug] [2020-04-07T21:36:36.409Z] [runtime-status] [59716] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:36:36.409Z] [runtime-status] [59716] Disabled runtime features: undefined 
[debug] [2020-04-07T21:36:36.411Z] [runtime-status] [59716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:36:36.412Z] [runtime-status] [59716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:36.415Z] [runtime-status] [59716] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:36:36.442Z] [runtime-status] [59716] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:36:36.443Z] [runtime-status] [59716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:36.443Z] [runtime-status] [59716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:36:36.443Z] [runtime-status] [59716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:36:36.444Z] [runtime-status] [59716] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:36:36.637Z] [worker-~diagnostic~-11291c13-8abe-4f3e-b515-7188b6f0d443]: IDLE 
[debug] [2020-04-07T21:37:01.085Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:37:02.085Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:37:02.085Z] [worker-~diagnostic~-11291c13-8abe-4f3e-b515-7188b6f0d443]: FINISHING 
[debug] [2020-04-07T21:37:02.085Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:37:02.088Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:37:02.088Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:37:02.088Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:37:02.088Z] [worker-~diagnostic~-85e76b5f-674e-4e62-9b79-7e9b1200a5af]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59724.sock 
[debug] [2020-04-07T21:37:02.088Z] [worker-~diagnostic~-85e76b5f-674e-4e62-9b79-7e9b1200a5af]: BUSY 
[debug] [2020-04-07T21:37:02.090Z] [worker-~diagnostic~-11291c13-8abe-4f3e-b515-7188b6f0d443]: exited 
[debug] [2020-04-07T21:37:02.091Z] [worker-~diagnostic~-11291c13-8abe-4f3e-b515-7188b6f0d443]: FINISHED 
[debug] [2020-04-07T21:37:02.602Z] [runtime-status] [59724] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:37:02.603Z] [runtime-status] [59724] Disabled runtime features: undefined 
[debug] [2020-04-07T21:37:02.606Z] [runtime-status] [59724] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:02.608Z] [runtime-status] [59724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:02.612Z] [runtime-status] [59724] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:37:02.662Z] [runtime-status] [59724] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:37:02.662Z] [runtime-status] [59724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:02.663Z] [runtime-status] [59724] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:02.663Z] [runtime-status] [59724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:02.664Z] [runtime-status] [59724] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:37:02.809Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:37:03.089Z] [worker-~diagnostic~-85e76b5f-674e-4e62-9b79-7e9b1200a5af]: IDLE 
[debug] [2020-04-07T21:37:03.812Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:37:03.812Z] [worker-~diagnostic~-85e76b5f-674e-4e62-9b79-7e9b1200a5af]: FINISHING 
[debug] [2020-04-07T21:37:03.812Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:37:03.815Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:37:03.815Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:37:03.815Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:37:03.815Z] [worker-~diagnostic~-a96bdd82-d13a-4716-91c0-9f34f689d5f3]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59726.sock 
[debug] [2020-04-07T21:37:03.815Z] [worker-~diagnostic~-a96bdd82-d13a-4716-91c0-9f34f689d5f3]: BUSY 
[debug] [2020-04-07T21:37:03.817Z] [worker-~diagnostic~-85e76b5f-674e-4e62-9b79-7e9b1200a5af]: exited 
[debug] [2020-04-07T21:37:03.817Z] [worker-~diagnostic~-85e76b5f-674e-4e62-9b79-7e9b1200a5af]: FINISHED 
[debug] [2020-04-07T21:37:04.112Z] [runtime-status] [59726] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:37:04.114Z] [runtime-status] [59726] Disabled runtime features: undefined 
[debug] [2020-04-07T21:37:04.116Z] [runtime-status] [59726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:04.118Z] [runtime-status] [59726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:04.121Z] [runtime-status] [59726] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:37:04.155Z] [runtime-status] [59726] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:37:04.156Z] [runtime-status] [59726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:04.156Z] [runtime-status] [59726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:04.156Z] [runtime-status] [59726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:04.156Z] [runtime-status] [59726] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:37:04.364Z] [worker-~diagnostic~-a96bdd82-d13a-4716-91c0-9f34f689d5f3]: IDLE 
[debug] [2020-04-07T21:37:26.113Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:37:27.117Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:37:27.117Z] [worker-~diagnostic~-a96bdd82-d13a-4716-91c0-9f34f689d5f3]: FINISHING 
[debug] [2020-04-07T21:37:27.117Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:37:27.125Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:37:27.125Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:37:27.125Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:37:27.125Z] [worker-~diagnostic~-dc0826d6-8065-40de-ac11-e9b09e0e62eb]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59731.sock 
[debug] [2020-04-07T21:37:27.125Z] [worker-~diagnostic~-dc0826d6-8065-40de-ac11-e9b09e0e62eb]: BUSY 
[debug] [2020-04-07T21:37:27.126Z] [worker-~diagnostic~-a96bdd82-d13a-4716-91c0-9f34f689d5f3]: exited 
[debug] [2020-04-07T21:37:27.126Z] [worker-~diagnostic~-a96bdd82-d13a-4716-91c0-9f34f689d5f3]: FINISHED 
[debug] [2020-04-07T21:37:27.627Z] [runtime-status] [59731] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:37:27.629Z] [runtime-status] [59731] Disabled runtime features: undefined 
[debug] [2020-04-07T21:37:27.632Z] [runtime-status] [59731] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:27.633Z] [runtime-status] [59731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:27.637Z] [runtime-status] [59731] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:37:27.686Z] [runtime-status] [59731] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:37:27.686Z] [runtime-status] [59731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:27.687Z] [runtime-status] [59731] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:27.688Z] [runtime-status] [59731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:27.689Z] [runtime-status] [59731] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:37:28.094Z] [worker-~diagnostic~-dc0826d6-8065-40de-ac11-e9b09e0e62eb]: IDLE 
[debug] [2020-04-07T21:37:35.580Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:37:36.585Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:37:36.586Z] [worker-~diagnostic~-dc0826d6-8065-40de-ac11-e9b09e0e62eb]: FINISHING 
[debug] [2020-04-07T21:37:36.586Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:37:36.588Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:37:36.588Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:37:36.588Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:37:36.588Z] [worker-~diagnostic~-7dbfe93e-9922-4c82-b227-519c54b52c5a]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59735.sock 
[debug] [2020-04-07T21:37:36.588Z] [worker-~diagnostic~-7dbfe93e-9922-4c82-b227-519c54b52c5a]: BUSY 
[debug] [2020-04-07T21:37:36.590Z] [worker-~diagnostic~-dc0826d6-8065-40de-ac11-e9b09e0e62eb]: exited 
[debug] [2020-04-07T21:37:36.591Z] [worker-~diagnostic~-dc0826d6-8065-40de-ac11-e9b09e0e62eb]: FINISHED 
[debug] [2020-04-07T21:37:36.986Z] [runtime-status] [59735] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:37:36.988Z] [runtime-status] [59735] Disabled runtime features: undefined 
[debug] [2020-04-07T21:37:36.990Z] [runtime-status] [59735] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:36.991Z] [runtime-status] [59735] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:36.994Z] [runtime-status] [59735] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:37:37.031Z] [runtime-status] [59735] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:37:37.031Z] [runtime-status] [59735] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:37.032Z] [runtime-status] [59735] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:37.033Z] [runtime-status] [59735] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:37.033Z] [runtime-status] [59735] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:37:37.336Z] [worker-~diagnostic~-7dbfe93e-9922-4c82-b227-519c54b52c5a]: IDLE 
[debug] [2020-04-07T21:37:48.314Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:37:49.317Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:37:49.317Z] [worker-~diagnostic~-7dbfe93e-9922-4c82-b227-519c54b52c5a]: FINISHING 
[debug] [2020-04-07T21:37:49.317Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:37:49.322Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:37:49.322Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:37:49.322Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:37:49.322Z] [worker-~diagnostic~-c86ff24e-fd74-42ab-be48-48883218c3b6]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59738.sock 
[debug] [2020-04-07T21:37:49.323Z] [worker-~diagnostic~-c86ff24e-fd74-42ab-be48-48883218c3b6]: BUSY 
[debug] [2020-04-07T21:37:49.325Z] [worker-~diagnostic~-7dbfe93e-9922-4c82-b227-519c54b52c5a]: exited 
[debug] [2020-04-07T21:37:49.325Z] [worker-~diagnostic~-7dbfe93e-9922-4c82-b227-519c54b52c5a]: FINISHED 
[debug] [2020-04-07T21:37:49.832Z] [runtime-status] [59738] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:37:49.833Z] [runtime-status] [59738] Disabled runtime features: undefined 
[debug] [2020-04-07T21:37:49.836Z] [runtime-status] [59738] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:49.837Z] [runtime-status] [59738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:49.841Z] [runtime-status] [59738] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:37:49.889Z] [runtime-status] [59738] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:37:49.890Z] [runtime-status] [59738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:49.891Z] [runtime-status] [59738] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:37:49.891Z] [runtime-status] [59738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:37:49.892Z] [runtime-status] [59738] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:37:50.279Z] [worker-~diagnostic~-c86ff24e-fd74-42ab-be48-48883218c3b6]: IDLE 
[debug] [2020-04-07T21:37:59.383Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:38:00.385Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:38:00.385Z] [worker-~diagnostic~-c86ff24e-fd74-42ab-be48-48883218c3b6]: FINISHING 
[debug] [2020-04-07T21:38:00.385Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:38:00.389Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:38:00.389Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:38:00.389Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:38:00.389Z] [worker-~diagnostic~-0b94fbdc-5d4f-4a02-98e7-48eeaff61240]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59741.sock 
[debug] [2020-04-07T21:38:00.390Z] [worker-~diagnostic~-0b94fbdc-5d4f-4a02-98e7-48eeaff61240]: BUSY 
[debug] [2020-04-07T21:38:00.391Z] [worker-~diagnostic~-c86ff24e-fd74-42ab-be48-48883218c3b6]: exited 
[debug] [2020-04-07T21:38:00.391Z] [worker-~diagnostic~-c86ff24e-fd74-42ab-be48-48883218c3b6]: FINISHED 
[debug] [2020-04-07T21:38:00.693Z] [runtime-status] [59741] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:38:00.696Z] [runtime-status] [59741] Disabled runtime features: undefined 
[debug] [2020-04-07T21:38:00.699Z] [runtime-status] [59741] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:38:00.700Z] [runtime-status] [59741] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:38:00.704Z] [runtime-status] [59741] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:38:00.739Z] [runtime-status] [59741] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:38:00.740Z] [runtime-status] [59741] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:38:00.740Z] [runtime-status] [59741] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:38:00.741Z] [runtime-status] [59741] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:38:00.741Z] [runtime-status] [59741] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:38:00.954Z] [worker-~diagnostic~-0b94fbdc-5d4f-4a02-98e7-48eeaff61240]: IDLE 
[debug] [2020-04-07T21:38:37.794Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:38:38.796Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:38:38.796Z] [worker-~diagnostic~-0b94fbdc-5d4f-4a02-98e7-48eeaff61240]: FINISHING 
[debug] [2020-04-07T21:38:38.798Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:38:38.804Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:38:38.804Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:38:38.804Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:38:38.805Z] [worker-~diagnostic~-c657bc61-70ee-422a-a2aa-46f0d0398a17]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59747.sock 
[debug] [2020-04-07T21:38:38.805Z] [worker-~diagnostic~-c657bc61-70ee-422a-a2aa-46f0d0398a17]: BUSY 
[debug] [2020-04-07T21:38:38.806Z] [worker-~diagnostic~-0b94fbdc-5d4f-4a02-98e7-48eeaff61240]: exited 
[debug] [2020-04-07T21:38:38.807Z] [worker-~diagnostic~-0b94fbdc-5d4f-4a02-98e7-48eeaff61240]: FINISHED 
[debug] [2020-04-07T21:38:39.292Z] [runtime-status] [59747] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:38:39.293Z] [runtime-status] [59747] Disabled runtime features: undefined 
[debug] [2020-04-07T21:38:39.296Z] [runtime-status] [59747] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:38:39.297Z] [runtime-status] [59747] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:38:39.300Z] [runtime-status] [59747] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:38:39.346Z] [runtime-status] [59747] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:38:39.346Z] [runtime-status] [59747] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:38:39.346Z] [runtime-status] [59747] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:38:39.346Z] [runtime-status] [59747] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:38:39.346Z] [runtime-status] [59747] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:38:39.740Z] [worker-~diagnostic~-c657bc61-70ee-422a-a2aa-46f0d0398a17]: IDLE 
[debug] [2020-04-07T21:39:31.199Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:39:32.201Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:39:32.201Z] [worker-~diagnostic~-c657bc61-70ee-422a-a2aa-46f0d0398a17]: FINISHING 
[debug] [2020-04-07T21:39:32.202Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:39:32.206Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:39:32.206Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:39:32.206Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:39:32.207Z] [worker-~diagnostic~-94810423-8a87-475c-b684-feb9db329915]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59762.sock 
[debug] [2020-04-07T21:39:32.207Z] [worker-~diagnostic~-94810423-8a87-475c-b684-feb9db329915]: BUSY 
[debug] [2020-04-07T21:39:32.208Z] [worker-~diagnostic~-c657bc61-70ee-422a-a2aa-46f0d0398a17]: exited 
[debug] [2020-04-07T21:39:32.208Z] [worker-~diagnostic~-c657bc61-70ee-422a-a2aa-46f0d0398a17]: FINISHED 
[debug] [2020-04-07T21:39:32.715Z] [runtime-status] [59762] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:39:32.717Z] [runtime-status] [59762] Disabled runtime features: undefined 
[debug] [2020-04-07T21:39:32.721Z] [runtime-status] [59762] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:39:32.721Z] [runtime-status] [59762] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:39:32.730Z] [runtime-status] [59762] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:39:32.778Z] [runtime-status] [59762] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:39:32.778Z] [runtime-status] [59762] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:39:32.779Z] [runtime-status] [59762] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:39:32.779Z] [runtime-status] [59762] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:39:32.779Z] [runtime-status] [59762] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:39:33.186Z] [worker-~diagnostic~-94810423-8a87-475c-b684-feb9db329915]: IDLE 
[debug] [2020-04-07T21:39:33.973Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:39:34.977Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:39:34.978Z] [worker-~diagnostic~-94810423-8a87-475c-b684-feb9db329915]: FINISHING 
[debug] [2020-04-07T21:39:34.978Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:39:34.982Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:39:34.982Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:39:34.982Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:39:34.982Z] [worker-~diagnostic~-4c056d71-95bc-4f3e-9e2f-7f3f75202731]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59765.sock 
[debug] [2020-04-07T21:39:34.982Z] [worker-~diagnostic~-4c056d71-95bc-4f3e-9e2f-7f3f75202731]: BUSY 
[debug] [2020-04-07T21:39:34.984Z] [worker-~diagnostic~-94810423-8a87-475c-b684-feb9db329915]: exited 
[debug] [2020-04-07T21:39:34.984Z] [worker-~diagnostic~-94810423-8a87-475c-b684-feb9db329915]: FINISHED 
[debug] [2020-04-07T21:39:35.251Z] [runtime-status] [59765] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:39:35.253Z] [runtime-status] [59765] Disabled runtime features: undefined 
[debug] [2020-04-07T21:39:35.254Z] [runtime-status] [59765] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:39:35.255Z] [runtime-status] [59765] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:39:35.258Z] [runtime-status] [59765] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:39:35.289Z] [runtime-status] [59765] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:39:35.290Z] [runtime-status] [59765] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:39:35.290Z] [runtime-status] [59765] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:39:35.290Z] [runtime-status] [59765] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:39:35.290Z] [runtime-status] [59765] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:39:35.512Z] [worker-~diagnostic~-4c056d71-95bc-4f3e-9e2f-7f3f75202731]: IDLE 
[debug] [2020-04-07T21:40:02.547Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:40:03.553Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:40:03.553Z] [worker-~diagnostic~-4c056d71-95bc-4f3e-9e2f-7f3f75202731]: FINISHING 
[debug] [2020-04-07T21:40:03.553Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:40:03.556Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:40:03.556Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:40:03.556Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:40:03.556Z] [worker-~diagnostic~-360cddd3-167e-44b8-8a67-f961c7117e8a]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59771.sock 
[debug] [2020-04-07T21:40:03.556Z] [worker-~diagnostic~-360cddd3-167e-44b8-8a67-f961c7117e8a]: BUSY 
[debug] [2020-04-07T21:40:03.559Z] [worker-~diagnostic~-4c056d71-95bc-4f3e-9e2f-7f3f75202731]: exited 
[debug] [2020-04-07T21:40:03.559Z] [worker-~diagnostic~-4c056d71-95bc-4f3e-9e2f-7f3f75202731]: FINISHED 
[debug] [2020-04-07T21:40:03.863Z] [runtime-status] [59771] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:40:03.864Z] [runtime-status] [59771] Disabled runtime features: undefined 
[debug] [2020-04-07T21:40:03.867Z] [runtime-status] [59771] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:40:03.867Z] [runtime-status] [59771] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:40:03.870Z] [runtime-status] [59771] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:40:03.904Z] [runtime-status] [59771] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:40:03.904Z] [runtime-status] [59771] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:40:03.905Z] [runtime-status] [59771] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:40:03.905Z] [runtime-status] [59771] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:40:03.905Z] [runtime-status] [59771] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:40:04.111Z] [worker-~diagnostic~-360cddd3-167e-44b8-8a67-f961c7117e8a]: IDLE 
[debug] [2020-04-07T21:40:19.595Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:40:20.598Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:40:20.598Z] [worker-~diagnostic~-360cddd3-167e-44b8-8a67-f961c7117e8a]: FINISHING 
[debug] [2020-04-07T21:40:20.599Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:40:20.603Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:40:20.603Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:40:20.603Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:40:20.603Z] [worker-~diagnostic~-31698996-c8b0-4e5a-b2da-fc43e265e15a]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59774.sock 
[debug] [2020-04-07T21:40:20.603Z] [worker-~diagnostic~-31698996-c8b0-4e5a-b2da-fc43e265e15a]: BUSY 
[debug] [2020-04-07T21:40:20.608Z] [worker-~diagnostic~-360cddd3-167e-44b8-8a67-f961c7117e8a]: exited 
[debug] [2020-04-07T21:40:20.608Z] [worker-~diagnostic~-360cddd3-167e-44b8-8a67-f961c7117e8a]: FINISHED 
[debug] [2020-04-07T21:40:20.881Z] [runtime-status] [59774] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:40:20.881Z] [runtime-status] [59774] Disabled runtime features: undefined 
[debug] [2020-04-07T21:40:20.884Z] [runtime-status] [59774] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:40:20.884Z] [runtime-status] [59774] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:40:20.888Z] [runtime-status] [59774] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:40:20.922Z] [runtime-status] [59774] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:40:20.923Z] [runtime-status] [59774] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:40:20.924Z] [runtime-status] [59774] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:40:20.924Z] [runtime-status] [59774] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:40:20.924Z] [runtime-status] [59774] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:40:21.161Z] [worker-~diagnostic~-31698996-c8b0-4e5a-b2da-fc43e265e15a]: IDLE 
[debug] [2020-04-07T21:41:07.170Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:41:08.171Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:41:08.171Z] [worker-~diagnostic~-31698996-c8b0-4e5a-b2da-fc43e265e15a]: FINISHING 
[debug] [2020-04-07T21:41:08.172Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:41:08.175Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:41:08.175Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:41:08.175Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:41:08.175Z] [worker-~diagnostic~-428ca6e9-b50b-4db3-b511-244f11454782]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59786.sock 
[debug] [2020-04-07T21:41:08.175Z] [worker-~diagnostic~-428ca6e9-b50b-4db3-b511-244f11454782]: BUSY 
[debug] [2020-04-07T21:41:08.177Z] [worker-~diagnostic~-31698996-c8b0-4e5a-b2da-fc43e265e15a]: exited 
[debug] [2020-04-07T21:41:08.177Z] [worker-~diagnostic~-31698996-c8b0-4e5a-b2da-fc43e265e15a]: FINISHED 
[debug] [2020-04-07T21:41:08.439Z] [runtime-status] [59786] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:41:08.440Z] [runtime-status] [59786] Disabled runtime features: undefined 
[debug] [2020-04-07T21:41:08.442Z] [runtime-status] [59786] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:41:08.444Z] [runtime-status] [59786] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:08.447Z] [runtime-status] [59786] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:41:08.477Z] [runtime-status] [59786] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:41:08.477Z] [runtime-status] [59786] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:08.478Z] [runtime-status] [59786] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:41:08.478Z] [runtime-status] [59786] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:08.478Z] [runtime-status] [59786] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:41:08.691Z] [worker-~diagnostic~-428ca6e9-b50b-4db3-b511-244f11454782]: IDLE 
[debug] [2020-04-07T21:41:20.699Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:41:21.700Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:41:21.700Z] [worker-~diagnostic~-428ca6e9-b50b-4db3-b511-244f11454782]: FINISHING 
[debug] [2020-04-07T21:41:21.700Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:41:21.704Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:41:21.705Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:41:21.705Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:41:21.705Z] [worker-~diagnostic~-62f0f306-ba63-4759-ae53-623ba9a41322]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59790.sock 
[debug] [2020-04-07T21:41:21.705Z] [worker-~diagnostic~-62f0f306-ba63-4759-ae53-623ba9a41322]: BUSY 
[debug] [2020-04-07T21:41:21.708Z] [worker-~diagnostic~-428ca6e9-b50b-4db3-b511-244f11454782]: exited 
[debug] [2020-04-07T21:41:21.708Z] [worker-~diagnostic~-428ca6e9-b50b-4db3-b511-244f11454782]: FINISHED 
[debug] [2020-04-07T21:41:21.972Z] [runtime-status] [59790] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:41:21.973Z] [runtime-status] [59790] Disabled runtime features: undefined 
[debug] [2020-04-07T21:41:21.975Z] [runtime-status] [59790] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:41:21.976Z] [runtime-status] [59790] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:21.980Z] [runtime-status] [59790] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:41:22.012Z] [runtime-status] [59790] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:41:22.013Z] [runtime-status] [59790] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:22.013Z] [runtime-status] [59790] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:41:22.014Z] [runtime-status] [59790] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:22.014Z] [runtime-status] [59790] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:41:22.219Z] [worker-~diagnostic~-62f0f306-ba63-4759-ae53-623ba9a41322]: IDLE 
[debug] [2020-04-07T21:41:40.204Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:41:41.206Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:41:41.207Z] [worker-~diagnostic~-62f0f306-ba63-4759-ae53-623ba9a41322]: FINISHING 
[debug] [2020-04-07T21:41:41.207Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:41:41.211Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:41:41.211Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:41:41.211Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:41:41.211Z] [worker-~diagnostic~-cccab66f-9f6d-4b16-ae81-192a784a5f02]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59793.sock 
[debug] [2020-04-07T21:41:41.211Z] [worker-~diagnostic~-cccab66f-9f6d-4b16-ae81-192a784a5f02]: BUSY 
[debug] [2020-04-07T21:41:41.213Z] [worker-~diagnostic~-62f0f306-ba63-4759-ae53-623ba9a41322]: exited 
[debug] [2020-04-07T21:41:41.213Z] [worker-~diagnostic~-62f0f306-ba63-4759-ae53-623ba9a41322]: FINISHED 
[debug] [2020-04-07T21:41:41.473Z] [runtime-status] [59793] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:41:41.474Z] [runtime-status] [59793] Disabled runtime features: undefined 
[debug] [2020-04-07T21:41:41.476Z] [runtime-status] [59793] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:41:41.477Z] [runtime-status] [59793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:41.479Z] [runtime-status] [59793] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:41:41.509Z] [runtime-status] [59793] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:41:41.509Z] [runtime-status] [59793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:41.509Z] [runtime-status] [59793] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:41:41.509Z] [runtime-status] [59793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:41:41.509Z] [runtime-status] [59793] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:41:41.705Z] [worker-~diagnostic~-cccab66f-9f6d-4b16-ae81-192a784a5f02]: IDLE 
[debug] [2020-04-07T21:41:57.607Z] Apr 07, 2020 2:41:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:41:57.735Z] Apr 07, 2020 2:41:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:41:58.043Z] Apr 07, 2020 2:41:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:41:58.087Z] Apr 07, 2020 2:41:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:41:58.124Z] Apr 07, 2020 2:41:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:41:58.165Z] Apr 07, 2020 2:41:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:41:58.225Z] Apr 07, 2020 2:41:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:42:10.511Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:42:11.516Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:42:11.516Z] [worker-~diagnostic~-cccab66f-9f6d-4b16-ae81-192a784a5f02]: FINISHING 
[debug] [2020-04-07T21:42:11.516Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:42:11.520Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:42:11.520Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:42:11.520Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:42:11.520Z] [worker-~diagnostic~-f05f8ccb-8290-44b0-a3fe-a9e83e6ebd24]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59812.sock 
[debug] [2020-04-07T21:42:11.520Z] [worker-~diagnostic~-f05f8ccb-8290-44b0-a3fe-a9e83e6ebd24]: BUSY 
[debug] [2020-04-07T21:42:11.524Z] [worker-~diagnostic~-cccab66f-9f6d-4b16-ae81-192a784a5f02]: exited 
[debug] [2020-04-07T21:42:11.524Z] [worker-~diagnostic~-cccab66f-9f6d-4b16-ae81-192a784a5f02]: FINISHED 
[debug] [2020-04-07T21:42:11.791Z] [runtime-status] [59812] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:42:11.793Z] [runtime-status] [59812] Disabled runtime features: undefined 
[debug] [2020-04-07T21:42:11.795Z] [runtime-status] [59812] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:42:11.796Z] [runtime-status] [59812] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:42:11.799Z] [runtime-status] [59812] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:42:11.831Z] [runtime-status] [59812] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:42:11.831Z] [runtime-status] [59812] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:42:11.832Z] [runtime-status] [59812] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:42:11.832Z] [runtime-status] [59812] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:42:11.832Z] [runtime-status] [59812] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:42:12.046Z] [worker-~diagnostic~-f05f8ccb-8290-44b0-a3fe-a9e83e6ebd24]: IDLE 
[debug] [2020-04-07T21:42:26.082Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T21:42:27.082Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T21:42:27.082Z] [worker-~diagnostic~-f05f8ccb-8290-44b0-a3fe-a9e83e6ebd24]: FINISHING 
[debug] [2020-04-07T21:42:27.082Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T21:42:27.085Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T21:42:27.085Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T21:42:27.085Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T21:42:27.085Z] [worker-~diagnostic~-64597cdf-e393-4c9e-84fb-4609e6d61422]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_59817.sock 
[debug] [2020-04-07T21:42:27.085Z] [worker-~diagnostic~-64597cdf-e393-4c9e-84fb-4609e6d61422]: BUSY 
[debug] [2020-04-07T21:42:27.087Z] [worker-~diagnostic~-f05f8ccb-8290-44b0-a3fe-a9e83e6ebd24]: exited 
[debug] [2020-04-07T21:42:27.087Z] [worker-~diagnostic~-f05f8ccb-8290-44b0-a3fe-a9e83e6ebd24]: FINISHED 
[debug] [2020-04-07T21:42:27.340Z] [runtime-status] [59817] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T21:42:27.342Z] [runtime-status] [59817] Disabled runtime features: undefined 
[debug] [2020-04-07T21:42:27.344Z] [runtime-status] [59817] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:42:27.344Z] [runtime-status] [59817] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:42:27.347Z] [runtime-status] [59817] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T21:42:27.381Z] [runtime-status] [59817] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T21:42:27.381Z] [runtime-status] [59817] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:42:27.382Z] [runtime-status] [59817] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T21:42:27.382Z] [runtime-status] [59817] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T21:42:27.382Z] [runtime-status] [59817] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T21:42:27.615Z] [worker-~diagnostic~-64597cdf-e393-4c9e-84fb-4609e6d61422]: IDLE 
[debug] [2020-04-07T21:42:30.894Z] Apr 07, 2020 2:42:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:42:30.997Z] Apr 07, 2020 2:42:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:42:31.341Z] Apr 07, 2020 2:42:31 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:42:31.394Z] Apr 07, 2020 2:42:31 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:42:31.440Z] Apr 07, 2020 2:42:31 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:42:31.485Z] Apr 07, 2020 2:42:31 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:42:31.560Z] Apr 07, 2020 2:42:31 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:42:31.622Z] Apr 07, 2020 2:42:31 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property uid is undefined on object. for 'create' @ L71

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:43:00.007Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.id)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.id)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.uid != request.resource.data.pinUserRef.uid\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:43:00.012Z] Apr 07, 2020 2:43:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:43:00.082Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:43:05.542Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isUser(request.resource.data.pinUserRef.id)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.id)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.id != request.resource.data.pinUserRef.id\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:43:05.545Z] Apr 07, 2020 2:43:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:43:05.606Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:43:11.257Z] Apr 07, 2020 2:43:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:43:11.310Z] Apr 07, 2020 2:43:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:43:11.576Z] Apr 07, 2020 2:43:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:43:11.613Z] Apr 07, 2020 2:43:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:43:11.644Z] Apr 07, 2020 2:43:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:43:11.677Z] Apr 07, 2020 2:43:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:43:11.729Z] Apr 07, 2020 2:43:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:43:11.774Z] Apr 07, 2020 2:43:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property id is undefined on object. for 'create' @ L71

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:45:04.390Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef = '/users/' + \n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.id)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.id != request.resource.data.pinUserRef.id\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:45:04.396Z] Apr 07, 2020 2:45:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:45:04.490Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"366"}
[warn] ⚠  ../firebase/firestore.rules:21:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:45:17.616Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef = /users/$\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.id)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.id != request.resource.data.pinUserRef.id\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:45:17.620Z] Apr 07, 2020 2:45:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:45:17.664Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"366"}
[warn] ⚠  ../firebase/firestore.rules:21:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:45:43.249Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef = /users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isUser(request.resource.data.cavUserRef.id)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.id != request.resource.data.pinUserRef.id\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:45:43.253Z] Apr 07, 2020 2:45:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:45:43.288Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"366"}
[warn] ⚠  ../firebase/firestore.rules:21:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:45:57.102Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef = /users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef = /users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef.id != request.resource.data.pinUserRef.id\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:45:57.106Z] Apr 07, 2020 2:45:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:45:57.150Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"715"}
[warn] ⚠  ../firebase/firestore.rules:21:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[warn] ⚠  ../firebase/firestore.rules:26:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:46:04.666Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef = /users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef = /users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:46:04.670Z] Apr 07, 2020 2:46:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:46:04.732Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"715"}
[warn] ⚠  ../firebase/firestore.rules:21:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[warn] ⚠  ../firebase/firestore.rules:26:37 - ERROR mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:46:12.592Z] Apr 07, 2020 2:46:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:46:12.629Z] Apr 07, 2020 2:46:12 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: Error compiling rules:
L21:37 mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}
L26:37 mismatched input '=' expecting {'&&', '.', '==', '>', '>=', '[', '<', '<=', '-', '%', '!=', '||', '+', '}', ';', '/', '*', '?', 'in', 'is'}

[debug] [2020-04-07T21:46:12.636Z] Apr 07, 2020 2:46:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:46:12.902Z] Apr 07, 2020 2:46:12 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Null value error. for 'create' @ L56

[debug] [2020-04-07T21:46:12.938Z] Apr 07, 2020 2:46:12 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L56

[debug] [2020-04-07T21:46:12.972Z] Apr 07, 2020 2:46:12 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:46:13.008Z] Apr 07, 2020 2:46:13 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property averageRating is undefined on object. for 'create' @ L56

[debug] [2020-04-07T21:46:13.064Z] Apr 07, 2020 2:46:13 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, false for 'create' @ L63

[debug] [2020-04-07T21:46:13.111Z] Apr 07, 2020 2:46:13 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L49, Property id is undefined on object. for 'create' @ L71

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:46:43.066Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:46:43.070Z] Apr 07, 2020 2:46:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:46:43.136Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:15:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:46:48.544Z] Apr 07, 2020 2:46:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:46:48.586Z] Apr 07, 2020 2:46:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:46:48.843Z] Apr 07, 2020 2:46:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L51, Null value error. for 'create' @ L58

[debug] [2020-04-07T21:46:48.880Z] Apr 07, 2020 2:46:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L51, false for 'create' @ L58

[debug] [2020-04-07T21:46:48.914Z] Apr 07, 2020 2:46:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L51, false for 'create' @ L65

[debug] [2020-04-07T21:46:48.948Z] Apr 07, 2020 2:46:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L51, Property averageRating is undefined on object. for 'create' @ L58

[debug] [2020-04-07T21:46:48.999Z] Apr 07, 2020 2:46:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L51, false for 'create' @ L65

[debug] [2020-04-07T21:46:49.055Z] Apr 07, 2020 2:46:49 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L51, false for 'create' @ L73

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:47:37.863Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:47:37.867Z] Apr 07, 2020 2:47:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:47:37.894Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:50:22.482Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:50:22.486Z] Apr 07, 2020 2:50:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:50:22.515Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"748"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:23:52 - WARNING Invalid variable name: database.
[warn] ⚠  ../firebase/firestore.rules:28:52 - WARNING Invalid variable name: database.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:50:47.978Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(request)\n                    || currentUserIsCurrentCAVRef(request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:50:47.980Z] Apr 07, 2020 2:50:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:50:48.007Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"1139"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:72:22 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentPINRef.
[warn] ⚠  ../firebase/firestore.rules:73:24 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentCAVRef.
[warn] ⚠  ../firebase/firestore.rules:75:42 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentCAVRef.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:51:03.067Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request)\n                    || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:51:03.071Z] Apr 07, 2020 2:51:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:51:03.099Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:51:08.957Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /database/$(database)/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:51:08.960Z] Apr 07, 2020 2:51:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:51:08.986Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:54:23.041Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == /database/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == /database/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:54:23.044Z] Apr 07, 2020 2:54:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:54:23.071Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:54:30.312Z] Apr 07, 2020 2:54:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:54:30.339Z] Apr 07, 2020 2:54:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:54:30.624Z] Apr 07, 2020 2:54:30 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Null value error. for 'create' @ L60

[debug] [2020-04-07T21:54:30.665Z] Apr 07, 2020 2:54:30 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L60

[debug] [2020-04-07T21:54:30.701Z] Apr 07, 2020 2:54:30 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L67

[debug] [2020-04-07T21:54:30.737Z] Apr 07, 2020 2:54:30 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Property averageRating is undefined on object. for 'create' @ L60

[debug] [2020-04-07T21:54:30.788Z] Apr 07, 2020 2:54:30 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L67

[debug] [2020-04-07T21:54:30.833Z] Apr 07, 2020 2:54:30 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L74

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:56:10.977Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef == users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef == users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:56:10.980Z] Apr 07, 2020 2:56:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:56:10.998Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"519"}
[warn] ⚠  ../firebase/firestore.rules:23:45 - ERROR mismatched input '/' expecting {'}', ';'}
[warn] ⚠  ../firebase/firestore.rules:28:45 - ERROR mismatched input '/' expecting {'}', ';'}
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:56:17.907Z] Apr 07, 2020 2:56:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:56:17.919Z] Apr 07, 2020 2:56:17 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: Error compiling rules:
L23:45 mismatched input '/' expecting {'}', ';'}
L28:45 mismatched input '/' expecting {'}', ';'}

[debug] [2020-04-07T21:56:17.925Z] Apr 07, 2020 2:56:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:56:18.186Z] Apr 07, 2020 2:56:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Null value error. for 'create' @ L60

[debug] [2020-04-07T21:56:18.225Z] Apr 07, 2020 2:56:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L60

[debug] [2020-04-07T21:56:18.265Z] Apr 07, 2020 2:56:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L67

[debug] [2020-04-07T21:56:18.302Z] Apr 07, 2020 2:56:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Property averageRating is undefined on object. for 'create' @ L60

[debug] [2020-04-07T21:56:18.355Z] Apr 07, 2020 2:56:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L67

[debug] [2020-04-07T21:56:18.400Z] Apr 07, 2020 2:56:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L74

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:57:03.021Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef.path == 'users/$(request.auth.uid)''\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:57:03.023Z] Apr 07, 2020 2:57:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:57:03.053Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"242"}
[warn] ⚠  ../firebase/firestore.rules:28:72 - ERROR Unexpected '''.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:57:04.127Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.pinUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:57:04.129Z] Apr 07, 2020 2:57:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:57:04.154Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"736"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:21:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:26:37 - WARNING Unused variable: database.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:57:11.352Z] Apr 07, 2020 2:57:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:57:11.376Z] Apr 07, 2020 2:57:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:57:11.622Z] Apr 07, 2020 2:57:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Null value error. for 'create' @ L60

[debug] [2020-04-07T21:57:11.660Z] Apr 07, 2020 2:57:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L60

[debug] [2020-04-07T21:57:11.691Z] Apr 07, 2020 2:57:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L67

[debug] [2020-04-07T21:57:11.723Z] Apr 07, 2020 2:57:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Property averageRating is undefined on object. for 'create' @ L60

[debug] [2020-04-07T21:57:11.771Z] Apr 07, 2020 2:57:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, false for 'create' @ L67

[debug] [2020-04-07T21:57:11.816Z] Apr 07, 2020 2:57:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L53, Property path is undefined on object. for 'create' @ L74

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:59:07.642Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   request.resource.data.cavUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:59:07.644Z] Apr 07, 2020 2:59:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:59:07.668Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"736"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:21:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:27:37 - WARNING Unused variable: database.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T21:59:14.896Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   ('cavUserRef' in request.resource.data) &&\n   request.resource.data.cavUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T21:59:14.898Z] Apr 07, 2020 2:59:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T21:59:14.922Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"736"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:21:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:27:37 - WARNING Unused variable: database.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T21:59:20.726Z] Apr 07, 2020 2:59:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:59:20.752Z] Apr 07, 2020 2:59:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T21:59:21.011Z] Apr 07, 2020 2:59:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T21:59:21.046Z] Apr 07, 2020 2:59:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T21:59:21.081Z] Apr 07, 2020 2:59:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T21:59:21.112Z] Apr 07, 2020 2:59:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T21:59:21.164Z] Apr 07, 2020 2:59:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T21:59:21.211Z] Apr 07, 2020 2:59:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property path is undefined on object. for 'create' @ L76

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:02:41.881Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   ('cavUserRef' in request.resource.data) &&\n   request.resource.data.cavUserRef.path == path('users/$(request.auth.uid)'\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:02:41.884Z] Apr 07, 2020 3:02:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:02:41.902Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"241"}
[warn] ⚠  ../firebase/firestore.rules:31:1 - ERROR Unexpected '}'.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:03:20.172Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef.path == 'users/$(request.auth.uid)'\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   ('cavUserRef' in request.resource.data) &&\n   request.resource.data.cavUserRef == path('/databases/$(database)/documents/users/$(request.auth.uid)')\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:03:20.178Z] Apr 07, 2020 3:03:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:03:20.217Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"736"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:21:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:27:37 - WARNING Unused variable: database.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:03:55.167Z] Apr 07, 2020 3:03:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:03:55.195Z] Apr 07, 2020 3:03:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:03:55.463Z] Apr 07, 2020 3:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:03:55.500Z] Apr 07, 2020 3:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:03:55.532Z] Apr 07, 2020 3:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:03:55.568Z] Apr 07, 2020 3:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:03:55.623Z] Apr 07, 2020 3:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:03:55.667Z] Apr 07, 2020 3:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L76

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:04:22.964Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef == path('/databases/$(database)/documents/users/$(request.auth.uid)')\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   ('cavUserRef' in request.resource.data) &&\n   request.resource.data.cavUserRef == path('/databases/$(database)/documents/users/$(request.auth.uid)')\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:04:22.969Z] Apr 07, 2020 3:04:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:04:23.002Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"736"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:21:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:27:37 - WARNING Unused variable: database.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:06:24.575Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   ('cavUserRef' in request.resource.data) &&\n   request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:06:24.578Z] Apr 07, 2020 3:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:06:24.605Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:08:01.683Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef[] == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n   ('cavUserRef' in request.resource.data) &&\n   request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:08:01.686Z] Apr 07, 2020 3:08:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:08:01.706Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"242"}
[warn] ⚠  ../firebase/firestore.rules:24:37 - ERROR Unexpected ']'.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:10:46.756Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n   request.resource.data.pinUserRef[4] == 'users' &&\n   request.resource.data.pinUserRef[5] == request.auth.uid\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('pinUserRef' in request.resource.data) &&\n     // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n     request.resource.data.cavUserRef[4] == 'users' &&\n     request.resource.data.cavUserRef[5] == request.auth.uid\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:10:46.759Z] Apr 07, 2020 3:10:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:10:46.790Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"791"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:29:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:78:22 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentPINRef.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:10:50.636Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n   request.resource.data.pinUserRef[4] == 'users' &&\n   request.resource.data.pinUserRef[5] == request.auth.uid\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n     request.resource.data.cavUserRef[4] == 'users' &&\n     request.resource.data.cavUserRef[5] == request.auth.uid\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:10:50.639Z] Apr 07, 2020 3:10:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:10:50.667Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"791"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:29:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:78:22 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentPINRef.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:17:22.159Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n   request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n     request.resource.data.cavUserRef[4] == 'users' &&\n     request.resource.data.cavUserRef[5] == request.auth.uid\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:17:22.162Z] Apr 07, 2020 3:17:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:17:22.190Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"1035"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:25:53 - WARNING Invalid variable name: database.
[warn] ⚠  ../firebase/firestore.rules:28:37 - WARNING Unused variable: database.
[warn] ⚠  ../firebase/firestore.rules:77:22 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentPINRef.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:17:34.420Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n   request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     // Sample Ref with 5 segments - /databases/$(database)/documents/users/$(request.auth.uid)\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:17:34.424Z] Apr 07, 2020 3:17:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:17:34.449Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"797"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:25:53 - WARNING Invalid variable name: database.
[warn] ⚠  ../firebase/firestore.rules:76:22 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentPINRef.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:17:40.087Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:17:40.089Z] Apr 07, 2020 3:17:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:17:40.112Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"797"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:24:53 - WARNING Invalid variable name: database.
[warn] ⚠  ../firebase/firestore.rules:74:22 - WARNING Incorrect number of arguments supplied to function: currentUserIsCurrentPINRef.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:19:24.697Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:19:25.700Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:19:25.701Z] [worker-~diagnostic~-64597cdf-e393-4c9e-84fb-4609e6d61422]: FINISHING 
[debug] [2020-04-07T22:19:25.701Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:19:25.707Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:19:25.707Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:19:25.707Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:19:25.708Z] [worker-~diagnostic~-ef644907-b3d3-4322-a75f-4a20feaa8f36]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60152.sock 
[debug] [2020-04-07T22:19:25.708Z] [worker-~diagnostic~-ef644907-b3d3-4322-a75f-4a20feaa8f36]: BUSY 
[debug] [2020-04-07T22:19:25.709Z] [worker-~diagnostic~-64597cdf-e393-4c9e-84fb-4609e6d61422]: exited 
[debug] [2020-04-07T22:19:25.709Z] [worker-~diagnostic~-64597cdf-e393-4c9e-84fb-4609e6d61422]: FINISHED 
[debug] [2020-04-07T22:19:26.287Z] [runtime-status] [60152] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:19:26.288Z] [runtime-status] [60152] Disabled runtime features: undefined 
[debug] [2020-04-07T22:19:26.296Z] [runtime-status] [60152] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:19:26.298Z] [runtime-status] [60152] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:19:26.303Z] [runtime-status] [60152] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:19:26.368Z] [runtime-status] [60152] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:19:26.369Z] [runtime-status] [60152] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:19:26.372Z] [runtime-status] [60152] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:19:26.375Z] [runtime-status] [60152] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:19:26.375Z] [runtime-status] [60152] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:19:26.842Z] [worker-~diagnostic~-ef644907-b3d3-4322-a75f-4a20feaa8f36]: IDLE 
[debug] [2020-04-07T22:19:35.804Z] Apr 07, 2020 3:19:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:19:35.849Z] Apr 07, 2020 3:19:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:19:36.772Z] Apr 07, 2020 3:19:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:19:36.923Z] Apr 07, 2020 3:19:36 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:19:37.059Z] Apr 07, 2020 3:19:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:19:37.196Z] Apr 07, 2020 3:19:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:19:37.388Z] Apr 07, 2020 3:19:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:20:32.363Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:20:33.367Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:20:33.367Z] [worker-~diagnostic~-ef644907-b3d3-4322-a75f-4a20feaa8f36]: FINISHING 
[debug] [2020-04-07T22:20:33.367Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:20:33.370Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:20:33.370Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:20:33.370Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:20:33.371Z] [worker-~diagnostic~-4d35fdc7-15e0-44a7-b18d-85e6c0d1ca27]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60176.sock 
[debug] [2020-04-07T22:20:33.371Z] [worker-~diagnostic~-4d35fdc7-15e0-44a7-b18d-85e6c0d1ca27]: BUSY 
[debug] [2020-04-07T22:20:33.371Z] [worker-~diagnostic~-ef644907-b3d3-4322-a75f-4a20feaa8f36]: exited 
[debug] [2020-04-07T22:20:33.371Z] [worker-~diagnostic~-ef644907-b3d3-4322-a75f-4a20feaa8f36]: FINISHED 
[debug] [2020-04-07T22:20:33.626Z] [runtime-status] [60176] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:20:33.629Z] [runtime-status] [60176] Disabled runtime features: undefined 
[debug] [2020-04-07T22:20:33.630Z] [runtime-status] [60176] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:20:33.630Z] [runtime-status] [60176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:20:33.635Z] [runtime-status] [60176] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:20:33.663Z] [runtime-status] [60176] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:20:33.663Z] [runtime-status] [60176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:20:33.665Z] [runtime-status] [60176] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:20:33.665Z] [runtime-status] [60176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:20:33.665Z] [runtime-status] [60176] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:20:33.882Z] [worker-~diagnostic~-4d35fdc7-15e0-44a7-b18d-85e6c0d1ca27]: IDLE 
[debug] [2020-04-07T22:20:50.376Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:20:51.377Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:20:51.377Z] [worker-~diagnostic~-4d35fdc7-15e0-44a7-b18d-85e6c0d1ca27]: FINISHING 
[debug] [2020-04-07T22:20:51.377Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:20:51.380Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:20:51.380Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:20:51.380Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:20:51.380Z] [worker-~diagnostic~-6eb5cfd5-9318-4395-aa16-4153eb9f87b8]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60193.sock 
[debug] [2020-04-07T22:20:51.380Z] [worker-~diagnostic~-6eb5cfd5-9318-4395-aa16-4153eb9f87b8]: BUSY 
[debug] [2020-04-07T22:20:51.383Z] [worker-~diagnostic~-4d35fdc7-15e0-44a7-b18d-85e6c0d1ca27]: exited 
[debug] [2020-04-07T22:20:51.383Z] [worker-~diagnostic~-4d35fdc7-15e0-44a7-b18d-85e6c0d1ca27]: FINISHED 
[debug] [2020-04-07T22:20:51.642Z] [runtime-status] [60193] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:20:51.642Z] [runtime-status] [60193] Disabled runtime features: undefined 
[debug] [2020-04-07T22:20:51.643Z] [runtime-status] [60193] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:20:51.645Z] [runtime-status] [60193] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:20:51.648Z] [runtime-status] [60193] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:20:51.677Z] [runtime-status] [60193] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:20:51.677Z] [runtime-status] [60193] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:20:51.678Z] [runtime-status] [60193] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:20:51.678Z] [runtime-status] [60193] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:20:51.678Z] [runtime-status] [60193] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:20:51.887Z] [worker-~diagnostic~-6eb5cfd5-9318-4395-aa16-4153eb9f87b8]: IDLE 
[debug] [2020-04-07T22:20:53.624Z] Apr 07, 2020 3:20:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:20:53.659Z] Apr 07, 2020 3:20:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:20:53.918Z] Apr 07, 2020 3:20:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:20:53.955Z] Apr 07, 2020 3:20:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:20:53.988Z] Apr 07, 2020 3:20:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:20:54.023Z] Apr 07, 2020 3:20:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:20:54.071Z] Apr 07, 2020 3:20:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:21:26.832Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:21:27.832Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:21:27.832Z] [worker-~diagnostic~-6eb5cfd5-9318-4395-aa16-4153eb9f87b8]: FINISHING 
[debug] [2020-04-07T22:21:27.832Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:21:27.837Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:21:27.838Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:21:27.838Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:21:27.838Z] [worker-~diagnostic~-1390cddf-d367-461b-b19e-ab5df3da5e3d]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60199.sock 
[debug] [2020-04-07T22:21:27.838Z] [worker-~diagnostic~-1390cddf-d367-461b-b19e-ab5df3da5e3d]: BUSY 
[debug] [2020-04-07T22:21:27.839Z] [worker-~diagnostic~-6eb5cfd5-9318-4395-aa16-4153eb9f87b8]: exited 
[debug] [2020-04-07T22:21:27.839Z] [worker-~diagnostic~-6eb5cfd5-9318-4395-aa16-4153eb9f87b8]: FINISHED 
[debug] [2020-04-07T22:21:28.106Z] [runtime-status] [60199] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:21:28.110Z] [runtime-status] [60199] Disabled runtime features: undefined 
[debug] [2020-04-07T22:21:28.111Z] [runtime-status] [60199] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:21:28.111Z] [runtime-status] [60199] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:21:28.114Z] [runtime-status] [60199] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:21:28.142Z] [runtime-status] [60199] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:21:28.142Z] [runtime-status] [60199] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:21:28.142Z] [runtime-status] [60199] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:21:28.142Z] [runtime-status] [60199] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:21:28.143Z] [runtime-status] [60199] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:21:28.335Z] [worker-~diagnostic~-1390cddf-d367-461b-b19e-ab5df3da5e3d]: IDLE 
[debug] [2020-04-07T22:21:31.931Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:21:32.931Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:21:32.932Z] [worker-~diagnostic~-1390cddf-d367-461b-b19e-ab5df3da5e3d]: FINISHING 
[debug] [2020-04-07T22:21:32.932Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:21:32.936Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:21:32.936Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:21:32.936Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:21:32.936Z] [worker-~diagnostic~-aecc30cb-77bc-4977-a2bf-7cd4acd5a8fa]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60201.sock 
[debug] [2020-04-07T22:21:32.936Z] [worker-~diagnostic~-aecc30cb-77bc-4977-a2bf-7cd4acd5a8fa]: BUSY 
[debug] [2020-04-07T22:21:32.938Z] [worker-~diagnostic~-1390cddf-d367-461b-b19e-ab5df3da5e3d]: exited 
[debug] [2020-04-07T22:21:32.938Z] [worker-~diagnostic~-1390cddf-d367-461b-b19e-ab5df3da5e3d]: FINISHED 
[debug] [2020-04-07T22:21:33.202Z] [runtime-status] [60201] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:21:33.203Z] [runtime-status] [60201] Disabled runtime features: undefined 
[debug] [2020-04-07T22:21:33.205Z] [runtime-status] [60201] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:21:33.206Z] [runtime-status] [60201] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:21:33.210Z] [runtime-status] [60201] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:21:33.239Z] [runtime-status] [60201] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:21:33.239Z] [runtime-status] [60201] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:21:33.240Z] [runtime-status] [60201] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:21:33.240Z] [runtime-status] [60201] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:21:33.240Z] [runtime-status] [60201] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:21:33.438Z] [worker-~diagnostic~-aecc30cb-77bc-4977-a2bf-7cd4acd5a8fa]: IDLE 
[debug] [2020-04-07T22:22:15.074Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:22:16.078Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:22:16.078Z] [worker-~diagnostic~-aecc30cb-77bc-4977-a2bf-7cd4acd5a8fa]: FINISHING 
[debug] [2020-04-07T22:22:16.078Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:22:16.081Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:22:16.081Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:22:16.081Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:22:16.082Z] [worker-~diagnostic~-81a499c9-b577-4ff7-9f15-b7ed80253d4d]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60205.sock 
[debug] [2020-04-07T22:22:16.082Z] [worker-~diagnostic~-81a499c9-b577-4ff7-9f15-b7ed80253d4d]: BUSY 
[debug] [2020-04-07T22:22:16.083Z] [worker-~diagnostic~-aecc30cb-77bc-4977-a2bf-7cd4acd5a8fa]: exited 
[debug] [2020-04-07T22:22:16.083Z] [worker-~diagnostic~-aecc30cb-77bc-4977-a2bf-7cd4acd5a8fa]: FINISHED 
[debug] [2020-04-07T22:22:16.356Z] [runtime-status] [60205] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:22:16.357Z] [runtime-status] [60205] Disabled runtime features: undefined 
[debug] [2020-04-07T22:22:16.359Z] [runtime-status] [60205] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:22:16.360Z] [runtime-status] [60205] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:16.363Z] [runtime-status] [60205] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:22:16.393Z] [runtime-status] [60205] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:22:16.394Z] [runtime-status] [60205] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:16.394Z] [runtime-status] [60205] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:22:16.394Z] [runtime-status] [60205] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:16.395Z] [runtime-status] [60205] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:22:16.604Z] [worker-~diagnostic~-81a499c9-b577-4ff7-9f15-b7ed80253d4d]: IDLE 
[debug] [2020-04-07T22:22:39.146Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:22:40.150Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:22:40.150Z] [worker-~diagnostic~-81a499c9-b577-4ff7-9f15-b7ed80253d4d]: FINISHING 
[debug] [2020-04-07T22:22:40.150Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:22:40.156Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:22:40.156Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:22:40.156Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:22:40.156Z] [worker-~diagnostic~-a09b8b21-2b19-4915-b04f-3e5e76c6ccb4]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60216.sock 
[debug] [2020-04-07T22:22:40.156Z] [worker-~diagnostic~-a09b8b21-2b19-4915-b04f-3e5e76c6ccb4]: BUSY 
[debug] [2020-04-07T22:22:40.157Z] [worker-~diagnostic~-81a499c9-b577-4ff7-9f15-b7ed80253d4d]: exited 
[debug] [2020-04-07T22:22:40.157Z] [worker-~diagnostic~-81a499c9-b577-4ff7-9f15-b7ed80253d4d]: FINISHED 
[debug] [2020-04-07T22:22:40.423Z] [runtime-status] [60216] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:22:40.424Z] [runtime-status] [60216] Disabled runtime features: undefined 
[debug] [2020-04-07T22:22:40.425Z] [runtime-status] [60216] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:22:40.427Z] [runtime-status] [60216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:40.429Z] [runtime-status] [60216] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:22:40.458Z] [runtime-status] [60216] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:22:40.458Z] [runtime-status] [60216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:40.459Z] [runtime-status] [60216] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:22:40.459Z] [runtime-status] [60216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:40.459Z] [runtime-status] [60216] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:22:40.678Z] [worker-~diagnostic~-a09b8b21-2b19-4915-b04f-3e5e76c6ccb4]: IDLE 
[debug] [2020-04-07T22:22:42.848Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:22:43.849Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:22:43.849Z] [worker-~diagnostic~-a09b8b21-2b19-4915-b04f-3e5e76c6ccb4]: FINISHING 
[debug] [2020-04-07T22:22:43.850Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:22:43.854Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:22:43.854Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:22:43.854Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:22:43.854Z] [worker-~diagnostic~-8f59487e-16ca-4000-ba83-bc44c279459b]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60218.sock 
[debug] [2020-04-07T22:22:43.854Z] [worker-~diagnostic~-8f59487e-16ca-4000-ba83-bc44c279459b]: BUSY 
[debug] [2020-04-07T22:22:43.856Z] [worker-~diagnostic~-a09b8b21-2b19-4915-b04f-3e5e76c6ccb4]: exited 
[debug] [2020-04-07T22:22:43.856Z] [worker-~diagnostic~-a09b8b21-2b19-4915-b04f-3e5e76c6ccb4]: FINISHED 
[debug] [2020-04-07T22:22:44.134Z] [runtime-status] [60218] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:22:44.137Z] [runtime-status] [60218] Disabled runtime features: undefined 
[debug] [2020-04-07T22:22:44.138Z] [runtime-status] [60218] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:22:44.140Z] [runtime-status] [60218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:44.143Z] [runtime-status] [60218] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:22:44.175Z] [runtime-status] [60218] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:22:44.176Z] [runtime-status] [60218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:44.177Z] [runtime-status] [60218] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:22:44.177Z] [runtime-status] [60218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:22:44.178Z] [runtime-status] [60218] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:22:44.397Z] [worker-~diagnostic~-8f59487e-16ca-4000-ba83-bc44c279459b]: IDLE 
[debug] [2020-04-07T22:23:37.088Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:23:38.088Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:23:38.088Z] [worker-~diagnostic~-8f59487e-16ca-4000-ba83-bc44c279459b]: FINISHING 
[debug] [2020-04-07T22:23:38.089Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:23:38.092Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:23:38.093Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:23:38.093Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:23:38.093Z] [worker-~diagnostic~-0a753986-56cf-4744-806d-f2590600cba1]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60224.sock 
[debug] [2020-04-07T22:23:38.093Z] [worker-~diagnostic~-0a753986-56cf-4744-806d-f2590600cba1]: BUSY 
[debug] [2020-04-07T22:23:38.095Z] [worker-~diagnostic~-8f59487e-16ca-4000-ba83-bc44c279459b]: exited 
[debug] [2020-04-07T22:23:38.095Z] [worker-~diagnostic~-8f59487e-16ca-4000-ba83-bc44c279459b]: FINISHED 
[debug] [2020-04-07T22:23:38.372Z] [runtime-status] [60224] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:23:38.374Z] [runtime-status] [60224] Disabled runtime features: undefined 
[debug] [2020-04-07T22:23:38.376Z] [runtime-status] [60224] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:23:38.376Z] [runtime-status] [60224] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:23:38.379Z] [runtime-status] [60224] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:23:38.409Z] [runtime-status] [60224] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:23:38.409Z] [runtime-status] [60224] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:23:38.410Z] [runtime-status] [60224] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:23:38.410Z] [runtime-status] [60224] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:23:38.410Z] [runtime-status] [60224] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:23:38.614Z] [worker-~diagnostic~-0a753986-56cf-4744-806d-f2590600cba1]: IDLE 
[debug] [2020-04-07T22:23:42.844Z] Apr 07, 2020 3:23:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:23:42.873Z] Apr 07, 2020 3:23:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:23:43.136Z] Apr 07, 2020 3:23:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:23:43.174Z] Apr 07, 2020 3:23:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:23:43.209Z] Apr 07, 2020 3:23:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:23:43.242Z] Apr 07, 2020 3:23:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:23:43.297Z] Apr 07, 2020 3:23:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:24:24.786Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:24:25.788Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:24:25.788Z] [worker-~diagnostic~-0a753986-56cf-4744-806d-f2590600cba1]: FINISHING 
[debug] [2020-04-07T22:24:25.788Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:24:25.791Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:24:25.792Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:24:25.792Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:24:25.792Z] [worker-~diagnostic~-4d88e6df-a548-4458-9ffd-d3f93ad5044a]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60260.sock 
[debug] [2020-04-07T22:24:25.792Z] [worker-~diagnostic~-4d88e6df-a548-4458-9ffd-d3f93ad5044a]: BUSY 
[debug] [2020-04-07T22:24:25.795Z] [worker-~diagnostic~-0a753986-56cf-4744-806d-f2590600cba1]: exited 
[debug] [2020-04-07T22:24:25.795Z] [worker-~diagnostic~-0a753986-56cf-4744-806d-f2590600cba1]: FINISHED 
[debug] [2020-04-07T22:24:26.045Z] [runtime-status] [60260] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:24:26.047Z] [runtime-status] [60260] Disabled runtime features: undefined 
[debug] [2020-04-07T22:24:26.048Z] [runtime-status] [60260] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:24:26.049Z] [runtime-status] [60260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:26.052Z] [runtime-status] [60260] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:24:26.081Z] [runtime-status] [60260] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:24:26.081Z] [runtime-status] [60260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:26.082Z] [runtime-status] [60260] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:24:26.082Z] [runtime-status] [60260] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:26.082Z] [runtime-status] [60260] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:24:26.286Z] [worker-~diagnostic~-4d88e6df-a548-4458-9ffd-d3f93ad5044a]: IDLE 
[debug] [2020-04-07T22:24:32.989Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:24:33.990Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:24:33.991Z] [worker-~diagnostic~-4d88e6df-a548-4458-9ffd-d3f93ad5044a]: FINISHING 
[debug] [2020-04-07T22:24:33.991Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:24:33.994Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:24:33.994Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:24:33.994Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:24:33.994Z] [worker-~diagnostic~-c173b737-949a-4821-ab10-141d1e7e0486]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60276.sock 
[debug] [2020-04-07T22:24:33.994Z] [worker-~diagnostic~-c173b737-949a-4821-ab10-141d1e7e0486]: BUSY 
[debug] [2020-04-07T22:24:33.998Z] [worker-~diagnostic~-4d88e6df-a548-4458-9ffd-d3f93ad5044a]: exited 
[debug] [2020-04-07T22:24:33.998Z] [worker-~diagnostic~-4d88e6df-a548-4458-9ffd-d3f93ad5044a]: FINISHED 
[debug] [2020-04-07T22:24:34.251Z] [runtime-status] [60276] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:24:34.252Z] [runtime-status] [60276] Disabled runtime features: undefined 
[debug] [2020-04-07T22:24:34.253Z] [runtime-status] [60276] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:24:34.254Z] [runtime-status] [60276] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:34.257Z] [runtime-status] [60276] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:24:34.286Z] [runtime-status] [60276] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:24:34.287Z] [runtime-status] [60276] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:34.289Z] [runtime-status] [60276] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:24:34.289Z] [runtime-status] [60276] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:34.289Z] [runtime-status] [60276] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:24:34.495Z] [worker-~diagnostic~-c173b737-949a-4821-ab10-141d1e7e0486]: IDLE 
[debug] [2020-04-07T22:24:41.459Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:24:42.463Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:24:42.463Z] [worker-~diagnostic~-c173b737-949a-4821-ab10-141d1e7e0486]: FINISHING 
[debug] [2020-04-07T22:24:42.463Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:24:42.465Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:24:42.465Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:24:42.465Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:24:42.465Z] [worker-~diagnostic~-46c0c8a4-e11c-42cb-879b-1e74f02899c0]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60293.sock 
[debug] [2020-04-07T22:24:42.465Z] [worker-~diagnostic~-46c0c8a4-e11c-42cb-879b-1e74f02899c0]: BUSY 
[debug] [2020-04-07T22:24:42.468Z] [worker-~diagnostic~-c173b737-949a-4821-ab10-141d1e7e0486]: exited 
[debug] [2020-04-07T22:24:42.468Z] [worker-~diagnostic~-c173b737-949a-4821-ab10-141d1e7e0486]: FINISHED 
[debug] [2020-04-07T22:24:42.726Z] [runtime-status] [60293] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:24:42.728Z] [runtime-status] [60293] Disabled runtime features: undefined 
[debug] [2020-04-07T22:24:42.730Z] [runtime-status] [60293] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:24:42.730Z] [runtime-status] [60293] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:42.733Z] [runtime-status] [60293] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:24:42.762Z] [runtime-status] [60293] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:24:42.763Z] [runtime-status] [60293] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:42.763Z] [runtime-status] [60293] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:24:42.763Z] [runtime-status] [60293] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:24:42.763Z] [runtime-status] [60293] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:24:42.976Z] [worker-~diagnostic~-46c0c8a4-e11c-42cb-879b-1e74f02899c0]: IDLE 
[debug] [2020-04-07T22:24:45.171Z] Apr 07, 2020 3:24:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:24:45.198Z] Apr 07, 2020 3:24:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:24:45.445Z] Apr 07, 2020 3:24:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:24:45.483Z] Apr 07, 2020 3:24:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:24:45.515Z] Apr 07, 2020 3:24:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:24:45.545Z] Apr 07, 2020 3:24:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:24:45.598Z] Apr 07, 2020 3:24:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:25:18.290Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:25:19.293Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:25:19.293Z] [worker-~diagnostic~-46c0c8a4-e11c-42cb-879b-1e74f02899c0]: FINISHING 
[debug] [2020-04-07T22:25:19.293Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:25:19.296Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:25:19.296Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:25:19.296Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:25:19.296Z] [worker-~diagnostic~-a75575fb-e284-43df-96ff-5671c4dc4206]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60298.sock 
[debug] [2020-04-07T22:25:19.296Z] [worker-~diagnostic~-a75575fb-e284-43df-96ff-5671c4dc4206]: BUSY 
[debug] [2020-04-07T22:25:19.298Z] [worker-~diagnostic~-46c0c8a4-e11c-42cb-879b-1e74f02899c0]: exited 
[debug] [2020-04-07T22:25:19.298Z] [worker-~diagnostic~-46c0c8a4-e11c-42cb-879b-1e74f02899c0]: FINISHED 
[debug] [2020-04-07T22:25:19.561Z] [runtime-status] [60298] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:25:19.564Z] [runtime-status] [60298] Disabled runtime features: undefined 
[debug] [2020-04-07T22:25:19.566Z] [runtime-status] [60298] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:25:19.566Z] [runtime-status] [60298] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:19.571Z] [runtime-status] [60298] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:25:19.605Z] [runtime-status] [60298] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:25:19.605Z] [runtime-status] [60298] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:19.606Z] [runtime-status] [60298] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:25:19.606Z] [runtime-status] [60298] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:19.606Z] [runtime-status] [60298] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:25:19.726Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:25:19.839Z] [worker-~diagnostic~-a75575fb-e284-43df-96ff-5671c4dc4206]: IDLE 
[debug] [2020-04-07T22:25:20.730Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:25:20.730Z] [worker-~diagnostic~-a75575fb-e284-43df-96ff-5671c4dc4206]: FINISHING 
[debug] [2020-04-07T22:25:20.730Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:25:20.734Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:25:20.734Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:25:20.734Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:25:20.734Z] [worker-~diagnostic~-1a83ab9b-d9b8-40b9-a807-4e17ad9ae702]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60300.sock 
[debug] [2020-04-07T22:25:20.734Z] [worker-~diagnostic~-1a83ab9b-d9b8-40b9-a807-4e17ad9ae702]: BUSY 
[debug] [2020-04-07T22:25:20.737Z] [worker-~diagnostic~-a75575fb-e284-43df-96ff-5671c4dc4206]: exited 
[debug] [2020-04-07T22:25:20.737Z] [worker-~diagnostic~-a75575fb-e284-43df-96ff-5671c4dc4206]: FINISHED 
[debug] [2020-04-07T22:25:21.000Z] [runtime-status] [60300] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:25:21.002Z] [runtime-status] [60300] Disabled runtime features: undefined 
[debug] [2020-04-07T22:25:21.004Z] [runtime-status] [60300] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:25:21.004Z] [runtime-status] [60300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:21.008Z] [runtime-status] [60300] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:25:21.036Z] [runtime-status] [60300] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:25:21.036Z] [runtime-status] [60300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:21.037Z] [runtime-status] [60300] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:25:21.037Z] [runtime-status] [60300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:21.037Z] [runtime-status] [60300] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:25:21.231Z] [worker-~diagnostic~-1a83ab9b-d9b8-40b9-a807-4e17ad9ae702]: IDLE 
[debug] [2020-04-07T22:25:29.976Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:25:30.980Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:25:30.980Z] [worker-~diagnostic~-1a83ab9b-d9b8-40b9-a807-4e17ad9ae702]: FINISHING 
[debug] [2020-04-07T22:25:30.980Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:25:30.983Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:25:30.983Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:25:30.983Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:25:30.983Z] [worker-~diagnostic~-ede059f3-cc1d-43ec-912c-ac63cc5e66ca]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60303.sock 
[debug] [2020-04-07T22:25:30.983Z] [worker-~diagnostic~-ede059f3-cc1d-43ec-912c-ac63cc5e66ca]: BUSY 
[debug] [2020-04-07T22:25:30.985Z] [worker-~diagnostic~-1a83ab9b-d9b8-40b9-a807-4e17ad9ae702]: exited 
[debug] [2020-04-07T22:25:30.985Z] [worker-~diagnostic~-1a83ab9b-d9b8-40b9-a807-4e17ad9ae702]: FINISHED 
[debug] [2020-04-07T22:25:31.270Z] [runtime-status] [60303] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:25:31.273Z] [runtime-status] [60303] Disabled runtime features: undefined 
[debug] [2020-04-07T22:25:31.275Z] [runtime-status] [60303] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:25:31.275Z] [runtime-status] [60303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:31.279Z] [runtime-status] [60303] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:25:31.313Z] [runtime-status] [60303] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:25:31.313Z] [runtime-status] [60303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:31.314Z] [runtime-status] [60303] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:25:31.314Z] [runtime-status] [60303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:25:31.315Z] [runtime-status] [60303] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:25:31.540Z] [worker-~diagnostic~-ede059f3-cc1d-43ec-912c-ac63cc5e66ca]: IDLE 
[debug] [2020-04-07T22:25:43.852Z] Apr 07, 2020 3:25:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:25:43.878Z] Apr 07, 2020 3:25:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:25:44.119Z] Apr 07, 2020 3:25:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:25:44.159Z] Apr 07, 2020 3:25:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:25:44.192Z] Apr 07, 2020 3:25:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:25:44.223Z] Apr 07, 2020 3:25:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:25:44.271Z] Apr 07, 2020 3:25:44 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:26:09.509Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n   ('pinUserRef' in request.resource.data) &&\n   request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:26:09.512Z] Apr 07, 2020 3:26:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:26:09.540Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:26:15.390Z] Apr 07, 2020 3:26:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:26:15.414Z] Apr 07, 2020 3:26:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:26:15.661Z] Apr 07, 2020 3:26:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:26:15.698Z] Apr 07, 2020 3:26:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:26:15.731Z] Apr 07, 2020 3:26:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:26:15.764Z] Apr 07, 2020 3:26:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:26:15.823Z] Apr 07, 2020 3:26:15 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:27:43.785Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:27:44.789Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:27:44.790Z] [worker-~diagnostic~-ede059f3-cc1d-43ec-912c-ac63cc5e66ca]: FINISHING 
[debug] [2020-04-07T22:27:44.790Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:27:44.793Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:27:44.793Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:27:44.793Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:27:44.793Z] [worker-~diagnostic~-111ca667-415c-48e9-a4e1-eadc558dee04]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60333.sock 
[debug] [2020-04-07T22:27:44.793Z] [worker-~diagnostic~-111ca667-415c-48e9-a4e1-eadc558dee04]: BUSY 
[debug] [2020-04-07T22:27:44.795Z] [worker-~diagnostic~-ede059f3-cc1d-43ec-912c-ac63cc5e66ca]: exited 
[debug] [2020-04-07T22:27:44.795Z] [worker-~diagnostic~-ede059f3-cc1d-43ec-912c-ac63cc5e66ca]: FINISHED 
[debug] [2020-04-07T22:27:45.050Z] [runtime-status] [60333] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:27:45.052Z] [runtime-status] [60333] Disabled runtime features: undefined 
[debug] [2020-04-07T22:27:45.053Z] [runtime-status] [60333] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:27:45.055Z] [runtime-status] [60333] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:27:45.057Z] [runtime-status] [60333] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:27:45.085Z] [runtime-status] [60333] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:27:45.085Z] [runtime-status] [60333] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:27:45.086Z] [runtime-status] [60333] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:27:45.086Z] [runtime-status] [60333] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:27:45.087Z] [runtime-status] [60333] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:27:45.302Z] [worker-~diagnostic~-111ca667-415c-48e9-a4e1-eadc558dee04]: IDLE 
[debug] [2020-04-07T22:27:47.360Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:27:48.364Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:27:48.364Z] [worker-~diagnostic~-111ca667-415c-48e9-a4e1-eadc558dee04]: FINISHING 
[debug] [2020-04-07T22:27:48.364Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:27:48.367Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:27:48.367Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:27:48.367Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:27:48.367Z] [worker-~diagnostic~-80acd371-06ac-4690-af19-44e09b255ce4]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60335.sock 
[debug] [2020-04-07T22:27:48.367Z] [worker-~diagnostic~-80acd371-06ac-4690-af19-44e09b255ce4]: BUSY 
[debug] [2020-04-07T22:27:48.370Z] [worker-~diagnostic~-111ca667-415c-48e9-a4e1-eadc558dee04]: exited 
[debug] [2020-04-07T22:27:48.370Z] [worker-~diagnostic~-111ca667-415c-48e9-a4e1-eadc558dee04]: FINISHED 
[debug] [2020-04-07T22:27:48.642Z] [runtime-status] [60335] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:27:48.642Z] [runtime-status] [60335] Disabled runtime features: undefined 
[debug] [2020-04-07T22:27:48.645Z] [runtime-status] [60335] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:27:48.645Z] [runtime-status] [60335] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:27:48.649Z] [runtime-status] [60335] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:27:48.681Z] [runtime-status] [60335] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:27:48.681Z] [runtime-status] [60335] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:27:48.683Z] [runtime-status] [60335] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:27:48.683Z] [runtime-status] [60335] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:27:48.683Z] [runtime-status] [60335] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:27:48.883Z] [worker-~diagnostic~-80acd371-06ac-4690-af19-44e09b255ce4]: IDLE 
[debug] [2020-04-07T22:27:53.114Z] Apr 07, 2020 3:27:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:27:53.142Z] Apr 07, 2020 3:27:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:27:53.409Z] Apr 07, 2020 3:27:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:27:53.447Z] Apr 07, 2020 3:27:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:27:53.480Z] Apr 07, 2020 3:27:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:27:53.518Z] Apr 07, 2020 3:27:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:27:53.572Z] Apr 07, 2020 3:27:53 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:28:15.389Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:28:16.392Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:28:16.392Z] [worker-~diagnostic~-80acd371-06ac-4690-af19-44e09b255ce4]: FINISHING 
[debug] [2020-04-07T22:28:16.392Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:28:16.396Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:28:16.396Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:28:16.396Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:28:16.396Z] [worker-~diagnostic~-353279be-60c9-4e30-b421-1dbc5d5841b0]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60352.sock 
[debug] [2020-04-07T22:28:16.397Z] [worker-~diagnostic~-353279be-60c9-4e30-b421-1dbc5d5841b0]: BUSY 
[debug] [2020-04-07T22:28:16.399Z] [worker-~diagnostic~-80acd371-06ac-4690-af19-44e09b255ce4]: exited 
[debug] [2020-04-07T22:28:16.399Z] [worker-~diagnostic~-80acd371-06ac-4690-af19-44e09b255ce4]: FINISHED 
[debug] [2020-04-07T22:28:16.671Z] [runtime-status] [60352] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:28:16.672Z] [runtime-status] [60352] Disabled runtime features: undefined 
[debug] [2020-04-07T22:28:16.675Z] [runtime-status] [60352] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:28:16.675Z] [runtime-status] [60352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:28:16.678Z] [runtime-status] [60352] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:28:16.708Z] [runtime-status] [60352] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:28:16.708Z] [runtime-status] [60352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:28:16.709Z] [runtime-status] [60352] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:28:16.709Z] [runtime-status] [60352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:28:16.710Z] [runtime-status] [60352] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:28:16.919Z] [worker-~diagnostic~-353279be-60c9-4e30-b421-1dbc5d5841b0]: IDLE 
[debug] [2020-04-07T22:28:17.688Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:28:18.688Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:28:18.689Z] [worker-~diagnostic~-353279be-60c9-4e30-b421-1dbc5d5841b0]: FINISHING 
[debug] [2020-04-07T22:28:18.689Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:28:18.692Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:28:18.692Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:28:18.692Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:28:18.693Z] [worker-~diagnostic~-60c852b2-9af8-47e2-8d56-0b5976730972]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60355.sock 
[debug] [2020-04-07T22:28:18.693Z] [worker-~diagnostic~-60c852b2-9af8-47e2-8d56-0b5976730972]: BUSY 
[debug] [2020-04-07T22:28:18.694Z] [worker-~diagnostic~-353279be-60c9-4e30-b421-1dbc5d5841b0]: exited 
[debug] [2020-04-07T22:28:18.695Z] [worker-~diagnostic~-353279be-60c9-4e30-b421-1dbc5d5841b0]: FINISHED 
[debug] [2020-04-07T22:28:18.958Z] [runtime-status] [60355] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:28:18.960Z] [runtime-status] [60355] Disabled runtime features: undefined 
[debug] [2020-04-07T22:28:18.964Z] [runtime-status] [60355] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:28:18.964Z] [runtime-status] [60355] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:28:18.967Z] [runtime-status] [60355] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:28:18.999Z] [runtime-status] [60355] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:28:19.000Z] [runtime-status] [60355] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:28:19.000Z] [runtime-status] [60355] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:28:19.001Z] [runtime-status] [60355] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:28:19.001Z] [runtime-status] [60355] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:28:19.213Z] [worker-~diagnostic~-60c852b2-9af8-47e2-8d56-0b5976730972]: IDLE 
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:30:33.864Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n  request.gere\n  ('pinUserRef' in request.resource.data) &&\n  request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     request.fail\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:30:33.867Z] Apr 07, 2020 3:30:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:30:33.904Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"740"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:23:11 - WARNING Invalid function name: gere.
[warn] ⚠  ../firebase/firestore.rules:30:14 - WARNING Invalid function name: fail.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:30:39.982Z] Apr 07, 2020 3:30:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:30:40.010Z] Apr 07, 2020 3:30:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:30:40.270Z] Apr 07, 2020 3:30:40 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Null value error. for 'create' @ L64

[debug] [2020-04-07T22:30:40.309Z] Apr 07, 2020 3:30:40 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L64

[debug] [2020-04-07T22:30:40.344Z] Apr 07, 2020 3:30:40 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L71

[debug] [2020-04-07T22:30:40.375Z] Apr 07, 2020 3:30:40 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Property averageRating is undefined on object. for 'create' @ L64

[debug] [2020-04-07T22:30:40.422Z] Apr 07, 2020 3:30:40 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L71

[debug] [2020-04-07T22:30:40.474Z] Apr 07, 2020 3:30:40 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Function not found error: Name: [fail]. for 'create' @ L78

[debug] [2020-04-07T22:31:05.202Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:31:06.202Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:31:06.202Z] [worker-~diagnostic~-60c852b2-9af8-47e2-8d56-0b5976730972]: FINISHING 
[debug] [2020-04-07T22:31:06.202Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:31:06.206Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:31:06.206Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:31:06.206Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:31:06.206Z] [worker-~diagnostic~-272e8783-1ea8-4e29-8161-e9e85089b794]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60386.sock 
[debug] [2020-04-07T22:31:06.206Z] [worker-~diagnostic~-272e8783-1ea8-4e29-8161-e9e85089b794]: BUSY 
[debug] [2020-04-07T22:31:06.208Z] [worker-~diagnostic~-60c852b2-9af8-47e2-8d56-0b5976730972]: exited 
[debug] [2020-04-07T22:31:06.208Z] [worker-~diagnostic~-60c852b2-9af8-47e2-8d56-0b5976730972]: FINISHED 
[debug] [2020-04-07T22:31:06.837Z] [runtime-status] [60386] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:31:06.839Z] [runtime-status] [60386] Disabled runtime features: undefined 
[debug] [2020-04-07T22:31:06.842Z] [runtime-status] [60386] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:31:06.843Z] [runtime-status] [60386] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:31:06.846Z] [runtime-status] [60386] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:31:06.889Z] [runtime-status] [60386] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:31:06.890Z] [runtime-status] [60386] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:31:06.891Z] [runtime-status] [60386] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:31:06.891Z] [runtime-status] [60386] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:31:06.891Z] [runtime-status] [60386] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:31:07.239Z] [worker-~diagnostic~-272e8783-1ea8-4e29-8161-e9e85089b794]: IDLE 
[debug] [2020-04-07T22:31:11.122Z] Apr 07, 2020 3:31:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:31:11.150Z] Apr 07, 2020 3:31:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:31:11.402Z] Apr 07, 2020 3:31:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Null value error. for 'create' @ L64

[debug] [2020-04-07T22:31:11.439Z] Apr 07, 2020 3:31:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L64

[debug] [2020-04-07T22:31:11.474Z] Apr 07, 2020 3:31:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L71

[debug] [2020-04-07T22:31:11.510Z] Apr 07, 2020 3:31:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Property averageRating is undefined on object. for 'create' @ L64

[debug] [2020-04-07T22:31:11.555Z] Apr 07, 2020 3:31:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L71

[debug] [2020-04-07T22:31:11.600Z] Apr 07, 2020 3:31:11 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Function not found error: Name: [fail]. for 'create' @ L78

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:31:32.219Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n  request.gere\n  ('pinUserRef' in request.resource.data) &&\n  request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     // request.fail\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:31:32.220Z] Apr 07, 2020 3:31:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:31:32.242Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"500"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:23:11 - WARNING Invalid function name: gere.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:31:35.411Z] Apr 07, 2020 3:31:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:31:35.434Z] Apr 07, 2020 3:31:35 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:31:35.695Z] Apr 07, 2020 3:31:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Null value error. for 'create' @ L64

[debug] [2020-04-07T22:31:35.735Z] Apr 07, 2020 3:31:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L64

[debug] [2020-04-07T22:31:35.768Z] Apr 07, 2020 3:31:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L71

[debug] [2020-04-07T22:31:35.801Z] Apr 07, 2020 3:31:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, Property averageRating is undefined on object. for 'create' @ L64

[debug] [2020-04-07T22:31:35.851Z] Apr 07, 2020 3:31:35 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L57, false for 'create' @ L71

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:32:14.570Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n  request.gere\n  ('pinUserRef' in request.resource.data) &&\n  request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:32:14.573Z] Apr 07, 2020 3:32:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:32:14.600Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"500"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:23:11 - WARNING Invalid function name: gere.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:32:17.969Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:32:18.971Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:32:18.971Z] [worker-~diagnostic~-272e8783-1ea8-4e29-8161-e9e85089b794]: FINISHING 
[debug] [2020-04-07T22:32:18.971Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:32:18.976Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:32:18.976Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:32:18.976Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:32:18.976Z] [worker-~diagnostic~-72583410-2b5b-4df5-b49d-2b74d2c322cc]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60413.sock 
[debug] [2020-04-07T22:32:18.976Z] [worker-~diagnostic~-72583410-2b5b-4df5-b49d-2b74d2c322cc]: BUSY 
[debug] [2020-04-07T22:32:18.978Z] [worker-~diagnostic~-272e8783-1ea8-4e29-8161-e9e85089b794]: exited 
[debug] [2020-04-07T22:32:18.979Z] [worker-~diagnostic~-272e8783-1ea8-4e29-8161-e9e85089b794]: FINISHED 
[debug] [2020-04-07T22:32:19.411Z] [runtime-status] [60413] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:32:19.412Z] [runtime-status] [60413] Disabled runtime features: undefined 
[debug] [2020-04-07T22:32:19.414Z] [runtime-status] [60413] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:32:19.415Z] [runtime-status] [60413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:32:19.419Z] [runtime-status] [60413] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:32:19.461Z] [runtime-status] [60413] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:32:19.461Z] [runtime-status] [60413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:32:19.462Z] [runtime-status] [60413] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:32:19.462Z] [runtime-status] [60413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:32:19.463Z] [runtime-status] [60413] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:32:19.798Z] [worker-~diagnostic~-72583410-2b5b-4df5-b49d-2b74d2c322cc]: IDLE 
[debug] [2020-04-07T22:32:23.036Z] Apr 07, 2020 3:32:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:32:23.062Z] Apr 07, 2020 3:32:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:32:23.333Z] Apr 07, 2020 3:32:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, Null value error. for 'create' @ L63

[debug] [2020-04-07T22:32:23.370Z] Apr 07, 2020 3:32:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L63

[debug] [2020-04-07T22:32:23.405Z] Apr 07, 2020 3:32:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L70

[debug] [2020-04-07T22:32:23.441Z] Apr 07, 2020 3:32:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, Property averageRating is undefined on object. for 'create' @ L63

[debug] [2020-04-07T22:32:23.491Z] Apr 07, 2020 3:32:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L70

[debug] [2020-04-07T22:32:39.959Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:32:40.961Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:32:40.961Z] [worker-~diagnostic~-72583410-2b5b-4df5-b49d-2b74d2c322cc]: FINISHING 
[debug] [2020-04-07T22:32:40.961Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:32:40.964Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:32:40.964Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:32:40.964Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:32:40.965Z] [worker-~diagnostic~-6a7f0747-a285-40cb-bf5d-f314efb05ba7]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60430.sock 
[debug] [2020-04-07T22:32:40.965Z] [worker-~diagnostic~-6a7f0747-a285-40cb-bf5d-f314efb05ba7]: BUSY 
[debug] [2020-04-07T22:32:40.967Z] [worker-~diagnostic~-72583410-2b5b-4df5-b49d-2b74d2c322cc]: exited 
[debug] [2020-04-07T22:32:40.967Z] [worker-~diagnostic~-72583410-2b5b-4df5-b49d-2b74d2c322cc]: FINISHED 
[debug] [2020-04-07T22:32:41.216Z] [runtime-status] [60430] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:32:41.218Z] [runtime-status] [60430] Disabled runtime features: undefined 
[debug] [2020-04-07T22:32:41.220Z] [runtime-status] [60430] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:32:41.221Z] [runtime-status] [60430] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:32:41.225Z] [runtime-status] [60430] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:32:41.253Z] [runtime-status] [60430] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:32:41.253Z] [runtime-status] [60430] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:32:41.254Z] [runtime-status] [60430] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:32:41.254Z] [runtime-status] [60430] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:32:41.256Z] [runtime-status] [60430] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:32:41.477Z] [worker-~diagnostic~-6a7f0747-a285-40cb-bf5d-f314efb05ba7]: IDLE 
[debug] [2020-04-07T22:32:45.061Z] Apr 07, 2020 3:32:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:32:45.087Z] Apr 07, 2020 3:32:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:32:45.345Z] Apr 07, 2020 3:32:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, Null value error. for 'create' @ L63

[debug] [2020-04-07T22:32:45.382Z] Apr 07, 2020 3:32:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L63

[debug] [2020-04-07T22:32:45.419Z] Apr 07, 2020 3:32:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L70

[debug] [2020-04-07T22:32:45.452Z] Apr 07, 2020 3:32:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, Property averageRating is undefined on object. for 'create' @ L63

[debug] [2020-04-07T22:32:45.501Z] Apr 07, 2020 3:32:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L70

[debug] [2020-04-07T22:33:02.644Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:33:03.647Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:33:03.647Z] [worker-~diagnostic~-6a7f0747-a285-40cb-bf5d-f314efb05ba7]: FINISHING 
[debug] [2020-04-07T22:33:03.647Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:33:03.650Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:33:03.650Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:33:03.650Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:33:03.650Z] [worker-~diagnostic~-3a5a8afe-5c2c-4856-b9f9-9d68cdaad4d7]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60461.sock 
[debug] [2020-04-07T22:33:03.650Z] [worker-~diagnostic~-3a5a8afe-5c2c-4856-b9f9-9d68cdaad4d7]: BUSY 
[debug] [2020-04-07T22:33:03.652Z] [worker-~diagnostic~-6a7f0747-a285-40cb-bf5d-f314efb05ba7]: exited 
[debug] [2020-04-07T22:33:03.653Z] [worker-~diagnostic~-6a7f0747-a285-40cb-bf5d-f314efb05ba7]: FINISHED 
[debug] [2020-04-07T22:33:03.902Z] [runtime-status] [60461] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:33:03.904Z] [runtime-status] [60461] Disabled runtime features: undefined 
[debug] [2020-04-07T22:33:03.906Z] [runtime-status] [60461] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:33:03.907Z] [runtime-status] [60461] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:33:03.911Z] [runtime-status] [60461] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:33:03.942Z] [runtime-status] [60461] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:33:03.942Z] [runtime-status] [60461] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:33:03.943Z] [runtime-status] [60461] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:33:03.943Z] [runtime-status] [60461] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:33:03.943Z] [runtime-status] [60461] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:33:04.147Z] [worker-~diagnostic~-3a5a8afe-5c2c-4856-b9f9-9d68cdaad4d7]: IDLE 
[debug] [2020-04-07T22:33:06.221Z] Apr 07, 2020 3:33:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:33:06.254Z] Apr 07, 2020 3:33:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:33:06.500Z] Apr 07, 2020 3:33:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, Null value error. for 'create' @ L63

[debug] [2020-04-07T22:33:06.538Z] Apr 07, 2020 3:33:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L63

[debug] [2020-04-07T22:33:06.567Z] Apr 07, 2020 3:33:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L70

[debug] [2020-04-07T22:33:06.602Z] Apr 07, 2020 3:33:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, Property averageRating is undefined on object. for 'create' @ L63

[debug] [2020-04-07T22:33:06.648Z] Apr 07, 2020 3:33:06 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L56, false for 'create' @ L70

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:33:13.056Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n  ('pinUserRef' in request.resource.data) &&\n  request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:33:13.059Z] Apr 07, 2020 3:33:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:33:13.084Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:33:18.065Z] Apr 07, 2020 3:33:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:33:18.088Z] Apr 07, 2020 3:33:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:33:18.339Z] Apr 07, 2020 3:33:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:33:18.375Z] Apr 07, 2020 3:33:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:33:18.407Z] Apr 07, 2020 3:33:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:33:18.438Z] Apr 07, 2020 3:33:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:33:18.488Z] Apr 07, 2020 3:33:18 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:33:49.967Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:33:49.969Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, request) {\n  return isAuthenticated() &&\n  ('pinUserRef' in request.resource.data) &&\n  request.resource.data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     request.resource.data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:33:49.971Z] Apr 07, 2020 3:33:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:33:49.995Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:33:50.972Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:33:50.972Z] [worker-~diagnostic~-3a5a8afe-5c2c-4856-b9f9-9d68cdaad4d7]: FINISHING 
[debug] [2020-04-07T22:33:50.972Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:33:50.975Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:33:50.975Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:33:50.975Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:33:50.975Z] [worker-~diagnostic~-01c41578-3e80-45f7-92dc-52ea6eccb316]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60470.sock 
[debug] [2020-04-07T22:33:50.975Z] [worker-~diagnostic~-01c41578-3e80-45f7-92dc-52ea6eccb316]: BUSY 
[debug] [2020-04-07T22:33:50.977Z] [worker-~diagnostic~-3a5a8afe-5c2c-4856-b9f9-9d68cdaad4d7]: exited 
[debug] [2020-04-07T22:33:50.978Z] [worker-~diagnostic~-3a5a8afe-5c2c-4856-b9f9-9d68cdaad4d7]: FINISHED 
[debug] [2020-04-07T22:33:51.233Z] [runtime-status] [60470] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:33:51.235Z] [runtime-status] [60470] Disabled runtime features: undefined 
[debug] [2020-04-07T22:33:51.237Z] [runtime-status] [60470] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:33:51.237Z] [runtime-status] [60470] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:33:51.241Z] [runtime-status] [60470] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:33:51.273Z] [runtime-status] [60470] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:33:51.274Z] [runtime-status] [60470] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:33:51.275Z] [runtime-status] [60470] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:33:51.275Z] [runtime-status] [60470] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:33:51.275Z] [runtime-status] [60470] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:33:51.495Z] [worker-~diagnostic~-01c41578-3e80-45f7-92dc-52ea6eccb316]: IDLE 
[debug] [2020-04-07T22:33:59.447Z] Apr 07, 2020 3:33:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:33:59.470Z] Apr 07, 2020 3:33:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:33:59.729Z] Apr 07, 2020 3:33:59 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Null value error. for 'create' @ L62

[debug] [2020-04-07T22:33:59.765Z] Apr 07, 2020 3:33:59 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L62

[debug] [2020-04-07T22:33:59.795Z] Apr 07, 2020 3:33:59 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[debug] [2020-04-07T22:33:59.827Z] Apr 07, 2020 3:33:59 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, Property averageRating is undefined on object. for 'create' @ L62

[debug] [2020-04-07T22:33:59.878Z] Apr 07, 2020 3:33:59 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L55, false for 'create' @ L69

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:37:11.332Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, data) {\n  return isAuthenticated() &&\n  ('pinUserRef' in request.resource.data) &&\n  data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if get(/databases/$(database)/documents/offers/$(offerID)).data\n\n\n      currentUserIsCurrentPINRef(database, request) || currentUserIsCurrentCAVRef(database, request)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request.resource.data);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:37:11.335Z] Apr 07, 2020 3:37:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:37:11.354Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"268"}
[warn] ⚠  ../firebase/firestore.rules:77:7 - ERROR Unexpected 'currentUserIsCurrentPINRef'.
[info] ✔  firestore: Rules updated.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:38:28.085Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, data) {\n  return isAuthenticated() &&\n  ('pinUserRef' in request.resource.data) &&\n  data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, request) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction confirmEitherPINorCAV(database, data) {\n    return currentUserIsCurrentPINRef(database, data) || currentUserIsCurrentCAVRef(database, data)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if confirmEitherPINorCAV(database, get(/databases/$(database)/documents/offers/$(offerID)).data)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request.resource.data);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:38:28.088Z] Apr 07, 2020 3:38:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:38:28.112Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"499"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[warn] ⚠  ../firebase/firestore.rules:30:6 - WARNING Invalid variable name: data.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:38:37.697Z] Apr 07, 2020 3:38:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:38:37.722Z] Apr 07, 2020 3:38:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:38:37.992Z] Apr 07, 2020 3:38:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Null value error. for 'create' @ L66

[debug] [2020-04-07T22:38:38.028Z] Apr 07, 2020 3:38:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-07T22:38:38.058Z] Apr 07, 2020 3:38:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:38:38.092Z] Apr 07, 2020 3:38:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property averageRating is undefined on object. for 'create' @ L66

[debug] [2020-04-07T22:38:38.144Z] Apr 07, 2020 3:38:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:38:38.186Z] Apr 07, 2020 3:38:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property resource is undefined on object. for 'create' @ L80

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:39:01.224Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, data) {\n  return isAuthenticated() &&\n  ('pinUserRef' in request.resource.data) &&\n  data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, data) {\n  return isAuthenticated() &&\n     ('cavUserRef' in request.resource.data) &&\n     data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction confirmEitherPINorCAV(database, data) {\n    return currentUserIsCurrentPINRef(database, data) || currentUserIsCurrentCAVRef(database, data)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if confirmEitherPINorCAV(database, get(/databases/$(database)/documents/offers/$(offerID)).data)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request.resource.data);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:39:01.226Z] Apr 07, 2020 3:39:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:39:01.253Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:39:22.255Z] Apr 07, 2020 3:39:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:39:22.283Z] Apr 07, 2020 3:39:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:39:22.553Z] Apr 07, 2020 3:39:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Null value error. for 'create' @ L66

[debug] [2020-04-07T22:39:22.594Z] Apr 07, 2020 3:39:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-07T22:39:22.624Z] Apr 07, 2020 3:39:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:39:22.655Z] Apr 07, 2020 3:39:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property averageRating is undefined on object. for 'create' @ L66

[debug] [2020-04-07T22:39:22.704Z] Apr 07, 2020 3:39:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:41:14.499Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:41:15.501Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:41:15.501Z] [worker-~diagnostic~-01c41578-3e80-45f7-92dc-52ea6eccb316]: FINISHING 
[debug] [2020-04-07T22:41:15.501Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:41:15.505Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:41:15.505Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:41:15.505Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:41:15.505Z] [worker-~diagnostic~-6b81d7b0-8651-4858-8059-162b6afa7af5]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60538.sock 
[debug] [2020-04-07T22:41:15.505Z] [worker-~diagnostic~-6b81d7b0-8651-4858-8059-162b6afa7af5]: BUSY 
[debug] [2020-04-07T22:41:15.508Z] [worker-~diagnostic~-01c41578-3e80-45f7-92dc-52ea6eccb316]: exited 
[debug] [2020-04-07T22:41:15.508Z] [worker-~diagnostic~-01c41578-3e80-45f7-92dc-52ea6eccb316]: FINISHED 
[debug] [2020-04-07T22:41:15.967Z] [runtime-status] [60538] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:41:15.969Z] [runtime-status] [60538] Disabled runtime features: undefined 
[debug] [2020-04-07T22:41:15.972Z] [runtime-status] [60538] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:41:15.972Z] [runtime-status] [60538] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:41:15.976Z] [runtime-status] [60538] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:41:16.024Z] [runtime-status] [60538] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:41:16.025Z] [runtime-status] [60538] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:41:16.026Z] [runtime-status] [60538] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:41:16.026Z] [runtime-status] [60538] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:41:16.026Z] [runtime-status] [60538] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:41:16.480Z] [worker-~diagnostic~-6b81d7b0-8651-4858-8059-162b6afa7af5]: IDLE 
[debug] [2020-04-07T22:41:21.621Z] Apr 07, 2020 3:41:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:41:21.652Z] Apr 07, 2020 3:41:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:41:21.924Z] Apr 07, 2020 3:41:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Null value error. for 'create' @ L66

[debug] [2020-04-07T22:41:21.959Z] Apr 07, 2020 3:41:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-07T22:41:21.994Z] Apr 07, 2020 3:41:21 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:41:22.028Z] Apr 07, 2020 3:41:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property averageRating is undefined on object. for 'create' @ L66

[debug] [2020-04-07T22:41:22.074Z] Apr 07, 2020 3:41:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:41:22.115Z] Apr 07, 2020 3:41:22 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-07T22:41:35.515Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-07T22:41:36.515Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-07T22:41:36.516Z] [worker-~diagnostic~-6b81d7b0-8651-4858-8059-162b6afa7af5]: FINISHING 
[debug] [2020-04-07T22:41:36.516Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-07T22:41:36.521Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-07T22:41:36.521Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-07T22:41:36.521Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-07T22:41:36.522Z] [worker-~diagnostic~-f35bbd19-f4ca-475d-8508-a50e0819da33]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_60556.sock 
[debug] [2020-04-07T22:41:36.522Z] [worker-~diagnostic~-f35bbd19-f4ca-475d-8508-a50e0819da33]: BUSY 
[debug] [2020-04-07T22:41:36.523Z] [worker-~diagnostic~-6b81d7b0-8651-4858-8059-162b6afa7af5]: exited 
[debug] [2020-04-07T22:41:36.523Z] [worker-~diagnostic~-6b81d7b0-8651-4858-8059-162b6afa7af5]: FINISHED 
[debug] [2020-04-07T22:41:36.939Z] [runtime-status] [60556] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-07T22:41:36.941Z] [runtime-status] [60556] Disabled runtime features: undefined 
[debug] [2020-04-07T22:41:36.942Z] [runtime-status] [60556] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:41:36.943Z] [runtime-status] [60556] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:41:36.946Z] [runtime-status] [60556] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-07T22:41:36.991Z] [runtime-status] [60556] Checked functions.config() {"config":{}} 
[debug] [2020-04-07T22:41:36.991Z] [runtime-status] [60556] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:41:36.992Z] [runtime-status] [60556] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-07T22:41:36.992Z] [runtime-status] [60556] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-07T22:41:36.992Z] [runtime-status] [60556] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-07T22:41:37.321Z] [worker-~diagnostic~-f35bbd19-f4ca-475d-8508-a50e0819da33]: IDLE 
[debug] [2020-04-07T22:41:40.727Z] Apr 07, 2020 3:41:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:41:40.751Z] Apr 07, 2020 3:41:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:41:41.007Z] Apr 07, 2020 3:41:41 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Null value error. for 'create' @ L66

[debug] [2020-04-07T22:41:41.043Z] Apr 07, 2020 3:41:41 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-07T22:41:41.074Z] Apr 07, 2020 3:41:41 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:41:41.110Z] Apr 07, 2020 3:41:41 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property averageRating is undefined on object. for 'create' @ L66

[debug] [2020-04-07T22:41:41.163Z] Apr 07, 2020 3:41:41 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[info] i  firestore: Change detected, updating rules...
[debug] [2020-04-07T22:42:29.315Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/reach4help-dev:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nfunction isAuthenticated() {\n  return request.auth.uid != null;\n}\n\nfunction isUser(id) {\n  return isAuthenticated() && request.auth.uid == id;\n}\n\nfunction isVerifiedCAV() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction isVerifiedPIN() {\n  // TODO: Actually use auth claims\n  return isAuthenticated() && true;\n}\n\nfunction currentUserIsCurrentPINRef(database, data) {\n  return isAuthenticated() &&\n  ('pinUserRef' in data) &&\n  data.pinUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction currentUserIsCurrentCAVRef(database, data) {\n  return isAuthenticated() &&\n     ('cavUserRef' in data) &&\n     data.cavUserRef == /databases/$(database)/documents/users/$(request.auth.uid)\n}\n\nfunction confirmEitherPINorCAV(database, data) {\n    return currentUserIsCurrentPINRef(database, data) || currentUserIsCurrentCAVRef(database, data)\n}\n\nfunction isNotSameCAVPIN(request) {\n  return request.resource.data.cavUserRef != request.resource.data.pinUserRef\n}\n\nfunction verifyUserDataComplete(request) {\n   return request.resource.data.averageRating >= 1 &&\n          request.resource.data.casesCompleted >= 0 &&\n          request.resource.data.requestsMade >= 0 &&\n          ('username' in request.resource.data)\n}\n\n// TODO: Further validate address object.\nfunction verifyUserPrivilegedInformationDataComplete(request) {\n   return ('address' in request.resource.data) &&\n          ('termsAccepted' in request.resource.data) &&\n          ('termsVersion' in request.resource.data)\n}\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Catch all -- Dont read/write to collections without rules\n    match /{document=**} {\n      allow read, write: if false;\n    }\n\n    match /users/{userID} {\n      // Anyone can read your profile\n      allow read: if isAuthenticated();\n      // Only you can edit your own profile\n      allow write: if isUser(userID) && verifyUserDataComplete(request);\n    }\n\n    // 1: Read + Writes to sub-collection can only be done by the owner\n    // 2: Writes to sub-collections must match userID chain so we can always directly reference\n    match /users/{userID}/privilegedInformation/{subDocID} {\n        allow read: if isUser(userID) && userID == subDocID;\n        allow write: if isUser(userID) && userID == subDocID && verifyUserPrivilegedInformationDataComplete(request);\n    }\n\n    match /offers/{offerID} {\n      // Only the PIN or CAV of the request can read the offers\n      allow read: if confirmEitherPINorCAV(database, get(/databases/$(database)/documents/offers/$(offerID)).data)\n      // Only CAVs can submit offers (as themselves)\n      allow write: if isVerifiedCAV() && currentUserIsCurrentCAVRef(database, request.resource.data);\n    }\n\n    match /requests/{reqID} {\n      // Only CAVs can see requests\n      allow read: if isVerifiedCAV();\n      allow write: if isVerifiedCAV() && isNotSameCAVPIN(request);\n    }\n\n    match /questionnaires/{questID} {\n      // Can only read + write my own data\n      allow read, write: if isUser(request.resource.data.parentRef.uid);\n    }\n\n    // Don't allow writing to Teams and Orgs\n    match /organizations/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n    match /teams/{orgID} {\n      allow read;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2020-04-07T22:42:29.318Z] Apr 07, 2020 3:42:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-07T22:42:29.343Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"260"}
[warn] ⚠  ../firebase/firestore.rules:16:10 - WARNING Unused function: isVerifiedPIN.
[info] ✔  firestore: Rules updated.
[debug] [2020-04-07T22:42:37.537Z] Apr 07, 2020 3:42:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:42:37.562Z] Apr 07, 2020 3:42:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-07T22:42:37.851Z] Apr 07, 2020 3:42:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Null value error. for 'create' @ L66

[debug] [2020-04-07T22:42:37.888Z] Apr 07, 2020 3:42:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-07T22:42:37.919Z] Apr 07, 2020 3:42:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-07T22:42:37.954Z] Apr 07, 2020 3:42:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property averageRating is undefined on object. for 'create' @ L66

[debug] [2020-04-07T22:42:38.004Z] Apr 07, 2020 3:42:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-08T05:22:45.477Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-08T05:22:46.488Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-08T05:22:46.488Z] [worker-~diagnostic~-f35bbd19-f4ca-475d-8508-a50e0819da33]: FINISHING 
[debug] [2020-04-08T05:22:46.489Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-08T05:22:46.500Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-08T05:22:46.500Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-08T05:22:46.500Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-08T05:22:46.501Z] [worker-~diagnostic~-9238719c-50d5-49bf-9424-25f6d84faa35]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_62493.sock 
[debug] [2020-04-08T05:22:46.501Z] [worker-~diagnostic~-9238719c-50d5-49bf-9424-25f6d84faa35]: BUSY 
[debug] [2020-04-08T05:22:46.503Z] [worker-~diagnostic~-f35bbd19-f4ca-475d-8508-a50e0819da33]: exited 
[debug] [2020-04-08T05:22:46.503Z] [worker-~diagnostic~-f35bbd19-f4ca-475d-8508-a50e0819da33]: FINISHED 
[debug] [2020-04-08T05:22:47.064Z] [runtime-status] [62493] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-08T05:22:47.066Z] [runtime-status] [62493] Disabled runtime features: undefined 
[debug] [2020-04-08T05:22:47.070Z] [runtime-status] [62493] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-08T05:22:47.071Z] [runtime-status] [62493] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:22:47.077Z] [runtime-status] [62493] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-08T05:22:47.136Z] [runtime-status] [62493] Checked functions.config() {"config":{}} 
[debug] [2020-04-08T05:22:47.137Z] [runtime-status] [62493] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:22:47.137Z] [runtime-status] [62493] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-08T05:22:47.139Z] [runtime-status] [62493] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:22:47.141Z] [runtime-status] [62493] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-08T05:22:47.651Z] [worker-~diagnostic~-9238719c-50d5-49bf-9424-25f6d84faa35]: IDLE 
[debug] [2020-04-08T05:22:53.316Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-08T05:22:54.320Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-08T05:22:54.320Z] [worker-~diagnostic~-9238719c-50d5-49bf-9424-25f6d84faa35]: FINISHING 
[debug] [2020-04-08T05:22:54.320Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-08T05:22:54.324Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-08T05:22:54.324Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-08T05:22:54.324Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-08T05:22:54.324Z] [worker-~diagnostic~-4b8f500e-d9ca-4486-86db-1165ec3fd647]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_62499.sock 
[debug] [2020-04-08T05:22:54.324Z] [worker-~diagnostic~-4b8f500e-d9ca-4486-86db-1165ec3fd647]: BUSY 
[debug] [2020-04-08T05:22:54.327Z] [worker-~diagnostic~-9238719c-50d5-49bf-9424-25f6d84faa35]: exited 
[debug] [2020-04-08T05:22:54.327Z] [worker-~diagnostic~-9238719c-50d5-49bf-9424-25f6d84faa35]: FINISHED 
[debug] [2020-04-08T05:22:54.581Z] [runtime-status] [62499] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-08T05:22:54.581Z] [runtime-status] [62499] Disabled runtime features: undefined 
[debug] [2020-04-08T05:22:54.583Z] [runtime-status] [62499] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-08T05:22:54.584Z] [runtime-status] [62499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:22:54.587Z] [runtime-status] [62499] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-08T05:22:54.616Z] [runtime-status] [62499] Checked functions.config() {"config":{}} 
[debug] [2020-04-08T05:22:54.617Z] [runtime-status] [62499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:22:54.618Z] [runtime-status] [62499] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-08T05:22:54.618Z] [runtime-status] [62499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:22:54.618Z] [runtime-status] [62499] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-08T05:22:54.901Z] [worker-~diagnostic~-4b8f500e-d9ca-4486-86db-1165ec3fd647]: IDLE 
[debug] [2020-04-08T05:23:46.680Z] File /Users/dansabin/projects/freethinkingit/reach4help/functions/tests/firestore-rules.test.ts changed, reloading triggers 
[debug] [2020-04-08T05:23:47.687Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-08T05:23:47.687Z] [worker-~diagnostic~-4b8f500e-d9ca-4486-86db-1165ec3fd647]: FINISHING 
[debug] [2020-04-08T05:23:47.687Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-08T05:23:47.691Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-08T05:23:47.691Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-08T05:23:47.691Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-08T05:23:47.692Z] [worker-~diagnostic~-8890cba9-6354-40b6-a6fe-b6deea182146]: Assigning socketPath: /var/folders/dm/551fywzx6s7bzdg5c71v9wnc0000gn/T/fire_emu_62530.sock 
[debug] [2020-04-08T05:23:47.692Z] [worker-~diagnostic~-8890cba9-6354-40b6-a6fe-b6deea182146]: BUSY 
[debug] [2020-04-08T05:23:47.694Z] [worker-~diagnostic~-4b8f500e-d9ca-4486-86db-1165ec3fd647]: exited 
[debug] [2020-04-08T05:23:47.694Z] [worker-~diagnostic~-4b8f500e-d9ca-4486-86db-1165ec3fd647]: FINISHED 
[debug] [2020-04-08T05:23:47.979Z] [runtime-status] [62530] Functions runtime initialized. {"cwd":"/Users/dansabin/projects/freethinkingit/reach4help/functions","node_version":"10.16.3"} 
[debug] [2020-04-08T05:23:47.980Z] [runtime-status] [62530] Disabled runtime features: undefined 
[debug] [2020-04-08T05:23:47.983Z] [runtime-status] [62530] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-08T05:23:47.984Z] [runtime-status] [62530] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:23:47.988Z] [runtime-status] [62530] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-08T05:23:48.023Z] [runtime-status] [62530] Checked functions.config() {"config":{}} 
[debug] [2020-04-08T05:23:48.024Z] [runtime-status] [62530] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:23:48.024Z] [runtime-status] [62530] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-08T05:23:48.024Z] [runtime-status] [62530] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.5.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-08T05:23:48.025Z] [runtime-status] [62530] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dansabin/projects/freethinkingit/reach4help/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-08T05:23:48.225Z] [worker-~diagnostic~-8890cba9-6354-40b6-a6fe-b6deea182146]: IDLE 
[debug] [2020-04-08T05:23:54.111Z] Apr 07, 2020 10:23:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-08T05:23:54.272Z] Apr 07, 2020 10:23:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-08T05:23:54.568Z] Apr 07, 2020 10:23:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Null value error. for 'create' @ L66

[debug] [2020-04-08T05:23:54.602Z] Apr 07, 2020 10:23:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L66

[debug] [2020-04-08T05:23:54.631Z] Apr 07, 2020 10:23:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

[debug] [2020-04-08T05:23:54.667Z] Apr 07, 2020 10:23:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, Property averageRating is undefined on object. for 'create' @ L66

[debug] [2020-04-08T05:23:54.728Z] Apr 07, 2020 10:23:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
false for 'create' @ L59, false for 'create' @ L73

